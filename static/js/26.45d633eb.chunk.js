(this["webpackJsonpmappingfunk-interface"]=this["webpackJsonpmappingfunk-interface"]||[]).push([[26],{1064:function(e,n,t){"use strict";t.r(n);var c,a,i,r,o,l,s,b,d,m,f,u=t(7),j=t(1),g=t(17),h=t(98),p=t(146),x=t(28),O=t(23),k=t(127),y=t(121),N=t.n(y),w=t(78),v=t(126),T=t(220),C=t(14),I=t(258),F=t(18),D=t(15),P=t(509),S=t(242),A=t(0);const B=Object(g.a)("div")(c||(c=Object(u.a)(["\n  padding: 2px 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-family: Inter;\n  font-size: 12px;\n  font-weight: 500;\n  line-height: 20px;\n  letter-spacing: 0.02em;\n  border-radius: 20px;\n  background: linear-gradient(90deg, #61c2f7 0%, #7ae9f0 100%);\n  cursor: pointer;\n"]))),E=Object(g.a)("div")(a||(a=Object(u.a)(["\n  font-family: PingFang SC;\n  font-size: 10px;\n  font-weight: 500;\n  line-height: 10px;\n  padding: 4px 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 12px;\n  margin-right: 8px;\n"]))),z=Object(g.a)(E)(i||(i=Object(u.a)(["\n  color: rgba(85, 181, 89, 1);\n  background: rgba(85, 181, 89, 0.1);\n"]))),M=Object(g.a)(E)(r||(r=Object(u.a)(["\n  color: rgba(237, 112, 107, 1);\n  background: rgba(237, 112, 107, 0.2);\n"]))),W=Object(g.a)("div")(o||(o=Object(u.a)(["\n  min-width: 946px;\n  .active-icons {\n    transform: rotate(45deg);\n  }\n  .active-table {\n    background-color: white;\n    border-radius: 8px 8px 0 0;\n    border-bottom: unset;\n  }\n  .active-child-table {\n    height: auto;\n  }\n  .icons {\n    margin-right: 17px;\n    line-height: 19.6px;\n    /* transform-origin: center center; */\n    width: 20px;\n    margin-left: 12px;\n    cursor: pointer;\n  }\n  .ticker {\n    text-align: left;\n    width: 159px;\n  }\n  .price {\n    width: 184px;\n  }\n  .balance-wallet {\n    width: 195px;\n  }\n  .balance-collateral {\n    width: 216px;\n  }\n  .debt {\n    width: 196px;\n    margin-left: auto;\n    padding-right: 11px;\n  }\n"]))),Y=Object(g.a)("div")(l||(l=Object(u.a)(["\n  display: flex;\n  color: #00000080;\n  padding: 18px 0;\n  border-bottom: 0.5px solid #0000001f;\n  font-size: 14px;\n"]))),q=Object(g.a)("div")(s||(s=Object(u.a)(["\n  font-family: PingFang SC;\n  font-weight: 400;\n  line-height: 19.6px;\n  text-align: right;\n  display: flex;\n  align-items: center;\n"]))),L=Object(g.a)("div")(b||(b=Object(u.a)([""]))),R=Object(g.a)("div")(d||(d=Object(u.a)(["\n  color: #000000;\n  font-family: PingFang SC;\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 19.6px;\n  padding: 17px 0;\n  border-bottom: 0.5px solid #0000001f;\n  margin-top: 10px;\n  cursor: pointer;\n  display: flex;\n"]))),H=Object(g.a)("div")(m||(m=Object(u.a)(["\n  background: #def1ff;\n  border-radius: 0 0 8px 8px;\n  overflow: hidden;\n  height: 0;\n  padding: 0 30px 0 50px;\n  .debt {\n    padding-right: 20px;\n    display: flex;\n    justify-content: end;\n  }\n"]))),J=Object(g.a)(R)(f||(f=Object(u.a)(["\n  font-size: 12px;\n  padding: 11px 0 12px;\n  align-items: center;\n  border-bottom: 0.5px solid #0000001f;\n  &:last-of-type {\n    border: unset;\n  }\n"])));var U,X=function(e){const{testData:n}=e,[t,c]=Object(j.useState)([0]);return Object(A.jsxs)(W,{children:[Object(A.jsxs)(Y,{children:[Object(A.jsx)(q,{className:"icons",onClick:()=>{t.length===n.length?c([]):(console.log(Array.from({length:n.length},((e,n)=>n))),c(Array.from({length:n.length},((e,n)=>n))))},children:Object(A.jsx)(S.a,{style:{transform:t.length===n.length?"rotate(45deg)":""},color:"#2AA1FF"})}),Object(A.jsx)(q,{className:"ticker",children:"Ticker"}),Object(A.jsx)(q,{className:"price",children:"Mark Price"}),Object(A.jsx)(q,{className:"balance-wallet",children:"Balance in Wallet"}),Object(A.jsx)(q,{className:"balance-collateral",children:"Balance in Collateral"}),Object(A.jsx)(q,{className:"debt",children:"Outstanding Debt"})]}),n&&n.length>0&&n.map(((e,n)=>Object(A.jsxs)(L,{children:[Object(A.jsxs)(R,{className:"".concat(t.includes(n)?"active-table":""),onClick:()=>{const e=t.some((e=>e===n));c(e?t.filter((e=>e!==n)):[...t,n])},children:[Object(A.jsx)(q,{className:"".concat(t.includes(n)?"active-icons":""," icons"),children:Object(A.jsx)(S.a,{color:"#2AA1FF"})}),Object(A.jsxs)(q,{className:"ticker",children:[Object(A.jsx)("img",{src:e.logo,style:{display:"block",marginRight:7,float:"left",width:20,height:20},alt:"icon"}),e.ticker]}),Object(A.jsxs)(q,{className:"price",children:[O.a.formatFourDecimals(e.markPrice)," "," ".concat(e.mintTokenInfo.settlementCurrency.symbol)]}),Object(A.jsx)(q,{className:"balance-wallet",children:O.a.formatFourDecimals(e.walletBalance)}),Object(A.jsx)(q,{className:"balance-collateral",children:O.a.formatFourDecimals(e.avatarBalance)}),Object(A.jsx)(q,{className:"debt",children:Object(P.a)(e.outstandingDebt)})]},e.balanceCollateral),Object(A.jsxs)(H,{className:"".concat(t.includes(n)?"active-child-table":""),children:[Object(A.jsxs)(Y,{children:[Object(A.jsx)(q,{className:"ticker",children:"Delivery Date"}),Object(A.jsx)(q,{className:"price",children:"Fair Price"}),Object(A.jsx)(q,{className:"balance-wallet",children:"Net Position"}),Object(A.jsx)(q,{className:"balance-collateral"}),Object(A.jsx)(q,{className:"debt",children:"Action"})]}),e.childTableInfo&&e.childTableInfo.length>0&&e.childTableInfo.map((e=>{return Object(A.jsxs)(J,{className:"child-table-cell",children:[Object(A.jsx)(q,{className:"ticker",children:e.deliveryDate}),Object(A.jsxs)(q,{className:"price",children:[Object(P.a)(e.fairPrice)," "," WBTC"]}),Object(A.jsxs)(q,{className:"balance-wallet",children:[(n=e.netPosition,0===n?"":Number(n)>0?Object(A.jsx)(z,{children:"Long"}):Object(A.jsx)(M,{children:"Short"}))," ",Object(P.a)(Object(O.b)(e.netPosition.toString(),18).toString().replace(/^[-+]/,""))]}),Object(A.jsx)(q,{className:"balance-collateral"}),Object(A.jsx)(q,{className:"debt",style:{paddingRight:"7px"},children:Object(A.jsx)(B,{onClick:()=>{window.open("".concat(e.actionUrl))},children:"Hedge"})})]},e.deliveryDate);var n}))]})]},e.balanceCollateral)))]})};const K=Object(g.a)("div")(U||(U=Object(u.a)(["\n  width: 100%;\n  height: 100%;\n  padding-right: 100px;\n  overflow: auto;\n"])));n.default=function(){const{hedgingInfo:e}=function(){const{chainId:e,account:n}=Object(x.b)(),{walletTokenBalance:t}=Object(T.a)(),{observerContract:c,signer:a}=Object(p.a)(),{positionAll:i,tokenPrice:r,allowedTokens:o}=Object(v.c)(),[l,s]=Object(j.useState)({}),b=Object(j.useCallback)((async(e,t)=>{let a=0;try{const i=await c.getPosition(e,t,n);i&&i.size&&(a=i.size)}catch(i){console.error("getPositionVal error",i)}return a}),[n,c]),d=Object(j.useCallback)((async(e,n)=>{let t=0;try{const c=await e.inquire(n,0);c&&c.sqrtFairPX96&&(t=Number(c.sqrtFairPX96/2**96)**2)}catch(c){console.error("getFairPrice error",c)}return t}),[]),m=Object(j.useCallback)((async(e,n)=>{try{const t=await n.getExpiries();if(t){const c=[];for(let a=0;a<t.length;a++){const i=t[a],r=await b(e.mintTokenInfo.instrument,i),o=await d(n,i);c.push({deliveryDate:N()(1e3*i).format("YYYY-MM-DD"),fairPrice:o.toFixed(e.mintTokenInfo.settlementCurrency.decimals),netPosition:Number(r),actionUrl:"https://testnet.synfutures.com/#/trade/blastsepolia/F(BTC,25)-WBTC-".concat(w.f,"-").concat(N()(1e3*i).format("MMDD"))})}return c}return[]}catch(t){throw console.error("getExpiries error",t),t}}),[d,b]),f=Object(j.useCallback)((async()=>{if(e&&Object(D.f)(e))for(const e of Object.values(i)){let i=0;const{settlementCurrency:l}=e.mintTokenInfo;let b=Object.keys(F.h).reduce(((e,n)=>({...e,[n]:0})),{});var n;if(e.isEnable&&r[e.positionAddress]&&(i=Object(O.b)(null===(n=r[e.positionAddress][e.mintTokenInfo.symbol])||void 0===n?void 0:n.price,l.decimals,!0)),e.isEnable&&o[e.positionAddress]){const{balances:n,tokens:t}=o[e.positionAddress];n&&t&&(b=Object.keys(n).reduce(((e,c)=>({...e,[c]:Object(O.b)(n[c],t[c].decimals,!0)})),{...b}))}const d={ticker:e.mintTokenInfo.symbol,logo:e.mintTokenInfo.logo,markPrice:i,displayMarkPrice:"".concat(i," ").concat(l.symbol),walletBalance:Number(O.a.formatFourDecimals(t[e.mintTokenInfo.symbol])),avatarBalance:Number(b[e.mintTokenInfo.symbol]),mintTokenInfo:e.mintTokenInfo,isEnable:e.isEnable,positionAddress:e.positionAddress,outstandingDebt:Number(O.a.formatFourDecimals(Object(O.b)(e.balance,e.mintTokenInfo.decimals,!0))),childTableInfo:[]};console.log("tokenInfoData",d);try{if(e.mintTokenInfo.instrument!==C.ethers.constants.AddressZero){const n=new C.ethers.Contract(e.mintTokenInfo.instrument,I,a),t=await m(e,n);console.log("childTableInfo",t),d.childTableInfo=t,s((n=>({...n,[e.mintTokenInfo.symbol]:d})))}else s((n=>({...n,[e.mintTokenInfo.symbol]:d})))}catch(c){console.error("getExpiries error",c),s(d)}}}),[o,e,m,i,a,r,t]);return Object(j.useEffect)((()=>{f()}),[f]),{hedgingInfo:l}}();return Object(A.jsxs)(K,{children:[Object(A.jsx)(k.l,{children:"Hedging"}),Object(A.jsx)(h.a,{style:{paddingTop:"15px",paddingLeft:"20px",paddingRight:"20px",overflow:"auto",height:"calc(100% - 200px)"},children:Object(A.jsx)(X,{testData:Object.values(e)})})]})}},509:function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return s})),t.d(n,"a",(function(){return b}));var c=t(12),a=t(63),i=(t(83),t(23));function r(e){if(e>=1e6)return"".concat((e/1e6).toFixed(1),"M");if(e>=1e4)return"".concat((e/1e3).toFixed(1),"K");const n=e.toFixed(2);return 0===n||"0"===n?"0.00":n}function o(e){if(Number.isNaN(Number(e)))return e;if(e.toString().includes("+"))return Number(e).toLocaleString().replace(/,/g,"");if(String(e).includes("-")){const n=String(e),t=/^([0-9]).?([0-9]*)e-([0-9]*)/;if(!t.test(n))return e;const c=n.match(t),a=Number("".concat(c[1]).concat(c[2]||""));return"0.".concat(String(10**(Number(c[3])-1)).substr(1)).concat(a).replace(/0*$/,"")}return String(e).includes(".")?i.a.formatFourDecimals(Number(e)):String(e)}function l(e,n){const t=String(o(e));return n&&"WBTC"===n&&Number(t)&&t.includes(".")?o(Number(t.slice(0,t.indexOf(".")+9))):n&&"F(BTC,20)"===n&&Number(t)&&t.includes(".")?o(Number(t.slice(0,t.indexOf(".")+7))):"number"===typeof n?o(Number(t.slice(0,t.indexOf(".")+(n+1)))):("WBTC"!==n||"F(BTC,20)"!==n)&&t.includes(".")?o(Number(t.slice(0,t.indexOf(".")+3))):e}function s(e){return e?l(o(e/Number(c.a.from(10).pow(a.a.WBTC.decimals))),"WBTC"):0}function b(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(void 0===e)return"0";const t="number"===typeof e?e:Number(e),c=String(t);return c.includes(".")?i.a.formatTokenAmount(e,n):c}}}]);
//# sourceMappingURL=26.45d633eb.chunk.js.map