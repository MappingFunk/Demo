{"version":3,"sources":["components/MainTitle.tsx","views/Liquidation/index.tsx"],"names":["Title","styled","_templateObject","_taggedTemplateLiteral","MainTitle","props","children","_jsx","Wrapper","CardWrapper","Card","_templateObject2","headCells","id","numeric","disablePadding","isSort","label","Liquidation","history","holderText","setPlaceholder","useState","searchVal","setSearchVal","onSearch","useCallback","_ref","target","value","positionAll","tokenPrice","allowedTokens","usePositionInfo","handleChangeCurrentPosition","usePositionAction","dataSource","useMemo","Object","values","map","item","markPrice","settlementCurrency","mintTokenInfo","_avatarAssetList","keys","valueToKeyMap","reduce","acc","key","_tokenPrice$item$posi","isEnable","positionAddress","toLargeUnits","symbol","price","decimals","balances","tokens","prepaidInterestCoverage","collateralRatio","logo","displayMarkPrice","concat","TokenUtils","formatFourDecimals","avatarBalance","Number","displayCoverage","POSITIVE_INFINITY","Math","floor","displayRatio","formatTokenAmount","outstandingDebt","balance","_jsxs","style","marginBottom","fontFamily","Search","SearchIconWrapper","SearchIcon","StyledInputBase","type","placeholder","inputProps","onInput","onFocus","onBlur","Table","rowClick","_","row","push","pagination","columns","content","index","labelId","_Fragment","StyledTableCell","component","scope","color","address","slice"],"mappings":"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","file":"static/js/28.bbc8b675.chunk.js","sourcesContent":["import React from 'react';\nimport {styled} from \"@mui/material/styles\";\n\nconst Title = styled('h1')`\n  font-family: \"Heebo Medium\";\n  font-style: normal;\n  font-weight: 500; \n  font-size: 32px;\n  line-height: 48px;\n  color: #000;\n`\n\nfunction MainTitle(props) {\n  const {children} = props;\n  return (\n      <Title {...props}>\n        {children}\n      </Title>\n  );\n}\n\nexport default MainTitle;\n","import React, { useCallback, useMemo, useState } from 'react'\nimport { styled } from '@mui/material/styles'\nimport Card from 'components/Card'\nimport Table, { StyledTableCell } from 'components/Table'\nimport SearchIcon from '@mui/icons-material/Search'\nimport MainTitle from 'components/MainTitle'\nimport { TokenUtils, toLargeUnits } from 'utils/transformHelper'\nimport { usePositionAction, usePositionInfo } from 'hooks/news/usePoistion'\nimport { SupportedTokens, valueToKeyMap } from 'config/constants/tokenConfig'\nimport { Search, StyledInputBase, SearchIconWrapper } from '../Collateral'\n\nconst Wrapper = styled('div')`\n  padding-right: 44px;\n`\n\nconst CardWrapper = styled(Card)`\n  .pagination {\n  }\n`\nconst headCells = [\n  {\n    id: 'positionAddress',\n    numeric: false,\n    disablePadding: true,\n    isSort: true,\n    label: 'Collateral',\n  },\n  {\n    id: 'symbol',\n    numeric: false,\n    disablePadding: false,\n    isSort: true,\n    label: 'Ticker',\n  },\n  {\n    id: 'markPrice',\n    numeric: true,\n    disablePadding: false,\n    isSort: true,\n    label: 'Mark Price',\n  },\n  /*  {\n    id: 'collateralMarkPrice',\n    numeric: true,\n    disablePadding: false,\n    label: 'Collateral Mark Value',\n  },\n  {\n    id: 'collateralMarketValue',\n    numeric: true,\n    disablePadding: false,\n    label: 'Collateral Market Value',\n  }, */\n  {\n    id: 'outstandingDebt',\n    numeric: true,\n    disablePadding: false,\n    isSort: true,\n    label: ' Outstanding Debt Position',\n  },\n  {\n    id: 'collateralRatio',\n    numeric: true,\n    disablePadding: false,\n    isSort: true,\n    label: 'Collateral Ratio',\n  },\n  {\n    id: 'prepaidInterestCoverage',\n    numeric: true,\n    disablePadding: false,\n    isSort: true,\n    label: 'Prepaid Interest Coverage',\n  },\n]\n\nconst addressShort = (address) => {\n  if (!address) return address\n  return `${address.slice(0, 6)}...${address.slice(-6)}`\n}\n\nfunction Liquidation(props) {\n  const { history } = props\n  const [holderText, setPlaceholder] = useState('Ticker')\n  const [searchVal, setSearchVal] = useState()\n  const onSearch = useCallback(({ target }) => {\n    const { value } = target\n    setSearchVal(value)\n  }, [])\n\n  const { positionAll, tokenPrice, allowedTokens } = usePositionInfo()\n  const { handleChangeCurrentPosition } = usePositionAction()\n\n\n\n  const dataSource = useMemo(() => {\n    const list = Object.values(positionAll)\n\n    return list.map((item) => {\n      let markPrice = 0\n      const { settlementCurrency } = item.mintTokenInfo\n      let _avatarAssetList = Object.keys(valueToKeyMap).reduce((acc, key) => {\n        return {\n          ...acc,\n          [key]: 0,\n        }\n      }, {}) as Record<SupportedTokens, number>\n      if (item.isEnable && tokenPrice[item.positionAddress]) {\n        markPrice = toLargeUnits(\n          tokenPrice[item.positionAddress][item.mintTokenInfo.symbol]?.price,\n          settlementCurrency.decimals,\n          true\n        ) as number\n      }\n      if (item.isEnable && allowedTokens[item.positionAddress]) {\n        const { balances, tokens } = allowedTokens[item.positionAddress]\n        if (balances && tokens) {\n          _avatarAssetList = Object.keys(balances).reduce((acc, key) => {\n            return {\n              ...acc,\n              [key]:tokens[key] ? toLargeUnits(balances[key], tokens[key].decimals, true) as number : 0,\n            }\n          }, {\n            ..._avatarAssetList\n          })\n        }\n\n      }\n      const { prepaidInterestCoverage, collateralRatio } = item\n      \n      return {\n        symbol: item.mintTokenInfo.symbol,\n        positionAddress: item.positionAddress,\n        logo: item.mintTokenInfo.logo,\n        markPrice,\n        displayMarkPrice: `${TokenUtils.formatFourDecimals(markPrice)} ${settlementCurrency.symbol}`,\n        avatarBalance: Number(_avatarAssetList[item.mintTokenInfo.symbol]),\n        prepaidInterestCoverage,\n        collateralRatio,\n        displayCoverage:\n          prepaidInterestCoverage === Number.POSITIVE_INFINITY ? '+∞' : `${Math.floor(prepaidInterestCoverage)} days`,\n        displayRatio:\n          collateralRatio === Number.POSITIVE_INFINITY\n            ? '+∞'\n            : (collateralRatio && `${TokenUtils.formatTokenAmount(collateralRatio, 2)}%`) || `${collateralRatio}`,\n        outstandingDebt: TokenUtils.formatFourDecimals(toLargeUnits(item.balance, item.mintTokenInfo.decimals, true) as number),\n      }\n    })\n  }, [allowedTokens, positionAll, tokenPrice])\n\n\n  return (\n    <Wrapper>\n      <MainTitle style={{ marginBottom: 14, fontFamily: 'Heebo Medium' }}>Liquidation</MainTitle>\n      <CardWrapper>\n        <Search>\n          <SearchIconWrapper>\n            <SearchIcon />\n          </SearchIconWrapper>\n          <StyledInputBase\n            type=\"search\"\n            placeholder={holderText}\n            inputProps={{ 'aria-label': 'search' }}\n            value={searchVal}\n            onInput={onSearch}\n            onFocus={() => {\n              setPlaceholder('')\n            }}\n            onBlur={() => {\n              setPlaceholder('Ticker')\n            }}\n          />\n        </Search>\n        <Table\n          rowClick={(_, row) => {\n            handleChangeCurrentPosition(row.symbol);\n            history.push('/liquidation/detail')\n          }}\n          pagination\n          dataSource={dataSource}\n          columns={headCells}\n          content={(row, index, labelId) => (\n            <>\n              <StyledTableCell component=\"th\" id={labelId} scope=\"row\">\n                <span style={{ color: '#2AA1FF' }}>{addressShort(row.positionAddress)}</span>\n              </StyledTableCell>\n              <StyledTableCell>{row.symbol}</StyledTableCell>\n              <StyledTableCell>\n                {row.displayMarkPrice}\n              </StyledTableCell>\n              <StyledTableCell>\n                {row.outstandingDebt} \n              </StyledTableCell>\n              <StyledTableCell>{row.displayRatio}</StyledTableCell>\n              <StyledTableCell>{row.displayCoverage}</StyledTableCell>\n            </>\n          )}\n        />\n      </CardWrapper>\n    </Wrapper>\n  )\n}\n\nexport default Liquidation\n"],"sourceRoot":""}