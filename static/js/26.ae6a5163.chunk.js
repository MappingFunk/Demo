(this["webpackJsonpmappingfunk-interface"]=this["webpackJsonpmappingfunk-interface"]||[]).push([[26],{1063:function(e,n,t){"use strict";t.r(n);var c,a,i,r,o,l,s,b,d,m,f,u=t(7),j=t(1),g=t(17),h=t(97),p=t(143),x=t(27),O=t(28),k=t(123),y=t(162),N=t.n(y),w=t(78),v=t(142),T=t(218),C=t(14),I=t(256),F=t(508),D=t(240),P=t(0);const S=Object(g.a)("div")(c||(c=Object(u.a)(["\n  padding: 2px 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-family: Inter;\n  font-size: 12px;\n  font-weight: 500;\n  line-height: 20px;\n  letter-spacing: 0.02em;\n  border-radius: 20px;\n  background: linear-gradient(90deg, #61c2f7 0%, #7ae9f0 100%);\n  cursor: pointer;\n"]))),A=Object(g.a)("div")(a||(a=Object(u.a)(["\n  font-family: PingFang SC;\n  font-size: 10px;\n  font-weight: 500;\n  line-height: 10px;\n  padding: 4px 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 12px;\n  margin-right: 8px;\n"]))),B=Object(g.a)(A)(i||(i=Object(u.a)(["\n  color: rgba(85, 181, 89, 1);\n  background: rgba(85, 181, 89, 0.1);\n"]))),E=Object(g.a)(A)(r||(r=Object(u.a)(["\n  color: rgba(237, 112, 107, 1);\n  background: rgba(237, 112, 107, 0.2);\n"]))),z=Object(g.a)("div")(o||(o=Object(u.a)(["\n  min-width: 946px;\n  .active-icons {\n    transform: rotate(45deg);\n  }\n  .active-table {\n    background-color: white;\n    border-radius: 8px 8px 0 0;\n    border-bottom: unset;\n  }\n  .active-child-table {\n    height: auto;\n  }\n  .icons {\n    margin-right: 17px;\n    line-height: 19.6px;\n    /* transform-origin: center center; */\n    width: 20px;\n    margin-left: 12px;\n    cursor: pointer;\n  }\n  .ticker {\n    text-align: left;\n    width: 159px;\n  }\n  .price {\n    width: 184px;\n  }\n  .balance-wallet {\n    width: 195px;\n  }\n  .balance-collateral {\n    width: 216px;\n  }\n  .debt {\n    width: 196px;\n    margin-left: auto;\n    padding-right: 11px;\n  }\n"]))),M=Object(g.a)("div")(l||(l=Object(u.a)(["\n  display: flex;\n  color: #00000080;\n  padding: 18px 0;\n  border-bottom: 0.5px solid #0000001f;\n  font-size: 14px;\n"]))),W=Object(g.a)("div")(s||(s=Object(u.a)(["\n  font-family: PingFang SC;\n  font-weight: 400;\n  line-height: 19.6px;\n  text-align: right;\n  display: flex;\n  align-items: center;\n"]))),Y=Object(g.a)("div")(b||(b=Object(u.a)([""]))),q=Object(g.a)("div")(d||(d=Object(u.a)(["\n  color: #000000;\n  font-family: PingFang SC;\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 19.6px;\n  padding: 17px 0;\n  border-bottom: 0.5px solid #0000001f;\n  margin-top: 10px;\n  cursor: pointer;\n  display: flex;\n"]))),L=Object(g.a)("div")(m||(m=Object(u.a)(["\n  background: #def1ff;\n  border-radius: 0 0 8px 8px;\n  overflow: hidden;\n  height: 0;\n  padding: 0 30px 0 50px;\n  .debt {\n    padding-right: 20px;\n    display: flex;\n    justify-content: end;\n  }\n"]))),R=Object(g.a)(q)(f||(f=Object(u.a)(["\n  font-size: 12px;\n  padding: 11px 0 12px;\n  align-items: center;\n  border-bottom: 0.5px solid #0000001f;\n  &:last-of-type {\n    border: unset;\n  }\n"])));var H,J=function(e){const{testData:n}=e,[t,c]=Object(j.useState)([0]);return Object(P.jsxs)(z,{children:[Object(P.jsxs)(M,{children:[Object(P.jsx)(W,{className:"icons",onClick:()=>{t.length===n.length?c([]):(console.log(Array.from({length:n.length},((e,n)=>n))),c(Array.from({length:n.length},((e,n)=>n))))},children:Object(P.jsx)(D.a,{style:{transform:t.length===n.length?"rotate(45deg)":""},color:"#2AA1FF"})}),Object(P.jsx)(W,{className:"ticker",children:"Ticker"}),Object(P.jsx)(W,{className:"price",children:"Mark Price"}),Object(P.jsx)(W,{className:"balance-wallet",children:"Balance in Wallet"}),Object(P.jsx)(W,{className:"balance-collateral",children:"Balance in Collateral"}),Object(P.jsx)(W,{className:"debt",children:"Outstanding Debt"})]}),n&&n.length>0&&n.map(((e,n)=>Object(P.jsxs)(Y,{children:[Object(P.jsxs)(q,{className:"".concat(t.includes(n)?"active-table":""),onClick:()=>{const e=t.some((e=>e===n));c(e?t.filter((e=>e!==n)):[...t,n])},children:[Object(P.jsx)(W,{className:"".concat(t.includes(n)?"active-icons":""," icons"),children:Object(P.jsx)(D.a,{color:"#2AA1FF"})}),Object(P.jsxs)(W,{className:"ticker",children:[Object(P.jsx)("img",{src:e.logo,style:{display:"block",marginRight:7,float:"left",width:20,height:20},alt:"icon"}),e.ticker]}),Object(P.jsxs)(W,{className:"price",children:[O.a.formatFourDecimals(e.markPrice)," "," ".concat(e.mintTokenInfo.settlementCurrency.symbol)]}),Object(P.jsx)(W,{className:"balance-wallet",children:O.a.formatFourDecimals(e.walletBalance)}),Object(P.jsx)(W,{className:"balance-collateral",children:O.a.formatFourDecimals(e.avatarBalance)}),Object(P.jsx)(W,{className:"debt",children:Object(F.a)(e.outstandingDebt)})]},e.balanceCollateral),Object(P.jsxs)(L,{className:"".concat(t.includes(n)?"active-child-table":""),children:[Object(P.jsxs)(M,{children:[Object(P.jsx)(W,{className:"ticker",children:"Delivery Date"}),Object(P.jsx)(W,{className:"price",children:"Fair Price"}),Object(P.jsx)(W,{className:"balance-wallet",children:"Net Position"}),Object(P.jsx)(W,{className:"balance-collateral"}),Object(P.jsx)(W,{className:"debt",children:"Action"})]}),e.childTableInfo&&e.childTableInfo.length>0&&e.childTableInfo.map((e=>{return Object(P.jsxs)(R,{className:"child-table-cell",children:[Object(P.jsx)(W,{className:"ticker",children:e.deliveryDate}),Object(P.jsxs)(W,{className:"price",children:[Object(F.a)(e.fairPrice)," "," WBTC"]}),Object(P.jsxs)(W,{className:"balance-wallet",children:[(n=e.netPosition,0===n?"":Number(n)>0?Object(P.jsx)(B,{children:"Long"}):Object(P.jsx)(E,{children:"Short"}))," ",Object(F.a)(Object(O.b)(e.netPosition.toString(),18).toString().replace(/^[-+]/,""))]}),Object(P.jsx)(W,{className:"balance-collateral"}),Object(P.jsx)(W,{className:"debt",style:{paddingRight:"7px"},children:Object(P.jsx)(S,{onClick:()=>{window.open("".concat(e.actionUrl))},children:"Hedge"})})]},e.deliveryDate);var n}))]})]},e.balanceCollateral)))]})},U=t(21),X=t(16);const K=Object(g.a)("div")(H||(H=Object(u.a)(["\n  width: 100%;\n  height: 100%;\n  padding-right: 100px;\n  overflow: auto;\n"])));n.default=function(){const{hedgingInfo:e}=function(){const{active:e,library:n,chainId:t,account:c}=Object(x.b)(),{walletTokenBalance:a}=Object(T.a)(),{observerContract:i,signer:r}=Object(p.a)(),{positionAll:o,tokenPrice:l,allowedTokens:s}=Object(v.c)(),[b,d]=Object(j.useState)({}),m=Object(j.useCallback)((async(e,n)=>{let t=0;try{const a=await i.getPosition(e,n,c);a&&a.size&&(t=a.size)}catch(a){console.error("getPositionVal error",a)}return t}),[c,i]),f=Object(j.useCallback)((async(e,n)=>{let t=0;try{const c=await e.inquire(n,0);c&&c.sqrtFairPX96&&(t=Number(c.sqrtFairPX96/2**96)**2)}catch(c){console.error("getFairPrice error",c)}return t}),[]),u=Object(j.useCallback)((async(e,n)=>{try{const t=await n.getExpiries();if(t){const c=[];for(let a=0;a<t.length;a++){const i=t[a],r=await m(e.mintTokenInfo.instrument,i),o=await f(n,i);c.push({deliveryDate:N()(1e3*i).format("YYYY-MM-DD"),fairPrice:o.toFixed(e.mintTokenInfo.settlementCurrency.decimals),netPosition:Number(r),actionUrl:"https://testnet.synfutures.com/#/trade/blastsepolia/F(BTC,25)-WBTC-".concat(w.f,"-").concat(N()(1e3*i).format("MMDD"))})}return c}return[]}catch(t){throw console.error("getExpiries error",t),t}}),[f,m]),g=Object(j.useCallback)((async()=>{if(t&&Object(X.f)(t))for(const t of Object.values(o)){let c=0;const{settlementCurrency:i}=t.mintTokenInfo;let o=Object.keys(U.h).reduce(((e,n)=>({...e,[n]:0})),{});var e;if(t.isEnable&&l[t.positionAddress]&&(c=Object(O.b)(null===(e=l[t.positionAddress][t.mintTokenInfo.symbol])||void 0===e?void 0:e.price,i.decimals,!0)),t.isEnable&&s[t.positionAddress]){const{balances:e,tokens:n}=s[t.positionAddress];e&&n&&(o=Object.keys(e).reduce(((t,c)=>({...t,[c]:Object(O.b)(e[c],n[c].decimals,!0)})),{...o}))}const b={ticker:t.mintTokenInfo.symbol,logo:t.mintTokenInfo.logo,markPrice:c,displayMarkPrice:"".concat(c," ").concat(i.symbol),walletBalance:Number(O.a.formatFourDecimals(a[t.mintTokenInfo.symbol])),avatarBalance:Number(o[t.mintTokenInfo.symbol]),mintTokenInfo:t.mintTokenInfo,isEnable:t.isEnable,positionAddress:t.positionAddress,outstandingDebt:Number(O.a.formatFourDecimals(Object(O.b)(t.balance,t.mintTokenInfo.decimals,!0))),childTableInfo:[]};console.log("tokenInfoData",b);try{if(t.mintTokenInfo.instrument!==C.ethers.constants.AddressZero){const e=new C.ethers.Contract(t.mintTokenInfo.instrument,I,r),n=await u(t,e);console.log("childTableInfo",n),b.childTableInfo=n,d((e=>({...e,[t.mintTokenInfo.symbol]:b})))}else d((e=>({...e,[t.mintTokenInfo.symbol]:b})))}catch(n){console.error("getExpiries error",n),d(b)}}}),[s,t,u,o,r,l,a]);return Object(j.useEffect)((()=>{g()}),[g]),{hedgingInfo:b}}();return Object(P.jsxs)(K,{children:[Object(P.jsx)(k.l,{children:"Hedging"}),Object(P.jsx)(h.a,{style:{paddingTop:"15px",paddingLeft:"20px",paddingRight:"20px",overflow:"auto",height:"calc(100% - 200px)"},children:Object(P.jsx)(J,{testData:Object.values(e)})})]})}},508:function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return s})),t.d(n,"a",(function(){return b}));var c=t(12),a=t(63),i=(t(88),t(28));function r(e){if(e>=1e6)return"".concat((e/1e6).toFixed(1),"M");if(e>=1e4)return"".concat((e/1e3).toFixed(1),"K");const n=e.toFixed(2);return 0===n||"0"===n?"0.00":n}function o(e){if(Number.isNaN(Number(e)))return e;if(e.toString().includes("+"))return Number(e).toLocaleString().replace(/,/g,"");if(String(e).includes("-")){const n=String(e),t=/^([0-9]).?([0-9]*)e-([0-9]*)/;if(!t.test(n))return e;const c=n.match(t),a=Number("".concat(c[1]).concat(c[2]||""));return"0.".concat(String(10**(Number(c[3])-1)).substr(1)).concat(a).replace(/0*$/,"")}return String(e).includes(".")?i.a.formatFourDecimals(Number(e)):String(e)}function l(e,n){const t=String(o(e));return n&&"WBTC"===n&&Number(t)&&t.includes(".")?o(Number(t.slice(0,t.indexOf(".")+9))):n&&"F(BTC,20)"===n&&Number(t)&&t.includes(".")?o(Number(t.slice(0,t.indexOf(".")+7))):"number"===typeof n?o(Number(t.slice(0,t.indexOf(".")+(n+1)))):("WBTC"!==n||"F(BTC,20)"!==n)&&t.includes(".")?o(Number(t.slice(0,t.indexOf(".")+3))):e}function s(e){return e?l(o(e/Number(c.a.from(10).pow(a.a.WBTC.decimals))),"WBTC"):0}function b(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(void 0===e)return"0";const t="number"===typeof e?e:Number(e),c=String(t);return c.includes(".")?i.a.formatTokenAmount(e,n):c}}}]);
//# sourceMappingURL=26.ae6a5163.chunk.js.map