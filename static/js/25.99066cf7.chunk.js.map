{"version":3,"sources":["views/Hedging/HedgingTable.tsx","views/Hedging/index.tsx","hooks/useHashPowerToken.ts"],"names":["HedgeButton","styled","_templateObject","_taggedTemplateLiteral","PositionTag","_templateObject2","LongTag","_templateObject3","ShortTag","_templateObject4","TableWrapper","_templateObject5","TableHeader","_templateObject6","TableItem","_templateObject7","TableBody","_templateObject8","TableCell","_templateObject9","ChildTable","_templateObject10","ChildTabelCell","_templateObject11","HedingTable","props","testData","openTableItem","setOpenTableItem","useState","console","log","tagStatus","useCallback","number","Number","_jsx","children","_jsxs","className","onClick","length","Array","from","_","index","AddIcon","style","transform","color","map","item","concat","includes","exists","some","items","filter","src","TokensIcon","ticker","display","marginRight","float","alt","markPrice","formatNumber","balanceWallet","balanceCollateral","outstandingDebt","childTableInfo","childItem","deliveryDate","fairPrice","netPosition","toLargeUnits","toString","replace","paddingRight","window","open","actionUrl","HedgingBox","useHedging","_ref","tokenIndex","toastError","useToast","active","library","chainId","account","useWeb3React","hashPowerTokenList","walletTokenBalance","useHashPowerToken","position","instrumentContract","instrumentContract2","observerContract","useSystemParams","instrument","getTokenBalance","useGetTokenBalance","avatarAssetList","setAvatarAssetList","getPositonBalance","async","assetList","useEffect","outstandingDebts","useMemo","balance","toSmallUnits","decimals","tableInfo","setTablInfo","markPriceVal","formatWBTC","tokensValues","token","hedgingData","addIcon","getPositionVal","result","res","getPosition","size","error","message","getFairPrice","inquire","sqrtFairPX96","getExpiries","txInfo","childTable","i","_deliveryDate","_positionVal","_fairPrice","push","moment","format","toFixed","tokens","WBTC","hedgingVersion","HedgingPage","hedging0","hedging1","Title","Card","paddingTop","paddingLeft","overflow","height","HedgingTable","hashPowerToken","useContext","HashPowerTokenContext","undefined","Error"],"mappings":"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","file":"static/js/25.99066cf7.chunk.js","sourcesContent":["import React, { useCallback, useState } from 'react'\nimport { styled } from '@mui/material/styles'\nimport { TokensIcon } from 'config/constants/tokens'\nimport { toLargeUnits } from 'utils/transformHelper'\nimport { formatNumber } from 'utils/formatTheValue'\nimport AddIcon from '../../components/uikit/components/Svg/Icons/Add'\n\nconst HedgeButton = styled('div')`\n  padding: 2px 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-family: Inter;\n  font-size: 12px;\n  font-weight: 500;\n  line-height: 20px;\n  letter-spacing: 0.02em;\n  border-radius: 20px;\n  background: linear-gradient(90deg, #61c2f7 0%, #7ae9f0 100%);\n  cursor: pointer;\n`\n\nconst PositionTag = styled('div')`\n  font-family: PingFang SC;\n  font-size: 10px;\n  font-weight: 500;\n  line-height: 10px;\n  padding: 4px 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 12px;\n  margin-right: 8px;\n`\n\nconst LongTag = styled(PositionTag)`\n  color: rgba(85, 181, 89, 1);\n  background: rgba(85, 181, 89, 0.1);\n`\n\nconst ShortTag = styled(PositionTag)`\n  color: rgba(237, 112, 107, 1);\n  background: rgba(237, 112, 107, 0.2);\n`\n\nconst TableWrapper = styled('div')`\n  min-width: 946px;\n  .active-icons {\n    transform: rotate(45deg);\n  }\n  .active-table {\n    background-color: white;\n    border-radius: 8px 8px 0 0;\n    border-bottom: unset;\n  }\n  .active-child-table {\n    height: auto;\n  }\n  .icons {\n    margin-right: 17px;\n    line-height: 19.6px;\n    /* transform-origin: center center; */\n    width: 20px;\n    margin-left: 12px;\n    cursor: pointer;\n  }\n  .ticker {\n    text-align: left;\n    width: 159px;\n  }\n  .price {\n    width: 184px;\n  }\n  .balance-wallet {\n    width: 195px;\n  }\n  .balance-collateral {\n    width: 216px;\n  }\n  .debt {\n    width: 196px;\n    margin-left: auto;\n    padding-right: 11px;\n  }\n`\n\nconst TableHeader = styled('div')`\n  display: flex;\n  color: #00000080;\n  padding: 18px 0;\n  border-bottom: 0.5px solid #0000001f;\n  font-size: 14px;\n`\n\nconst TableItem = styled('div')`\n  font-family: PingFang SC;\n  font-weight: 400;\n  line-height: 19.6px;\n  text-align: right;\n  display: flex;\n  align-items: center;\n`\nconst TableBody = styled('div')``\n\nconst TableCell = styled('div')`\n  color: #000000;\n  font-family: PingFang SC;\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 19.6px;\n  padding: 17px 0;\n  border-bottom: 0.5px solid #0000001f;\n  margin-top: 10px;\n  cursor: pointer;\n  display: flex;\n`\n\nconst ChildTable = styled('div')`\n  background: #def1ff;\n  border-radius: 0 0 8px 8px;\n  overflow: hidden;\n  height: 0;\n  padding: 0 30px 0 50px;\n  .debt {\n    padding-right: 20px;\n    display: flex;\n    justify-content: end;\n  }\n`\nconst ChildTabelCell = styled(TableCell)`\n  font-size: 12px;\n  padding: 11px 0 12px;\n  align-items: center;\n  border-bottom: 0.5px solid #0000001f;\n  &:last-of-type {\n    border: unset;\n  }\n`\n\ninterface Props {\n  testData: any[]\n}\nfunction HedingTable(props: Props) {\n  const { testData } = props\n  const [openTableItem, setOpenTableItem] = useState([0])\n  console.log('openTableItem', openTableItem)\n  const tagStatus = useCallback((number: any) => {\n    // console.log(number, 'number')\n\n    if (number === 0) {\n      return ''\n    }\n    return Number(number) > 0 ? <LongTag>Long</LongTag> : <ShortTag>Short</ShortTag>\n  }, [])\n  return (\n    <TableWrapper>\n      <TableHeader>\n        <TableItem\n          className=\"icons\"\n          onClick={() => {\n            if (openTableItem.length === testData.length) {\n              setOpenTableItem([])\n            } else {\n              console.log(Array.from({ length: testData.length }, (_, index) => index))\n              setOpenTableItem(Array.from({ length: testData.length }, (_, index) => index))\n            }\n          }}\n        >\n          <AddIcon\n            style={{\n              transform: openTableItem.length === testData.length ? 'rotate(45deg)' : '',\n            }}\n            color=\"#2AA1FF\"\n          />\n        </TableItem>\n        <TableItem className=\"ticker\">Ticker</TableItem>\n        <TableItem className=\"price\">Mark Price</TableItem>\n        <TableItem className=\"balance-wallet\">Balance in Wallet</TableItem>\n        <TableItem className=\"balance-collateral\">Balance in Collateral</TableItem>\n        <TableItem className=\"debt\">Outstanding Debt</TableItem>\n      </TableHeader>\n\n      {testData &&\n        testData.length > 0 &&\n        testData.map((item, index) => (\n          <TableBody key={item.balanceCollateral}>\n            <TableCell\n              key={item.balanceCollateral}\n              className={`${openTableItem.includes(index) ? 'active-table' : ''}`}\n              onClick={() => {\n                const exists = openTableItem.some((items) => items === index)\n\n                if (exists) {\n                  setOpenTableItem(openTableItem.filter((items) => items !== index))\n                } else {\n                  setOpenTableItem([...openTableItem, index])\n                }\n              }}\n            >\n              <TableItem className={`${openTableItem.includes(index) ? 'active-icons' : ''} icons`}>\n                <AddIcon color=\"#2AA1FF\" />\n              </TableItem>\n              <TableItem className=\"ticker\">\n                <img\n                  src={TokensIcon[item.ticker]}\n                  style={{ display: 'block', marginRight: 7, float: 'left' }}\n                  alt=\"icon\"\n                />\n                {item.ticker}\n              </TableItem>\n              <TableItem className=\"price\">\n                {item.markPrice} {' WBTC'}\n              </TableItem>\n              <TableItem className=\"balance-wallet\">{formatNumber(item.balanceWallet)}</TableItem>\n              <TableItem className=\"balance-collateral\">{formatNumber(item.balanceCollateral)}</TableItem>\n              <TableItem className=\"debt\">{formatNumber(item.outstandingDebt)}</TableItem>\n            </TableCell>\n            <ChildTable className={`${openTableItem.includes(index) ? 'active-child-table' : ''}`}>\n              <TableHeader>\n                <TableItem className=\"ticker\">Delivery Date</TableItem>\n                <TableItem className=\"price\">Fair Price</TableItem>\n                <TableItem className=\"balance-wallet\">Net Position</TableItem>\n                <TableItem className=\"balance-collateral\" />\n                <TableItem className=\"debt\">Action</TableItem>\n              </TableHeader>\n\n              {item.childTableInfo &&\n                item.childTableInfo.length > 0 &&\n                item.childTableInfo.map((childItem) => (\n                  <ChildTabelCell className=\"child-table-cell\" key={childItem.deliveryDate}>\n                    <TableItem className=\"ticker\">{childItem.deliveryDate}</TableItem>\n                    <TableItem className=\"price\">\n                      {formatNumber(childItem.fairPrice)} {' WBTC'}\n                    </TableItem>\n                    <TableItem className=\"balance-wallet\">\n                      {/* {childItem.netPosition} */}\n                      {tagStatus(childItem.netPosition)}{' '}\n                      {formatNumber(toLargeUnits(childItem.netPosition.toString(), 18).toString().replace(/^[-+]/, ''))}\n                    </TableItem>\n                    <TableItem className=\"balance-collateral\" />\n                    <TableItem\n                      className=\"debt\"\n                      style={{\n                        paddingRight: '7px',\n                      }}\n                    >\n                      <HedgeButton\n                        onClick={() => {\n                          window.open(`${childItem.actionUrl}`)\n                        }}\n                      >\n                        Hedge\n                      </HedgeButton>\n                    </TableItem>\n                  </ChildTabelCell>\n                ))}\n            </ChildTable>\n          </TableBody>\n        ))}\n    </TableWrapper>\n  )\n}\nexport default HedingTable\n","import React, { useCallback, useEffect, useMemo, useState } from 'react'\nimport { styled } from '@mui/material/styles'\nimport Card from 'components/Card'\nimport useSystemParams from 'hooks/useSystemParams'\nimport { useWeb3React } from 'web3-react-core'\nimport useToast from 'hooks/useToast'\nimport { useGetTokenBalance } from 'hooks/useManager'\nimport { toSmallUnits } from 'utils/transformHelper'\nimport tokens from 'config/constants/tokens'\nimport { Title } from 'components/CommonComponent'\nimport { formatWBTC } from 'utils/formatTheValue'\nimport moment from 'moment'\nimport { hedgingVersion } from 'config/constants/contants'\nimport useHashPowerToken from '../../hooks/useHashPowerToken'\nimport HedgingTable from './HedgingTable'\n\nconst HedgingBox = styled('div')`\n  width: 100%;\n  height: 100%;\n  padding-right: 100px;\n  overflow: auto;\n`\n\nfunction useHedging({ tokenIndex }: { tokenIndex: number }) {\n  const { toastError } = useToast()\n  const { active, library, chainId, account } = useWeb3React()\n\n  const { hashPowerTokenList, walletTokenBalance } = useHashPowerToken()\n  const { position, ticker } = hashPowerTokenList[tokenIndex] || { position: '', ticker: '' }\n  // const [markPrice, setMarkPrice] = useState(0)\n  const { instrumentContract, instrumentContract2, observerContract } = useSystemParams()\n  const instrument = tokenIndex === 0 ? instrumentContract : instrumentContract2\n\n  const {getTokenBalance} = useGetTokenBalance(library, active, chainId)\n  const [avatarAssetList, setAvatarAssetList] = useState<any>()\n\n  const getPositonBalance = useCallback(async () => {\n    const assetList = await getTokenBalance(position)\n    if (assetList) {\n      setAvatarAssetList(assetList)\n    }\n  }, [getTokenBalance, position])\n\n  useEffect(() => {\n    if (position && account) {\n      getPositonBalance()\n    }\n  }, [account, getPositonBalance, position])\n  // useEffect(() => {\n  //   queryMarkPrice()\n  // }, [queryMarkPrice])\n\n  const outstandingDebts = useMemo(() => {\n    return hashPowerTokenList && hashPowerTokenList[tokenIndex] && hashPowerTokenList[tokenIndex].balance\n      ? Number(toSmallUnits(`${hashPowerTokenList[tokenIndex].balance}`, 0)) /\n          Number(toSmallUnits('1', hashPowerTokenList[tokenIndex].decimals))\n      : 0\n  }, [hashPowerTokenList, tokenIndex])\n\n  // const [hedgingData, setHedginData] = useState()\n  const [tableInfo, setTablInfo] = useState([])\n\n  const markPriceVal = useMemo(() => {\n    if (hashPowerTokenList && hashPowerTokenList.length && hashPowerTokenList[tokenIndex].position) {\n      return Number(hashPowerTokenList[tokenIndex].position)\n        ? formatWBTC(hashPowerTokenList[tokenIndex].tokensValues[hashPowerTokenList[tokenIndex].token])\n        : 0\n    }\n    return 0\n  }, [hashPowerTokenList, tokenIndex])\n\n  const hedgingData = useMemo(() => {\n    return [\n      {\n        ticker,\n        markPrice: markPriceVal,\n        balanceWallet: walletTokenBalance[ticker],\n        balanceCollateral: avatarAssetList && avatarAssetList[ticker],\n        outstandingDebt: outstandingDebts,\n        addIcon: false,\n        childTableInfo: tableInfo,\n      },\n    ]\n  }, [avatarAssetList, markPriceVal, outstandingDebts, tableInfo, ticker, walletTokenBalance])\n\n  const getPositionVal = useCallback(\n    async (deliveryDate: string) => {\n      let result = 0\n      try {\n        const res = await observerContract.getPosition(\n          tokenIndex === 0\n            ? '0x68e6958bcb7f2e1e87a872dde341f8cbe7d52bc6'\n            : '0x0C10527c06828024CA2c1A993DdB3E922DFb8dE2',\n          deliveryDate,\n          account,\n        )\n        if (res && res.size) {\n          result = res.size\n        }\n      } catch (error) {\n        if (error) {\n          toastError('Failed', (error as Error).message)\n        }\n      }\n      return result\n    },\n    [account, observerContract, toastError, tokenIndex],\n  )\n\n  const getFairPrice = useCallback(\n    async (deliveryDate: string) => {\n      let result = 0\n      try {\n        const res = await instrument.inquire(deliveryDate, 0)\n        if (res && res.sqrtFairPX96) {\n          // TODO\n          result = Number(res.sqrtFairPX96 / 2 ** 96) ** 2\n        }\n      } catch (error) {\n        if (error) {\n          toastError('Failed', (error as Error).message)\n          return 0\n        }\n      }\n      return result\n    },\n    [instrument, toastError],\n  )\n\n  const getExpiries = useCallback(async () => {\n    if (position && active && instrument && observerContract) {\n      try {\n        const txInfo = await instrument.getExpiries()\n        if (txInfo) {\n          const childTable = []\n\n          for (let i = 0; i < txInfo.length; i++) {\n            const _deliveryDate = txInfo[i]\n            const _positionVal = await getPositionVal(_deliveryDate)\n            const _fairPrice = await getFairPrice(_deliveryDate)\n            childTable.push({\n              deliveryDate: moment(_deliveryDate * 1000).format('YYYY-MM-DD'),\n              fairPrice: _fairPrice.toFixed(tokens.WBTC.decimals),\n              netPosition: Number(_positionVal),\n              // short: Number(_positionVal) > 0 ? Number(toLargeUnits(_positionVal, 18)) : 0,\n              // shortPosition: Number(_positionVal) < 0 ? Number(toLargeUnits(_positionVal, 18)) : 0,\n              // F(BTC,20)-WBTC\n              actionUrl: `https://testnet.synfutures.com/#/trade/blastsepolia/F(BTC,25)-WBTC-${hedgingVersion}-${moment(\n                _deliveryDate * 1000,\n              ).format('MMDD')}`,\n            })\n          }\n          setTablInfo(childTable)\n        }\n      } catch (error) {\n        if (error) {\n          toastError('Failed', (error as Error).message)\n        }\n      }\n    }\n  }, [active, getFairPrice, getPositionVal, instrument, observerContract, position, toastError])\n\n  useEffect(() => {\n    getExpiries()\n  }, [getExpiries])\n\n  return hedgingData[0]\n}\n\nfunction HedgingPage() {\n  const hedging0 = useHedging({ tokenIndex: 0 })\n  const hedging1 = useHedging({ tokenIndex: 1 })\n\n  return (\n    <HedgingBox>\n      <Title>Hedging</Title>\n      <Card\n        style={{\n          paddingTop: '15px',\n          paddingLeft: '20px',\n          paddingRight: '20px',\n          overflow: 'auto',\n          height: 'calc(100% - 200px)',\n        }}\n      >\n        <HedgingTable testData={[hedging0, hedging1]} />\n      </Card>\n    </HedgingBox>\n  )\n}\n\nexport default HedgingPage\n","import { useContext } from 'react'\nimport {HashPowerTokenContext} from \"contexts\";\n\nconst useHashPowerToken = () => {\n  const hashPowerToken = useContext(HashPowerTokenContext)\n\n  if (hashPowerToken === undefined) {\n    throw new Error('hashPowerToken context undefined')\n  }\n\n  return hashPowerToken\n}\n\nexport default useHashPowerToken\n"],"sourceRoot":""}