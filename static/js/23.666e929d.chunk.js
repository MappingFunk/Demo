(this["webpackJsonpmappingfunk-interface"]=this["webpackJsonpmappingfunk-interface"]||[]).push([[23],{1063:function(e,n,t){"use strict";t.r(n);var c,a,i,r,o,l,s,b,d,j,u,f=t(7),m=t(1),g=t(17),h=t(96),p=t(142),x=t(26),O=t(27),k=t(122),y=t(162),N=t.n(y),w=t(94),v=t(141),T=t(440),C=t(14),I=t(255),F=t(58),P=t(508),D=t(239),B=t(0);const S=Object(g.a)("div")(c||(c=Object(f.a)(["\n  padding: 2px 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-family: Inter;\n  font-size: 12px;\n  font-weight: 500;\n  line-height: 20px;\n  letter-spacing: 0.02em;\n  border-radius: 20px;\n  background: linear-gradient(90deg, #61c2f7 0%, #7ae9f0 100%);\n  cursor: pointer;\n"]))),A=Object(g.a)("div")(a||(a=Object(f.a)(["\n  font-family: PingFang SC;\n  font-size: 10px;\n  font-weight: 500;\n  line-height: 10px;\n  padding: 4px 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 12px;\n  margin-right: 8px;\n"]))),E=Object(g.a)(A)(i||(i=Object(f.a)(["\n  color: rgba(85, 181, 89, 1);\n  background: rgba(85, 181, 89, 0.1);\n"]))),W=Object(g.a)(A)(r||(r=Object(f.a)(["\n  color: rgba(237, 112, 107, 1);\n  background: rgba(237, 112, 107, 0.2);\n"]))),z=Object(g.a)("div")(o||(o=Object(f.a)(["\n  min-width: 946px;\n  .active-icons {\n    transform: rotate(45deg);\n  }\n  .active-table {\n    background-color: white;\n    border-radius: 8px 8px 0 0;\n    border-bottom: unset;\n  }\n  .active-child-table {\n    height: auto;\n  }\n  .icons {\n    margin-right: 17px;\n    line-height: 19.6px;\n    /* transform-origin: center center; */\n    width: 20px;\n    margin-left: 12px;\n    cursor: pointer;\n  }\n  .ticker {\n    text-align: left;\n    width: 159px;\n  }\n  .price {\n    width: 184px;\n  }\n  .balance-wallet {\n    width: 195px;\n  }\n  .balance-collateral {\n    width: 216px;\n  }\n  .debt {\n    width: 196px;\n    margin-left: auto;\n    padding-right: 11px;\n  }\n"]))),M=Object(g.a)("div")(l||(l=Object(f.a)(["\n  display: flex;\n  color: #00000080;\n  padding: 18px 0;\n  border-bottom: 0.5px solid #0000001f;\n  font-size: 14px;\n"]))),Y=Object(g.a)("div")(s||(s=Object(f.a)(["\n  font-family: PingFang SC;\n  font-weight: 400;\n  line-height: 19.6px;\n  text-align: right;\n  display: flex;\n  align-items: center;\n"]))),q=Object(g.a)("div")(b||(b=Object(f.a)([""]))),L=Object(g.a)("div")(d||(d=Object(f.a)(["\n  color: #000000;\n  font-family: PingFang SC;\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 19.6px;\n  padding: 17px 0;\n  border-bottom: 0.5px solid #0000001f;\n  margin-top: 10px;\n  cursor: pointer;\n  display: flex;\n"]))),R=Object(g.a)("div")(j||(j=Object(f.a)(["\n  background: #def1ff;\n  border-radius: 0 0 8px 8px;\n  overflow: hidden;\n  height: 0;\n  padding: 0 30px 0 50px;\n  .debt {\n    padding-right: 20px;\n    display: flex;\n    justify-content: end;\n  }\n"]))),H=Object(g.a)(L)(u||(u=Object(f.a)(["\n  font-size: 12px;\n  padding: 11px 0 12px;\n  align-items: center;\n  border-bottom: 0.5px solid #0000001f;\n  &:last-of-type {\n    border: unset;\n  }\n"])));var J,U=function(e){const{testData:n}=e,[t,c]=Object(m.useState)([0]);return Object(B.jsxs)(z,{children:[Object(B.jsxs)(M,{children:[Object(B.jsx)(Y,{className:"icons",onClick:()=>{t.length===n.length?c([]):(console.log(Array.from({length:n.length},((e,n)=>n))),c(Array.from({length:n.length},((e,n)=>n))))},children:Object(B.jsx)(D.a,{style:{transform:t.length===n.length?"rotate(45deg)":""},color:"#2AA1FF"})}),Object(B.jsx)(Y,{className:"ticker",children:"Ticker"}),Object(B.jsx)(Y,{className:"price",children:"Mark Price"}),Object(B.jsx)(Y,{className:"balance-wallet",children:"Balance in Wallet"}),Object(B.jsx)(Y,{className:"balance-collateral",children:"Balance in Collateral"}),Object(B.jsx)(Y,{className:"debt",children:"Outstanding Debt"})]}),n&&n.length>0&&n.map(((e,n)=>Object(B.jsxs)(q,{children:[Object(B.jsxs)(L,{className:"".concat(t.includes(n)?"active-table":""),onClick:()=>{const e=t.some((e=>e===n));c(e?t.filter((e=>e!==n)):[...t,n])},children:[Object(B.jsx)(Y,{className:"".concat(t.includes(n)?"active-icons":""," icons"),children:Object(B.jsx)(D.a,{color:"#2AA1FF"})}),Object(B.jsxs)(Y,{className:"ticker",children:[Object(B.jsx)("img",{src:F.a[e.ticker],style:{display:"block",marginRight:7,float:"left"},alt:"icon"}),e.ticker]}),Object(B.jsxs)(Y,{className:"price",children:[e.markPrice," "," WBTC"]}),Object(B.jsx)(Y,{className:"balance-wallet",children:Object(P.a)(e.walletBalance)}),Object(B.jsx)(Y,{className:"balance-collateral",children:Object(P.a)(e.avatarBalance)}),Object(B.jsx)(Y,{className:"debt",children:Object(P.a)(e.outstandingDebt)})]},e.balanceCollateral),Object(B.jsxs)(R,{className:"".concat(t.includes(n)?"active-child-table":""),children:[Object(B.jsxs)(M,{children:[Object(B.jsx)(Y,{className:"ticker",children:"Delivery Date"}),Object(B.jsx)(Y,{className:"price",children:"Fair Price"}),Object(B.jsx)(Y,{className:"balance-wallet",children:"Net Position"}),Object(B.jsx)(Y,{className:"balance-collateral"}),Object(B.jsx)(Y,{className:"debt",children:"Action"})]}),e.childTableInfo&&e.childTableInfo.length>0&&e.childTableInfo.map((e=>{return Object(B.jsxs)(H,{className:"child-table-cell",children:[Object(B.jsx)(Y,{className:"ticker",children:e.deliveryDate}),Object(B.jsxs)(Y,{className:"price",children:[Object(P.a)(e.fairPrice)," "," WBTC"]}),Object(B.jsxs)(Y,{className:"balance-wallet",children:[(n=e.netPosition,0===n?"":Number(n)>0?Object(B.jsx)(E,{children:"Long"}):Object(B.jsx)(W,{children:"Short"}))," ",Object(P.a)(Object(O.b)(e.netPosition.toString(),18).toString().replace(/^[-+]/,""))]}),Object(B.jsx)(Y,{className:"balance-collateral"}),Object(B.jsx)(Y,{className:"debt",style:{paddingRight:"7px"},children:Object(B.jsx)(S,{onClick:()=>{window.open("".concat(e.actionUrl))},children:"Hedge"})})]},e.deliveryDate);var n}))]})]},e.balanceCollateral)))]})},X=t(29),K=t(16);const V=Object(g.a)("div")(J||(J=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n  padding-right: 100px;\n  overflow: auto;\n"])));n.default=function(){const{hedgingInfo:e}=function(){const{active:e,library:n,chainId:t,account:c}=Object(x.b)(),{walletTokenBalance:a}=Object(T.a)(),{observerContract:i,signer:r}=Object(p.a)(),{positionAll:o,tokenPrice:l,allowedTokens:s}=Object(v.c)(),[b,d]=Object(m.useState)({}),j=Object(m.useCallback)((async(e,n)=>{let t=0;try{const a=await i.getPosition(e,n,c);a&&a.size&&(t=a.size)}catch(a){console.error("getPositionVal error",a)}return t}),[c,i]),u=Object(m.useCallback)((async(e,n)=>{let t=0;try{const c=await e.inquire(n,0);c&&c.sqrtFairPX96&&(t=Number(c.sqrtFairPX96/2**96)**2)}catch(c){console.error("getFairPrice error",c)}return t}),[]),f=Object(m.useCallback)((async(e,n)=>{try{const t=await n.getExpiries();if(t){const c=[];for(let a=0;a<t.length;a++){const i=t[a],r=await j(e.mintTokenInfo.instrument,i),o=await u(n,i);c.push({deliveryDate:N()(1e3*i).format("YYYY-MM-DD"),fairPrice:o.toFixed(e.mintTokenInfo.settlementCurrency.decimals),netPosition:Number(r),actionUrl:"https://testnet.synfutures.com/#/trade/blastsepolia/F(BTC,25)-WBTC-".concat(w.f,"-").concat(N()(1e3*i).format("MMDD"))})}return c}return[]}catch(t){throw console.error("getExpiries error",t),t}}),[u,j]),g=Object(m.useCallback)((async()=>{if(t&&Object(K.f)(t))for(const t of Object.values(o)){const c=new C.ethers.Contract(t.mintTokenInfo.instrument,I,r);let i=0;const{settlementCurrency:o}=t.mintTokenInfo;let b=Object.keys(X.h).reduce(((e,n)=>({...e,[n]:0})),{});var e;if(t.isEnable&&l[t.positionAddress]&&(i=Object(O.b)(null===(e=l[t.positionAddress][t.mintTokenInfo.symbol])||void 0===e?void 0:e.price,o.decimals,!0)),t.isEnable&&s[t.positionAddress]){const{balances:e,tokens:n}=s[t.positionAddress];e&&n&&(b=Object.keys(e).reduce(((t,c)=>({...t,[c]:Object(O.b)(e[c],n[c].decimals,!0)})),{...b}))}const j={ticker:t.mintTokenInfo.symbol,logo:t.mintTokenInfo.logo,markPrice:i,displayMarkPrice:"".concat(i," ").concat(o.symbol),walletBalance:Number(O.a.formatFourDecimals(a[t.mintTokenInfo.symbol])),avatarBalance:Number(b[t.mintTokenInfo.symbol]),mintTokenInfo:t.mintTokenInfo,isEnable:t.isEnable,positionAddress:t.positionAddress,outstandingDebt:Number(O.a.formatFourDecimals(Object(O.b)(t.balance,t.mintTokenInfo.decimals,!0))),childTableInfo:[]};console.log("tokenInfoData",j);try{const e=await f(t,c);console.log("childTableInfo",e),j.childTableInfo=e,d((e=>({...e,[t.mintTokenInfo.symbol]:j})))}catch(n){console.error("getExpiries error",n),d(j)}}}),[s,t,f,o,r,l,a]);return Object(m.useEffect)((()=>{g()}),[g]),{hedgingInfo:b}}();return Object(B.jsxs)(V,{children:[Object(B.jsx)(k.l,{children:"Hedging"}),Object(B.jsx)(h.a,{style:{paddingTop:"15px",paddingLeft:"20px",paddingRight:"20px",overflow:"auto",height:"calc(100% - 200px)"},children:Object(B.jsx)(U,{testData:Object.values(e)})})]})}},440:function(e,n,t){"use strict";var c=t(1),a=t(146);n.a=()=>{const e=Object(c.useContext)(a.a);if(void 0===e)throw new Error("hashPowerToken context undefined");return e}},508:function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return s})),t.d(n,"a",(function(){return b}));var c=t(12),a=t(58),i=(t(71),t(27));function r(e){if(e>=1e6)return"".concat((e/1e6).toFixed(1),"M");if(e>=1e4)return"".concat((e/1e3).toFixed(1),"K");const n=e.toFixed(2);return 0===n||"0"===n?"0.00":n}function o(e){if(Number.isNaN(Number(e)))return e;if(e.toString().includes("+"))return Number(e).toLocaleString().replace(/,/g,"");if(String(e).includes("-")){const n=String(e),t=/^([0-9]).?([0-9]*)e-([0-9]*)/;if(!t.test(n))return e;const c=n.match(t),a=Number("".concat(c[1]).concat(c[2]||""));return"0.".concat(String(10**(Number(c[3])-1)).substr(1)).concat(a).replace(/0*$/,"")}return String(e).includes(".")?i.a.formatFourDecimals(Number(e)):String(e)}function l(e,n){const t=String(o(e));return n&&"WBTC"===n&&Number(t)&&t.includes(".")?o(Number(t.slice(0,t.indexOf(".")+9))):n&&"F(BTC,20)"===n&&Number(t)&&t.includes(".")?o(Number(t.slice(0,t.indexOf(".")+7))):"number"===typeof n?o(Number(t.slice(0,t.indexOf(".")+(n+1)))):("WBTC"!==n||"F(BTC,20)"!==n)&&t.includes(".")?o(Number(t.slice(0,t.indexOf(".")+3))):e}function s(e){return e?l(o(e/Number(c.a.from(10).pow(a.b.WBTC.decimals))),"WBTC"):0}function b(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(void 0===e)return"0";const t="number"===typeof e?e:Number(e),c=String(t);return c.includes(".")?i.a.formatTokenAmount(e,n):c}}}]);
//# sourceMappingURL=23.666e929d.chunk.js.map