(this["webpackJsonpmappingfunk-interface"]=this["webpackJsonpmappingfunk-interface"]||[]).push([[25],{1064:function(e,n,t){"use strict";t.r(n);var a,c,i,r,l,o,s,b,d,j,h,p=t(7),g=t(1),f=t(18),x=t(96),m=t(110),O=t(28),u=t(15),k=t(125),y=t(164),w=t.n(y),v=t(94),N=t(144),T=t(442),I=t(14),C=t(258),P=t(26),D=t(240),F=t(243),A=t(0);const B=Object(f.a)("div")(a||(a=Object(p.a)(["\n  padding: 2px 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-family: Inter;\n  font-size: 12px;\n  font-weight: 500;\n  line-height: 20px;\n  letter-spacing: 0.02em;\n  border-radius: 20px;\n  background: linear-gradient(90deg, #61c2f7 0%, #7ae9f0 100%);\n  cursor: pointer;\n"]))),E=Object(f.a)("div")(c||(c=Object(p.a)(["\n  font-family: PingFang SC;\n  font-size: 10px;\n  font-weight: 500;\n  line-height: 10px;\n  padding: 4px 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 12px;\n  margin-right: 8px;\n"]))),S=Object(f.a)(E)(i||(i=Object(p.a)(["\n  color: rgba(85, 181, 89, 1);\n  background: rgba(85, 181, 89, 0.1);\n"]))),z=Object(f.a)(E)(r||(r=Object(p.a)(["\n  color: rgba(237, 112, 107, 1);\n  background: rgba(237, 112, 107, 0.2);\n"]))),M=Object(f.a)("div")(l||(l=Object(p.a)(["\n  min-width: 946px;\n  .active-icons {\n    transform: rotate(45deg);\n  }\n  .active-table {\n    background-color: white;\n    border-radius: 8px 8px 0 0;\n    border-bottom: unset;\n  }\n  .active-child-table {\n    height: auto;\n  }\n  .icons {\n    margin-right: 17px;\n    line-height: 19.6px;\n    /* transform-origin: center center; */\n    width: 20px;\n    margin-left: 12px;\n    cursor: pointer;\n  }\n  .ticker {\n    text-align: left;\n    width: 159px;\n  }\n  .price {\n    width: 184px;\n  }\n  .balance-wallet {\n    width: 195px;\n  }\n  .balance-collateral {\n    width: 216px;\n  }\n  .debt {\n    width: 196px;\n    margin-left: auto;\n    padding-right: 11px;\n  }\n"]))),W=Object(f.a)("div")(o||(o=Object(p.a)(["\n  display: flex;\n  color: #00000080;\n  padding: 18px 0;\n  border-bottom: 0.5px solid #0000001f;\n  font-size: 14px;\n"]))),Y=Object(f.a)("div")(s||(s=Object(p.a)(["\n  font-family: PingFang SC;\n  font-weight: 400;\n  line-height: 19.6px;\n  text-align: right;\n  display: flex;\n  align-items: center;\n"]))),q=Object(f.a)("div")(b||(b=Object(p.a)([""]))),R=Object(f.a)("div")(d||(d=Object(p.a)(["\n  color: #000000;\n  font-family: PingFang SC;\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 19.6px;\n  padding: 17px 0;\n  border-bottom: 0.5px solid #0000001f;\n  margin-top: 10px;\n  cursor: pointer;\n  display: flex;\n"]))),H=Object(f.a)("div")(j||(j=Object(p.a)(["\n  background: #def1ff;\n  border-radius: 0 0 8px 8px;\n  overflow: hidden;\n  height: 0;\n  padding: 0 30px 0 50px;\n  .debt {\n    padding-right: 20px;\n    display: flex;\n    justify-content: end;\n  }\n"]))),J=Object(f.a)(R)(h||(h=Object(p.a)(["\n  font-size: 12px;\n  padding: 11px 0 12px;\n  align-items: center;\n  border-bottom: 0.5px solid #0000001f;\n  &:last-of-type {\n    border: unset;\n  }\n"])));var L,U=function(e){const{testData:n}=e,[t,a]=Object(g.useState)([0]);return Object(A.jsxs)(M,{children:[Object(A.jsxs)(W,{children:[Object(A.jsx)(Y,{className:"icons",onClick:()=>{t.length===n.length?a([]):(console.log(Array.from({length:n.length},((e,n)=>n))),a(Array.from({length:n.length},((e,n)=>n))))},children:Object(A.jsx)(F.a,{style:{transform:t.length===n.length?"rotate(45deg)":""},color:"#2AA1FF"})}),Object(A.jsx)(Y,{className:"ticker",children:"Ticker"}),Object(A.jsx)(Y,{className:"price",children:"Mark Price"}),Object(A.jsx)(Y,{className:"balance-wallet",children:"Balance in Wallet"}),Object(A.jsx)(Y,{className:"balance-collateral",children:"Balance in Collateral"}),Object(A.jsx)(Y,{className:"debt",children:"Outstanding Debt"})]}),n&&n.length>0&&n.map(((e,n)=>Object(A.jsxs)(q,{children:[Object(A.jsxs)(R,{className:"".concat(t.includes(n)?"active-table":""),onClick:()=>{const e=t.some((e=>e===n));a(e?t.filter((e=>e!==n)):[...t,n])},children:[Object(A.jsx)(Y,{className:"".concat(t.includes(n)?"active-icons":""," icons"),children:Object(A.jsx)(F.a,{color:"#2AA1FF"})}),Object(A.jsxs)(Y,{className:"ticker",children:[Object(A.jsx)("img",{src:P.a[e.ticker],style:{display:"block",marginRight:7,float:"left"},alt:"icon"}),e.ticker]}),Object(A.jsxs)(Y,{className:"price",children:[e.markPrice," "," WBTC"]}),Object(A.jsx)(Y,{className:"balance-wallet",children:Object(D.a)(e.walletBalance)}),Object(A.jsx)(Y,{className:"balance-collateral",children:Object(D.a)(e.avatarBalance)}),Object(A.jsx)(Y,{className:"debt",children:Object(D.a)(e.outstandingDebt)})]},e.balanceCollateral),Object(A.jsxs)(H,{className:"".concat(t.includes(n)?"active-child-table":""),children:[Object(A.jsxs)(W,{children:[Object(A.jsx)(Y,{className:"ticker",children:"Delivery Date"}),Object(A.jsx)(Y,{className:"price",children:"Fair Price"}),Object(A.jsx)(Y,{className:"balance-wallet",children:"Net Position"}),Object(A.jsx)(Y,{className:"balance-collateral"}),Object(A.jsx)(Y,{className:"debt",children:"Action"})]}),e.childTableInfo&&e.childTableInfo.length>0&&e.childTableInfo.map((e=>{return Object(A.jsxs)(J,{className:"child-table-cell",children:[Object(A.jsx)(Y,{className:"ticker",children:e.deliveryDate}),Object(A.jsxs)(Y,{className:"price",children:[Object(D.a)(e.fairPrice)," "," WBTC"]}),Object(A.jsxs)(Y,{className:"balance-wallet",children:[(n=e.netPosition,0===n?"":Number(n)>0?Object(A.jsx)(S,{children:"Long"}):Object(A.jsx)(z,{children:"Short"}))," ",Object(D.a)(Object(u.b)(e.netPosition.toString(),18).toString().replace(/^[-+]/,""))]}),Object(A.jsx)(Y,{className:"balance-collateral"}),Object(A.jsx)(Y,{className:"debt",style:{paddingRight:"7px"},children:Object(A.jsx)(B,{onClick:()=>{window.open("".concat(e.actionUrl))},children:"Hedge"})})]},e.deliveryDate);var n}))]})]},e.balanceCollateral)))]})},X=t(30),V=t(16);const G=Object(f.a)("div")(L||(L=Object(p.a)(["\n  width: 100%;\n  height: 100%;\n  padding-right: 100px;\n  overflow: auto;\n"])));n.default=function(){const{hedgingInfo:e}=function(){const{active:e,library:n,chainId:t,account:a}=Object(O.b)(),{walletTokenBalance:c}=Object(T.a)(),{observerContract:i,signer:r}=Object(m.a)(),{positionAll:l,tokenPrice:o,allowedTokens:s}=Object(N.c)(),[b,d]=Object(g.useState)({}),j=Object(g.useCallback)((async(e,n)=>{let t=0;try{const c=await i.getPosition(e,n,a);c&&c.size&&(t=c.size)}catch(c){console.error("getPositionVal error",c)}return t}),[a,i]),h=Object(g.useCallback)((async(e,n)=>{let t=0;try{const a=await e.inquire(n,0);a&&a.sqrtFairPX96&&(t=Number(a.sqrtFairPX96/2**96)**2)}catch(a){console.error("getFairPrice error",a)}return t}),[]),p=Object(g.useCallback)((async(e,n)=>{try{const t=await n.getExpiries();if(t){const a=[];for(let c=0;c<t.length;c++){const i=t[c],r=await j(e.mintTokenInfo.instrument,i),l=await h(n,i);a.push({deliveryDate:w()(1e3*i).format("YYYY-MM-DD"),fairPrice:l.toFixed(e.mintTokenInfo.settlementCurrency.decimals),netPosition:Number(r),actionUrl:"https://testnet.synfutures.com/#/trade/blastsepolia/F(BTC,25)-WBTC-".concat(v.f,"-").concat(w()(1e3*i).format("MMDD"))})}return a}return[]}catch(t){throw console.error("getExpiries error",t),t}}),[h,j]),f=Object(g.useCallback)((async()=>{if(t&&Object(V.f)(t))for(const t of Object.values(l)){const a=new I.ethers.Contract(t.mintTokenInfo.instrument,C,r);let i=0;const{settlementCurrency:l}=t.mintTokenInfo;let b=Object.keys(X.h).reduce(((e,n)=>({...e,[n]:0})),{});var e;if(t.isEnable&&o[t.positionAddress]&&(i=Object(u.b)(null===(e=o[t.positionAddress][t.mintTokenInfo.symbol])||void 0===e?void 0:e.price,l.decimals,!0)),t.isEnable&&s[t.positionAddress]){const{balances:e,tokens:n}=s[t.positionAddress];e&&n&&(b=Object.keys(e).reduce(((t,a)=>({...t,[a]:Object(u.b)(e[a],n[a].decimals,!0)})),{...b}))}const j={ticker:t.mintTokenInfo.symbol,logo:t.mintTokenInfo.logo,markPrice:i,displayMarkPrice:"".concat(i," ").concat(l.symbol),walletBalance:Number(u.a.formatFourDecimals(c[t.mintTokenInfo.symbol])),avatarBalance:Number(b[t.mintTokenInfo.symbol]),mintTokenInfo:t.mintTokenInfo,isEnable:t.isEnable,positionAddress:t.positionAddress,outstandingDebt:Number(u.a.formatFourDecimals(Object(u.b)(t.balance,t.mintTokenInfo.decimals,!0))),childTableInfo:[]};console.log("tokenInfoData",j);try{const e=await p(t,a);console.log("childTableInfo",e),j.childTableInfo=e,d((e=>({...e,[t.mintTokenInfo.symbol]:j})))}catch(n){console.error("getExpiries error",n),d(j)}}}),[s,t,p,l,r,o,c]);return Object(g.useEffect)((()=>{f()}),[f]),{hedgingInfo:b}}();return Object(A.jsxs)(G,{children:[Object(A.jsx)(k.l,{children:"Hedging"}),Object(A.jsx)(x.a,{style:{paddingTop:"15px",paddingLeft:"20px",paddingRight:"20px",overflow:"auto",height:"calc(100% - 200px)"},children:Object(A.jsx)(U,{testData:Object.values(e)})})]})}},442:function(e,n,t){"use strict";var a=t(1),c=t(147);n.a=()=>{const e=Object(a.useContext)(c.a);if(void 0===e)throw new Error("hashPowerToken context undefined");return e}}}]);
//# sourceMappingURL=25.ecb89e41.chunk.js.map