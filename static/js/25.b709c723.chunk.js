(this["webpackJsonpmappingfunk-interface"]=this["webpackJsonpmappingfunk-interface"]||[]).push([[25],{1066:function(e,t,n){"use strict";n.r(t);var a,c,i,l,s,r,o,b,d,j,h,x=n(7),p=n(1),g=n(18),O=n(96),f=n(110),m=n(28),u=n(94),k=n(150),w=n(16),y=n(25),N=n(125),v=n(226),C=n(164),P=n.n(C),D=n(95),F=n(442),T=n(244),B=n(0);const I=Object(g.a)("div")(a||(a=Object(x.a)(["\n  padding: 2px 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-family: Inter;\n  font-size: 12px;\n  font-weight: 500;\n  line-height: 20px;\n  letter-spacing: 0.02em;\n  border-radius: 20px;\n  background: linear-gradient(90deg, #61c2f7 0%, #7ae9f0 100%);\n  cursor: pointer;\n"]))),A=Object(g.a)("div")(c||(c=Object(x.a)(["\n  font-family: PingFang SC;\n  font-size: 10px;\n  font-weight: 500;\n  line-height: 10px;\n  padding: 4px 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 12px;\n  margin-right: 8px;\n"]))),S=Object(g.a)(A)(i||(i=Object(x.a)(["\n  color: rgba(85, 181, 89, 1);\n  background: rgba(85, 181, 89, 0.1);\n"]))),M=Object(g.a)(A)(l||(l=Object(x.a)(["\n  color: rgba(237, 112, 107, 1);\n  background: rgba(237, 112, 107, 0.2);\n"]))),z=Object(g.a)("div")(s||(s=Object(x.a)(["\n  min-width: 946px;\n  .active-icons {\n    transform: rotate(45deg);\n  }\n  .active-table {\n    background-color: white;\n    border-radius: 8px 8px 0 0;\n    border-bottom: unset;\n  }\n  .active-child-table {\n    height: auto;\n  }\n  .icons {\n    margin-right: 17px;\n    line-height: 19.6px;\n    /* transform-origin: center center; */\n    width: 20px;\n    margin-left: 12px;\n    cursor: pointer;\n  }\n  .ticker {\n    text-align: left;\n    width: 159px;\n  }\n  .price {\n    width: 184px;\n  }\n  .balance-wallet {\n    width: 195px;\n  }\n  .balance-collateral {\n    width: 216px;\n  }\n  .debt {\n    width: 196px;\n    margin-left: auto;\n    padding-right: 11px;\n  }\n"]))),E=Object(g.a)("div")(r||(r=Object(x.a)(["\n  display: flex;\n  color: #00000080;\n  padding: 18px 0;\n  border-bottom: 0.5px solid #0000001f;\n  font-size: 14px;\n"]))),W=Object(g.a)("div")(o||(o=Object(x.a)(["\n  font-family: PingFang SC;\n  font-weight: 400;\n  line-height: 19.6px;\n  text-align: right;\n  display: flex;\n  align-items: center;\n"]))),Y=Object(g.a)("div")(b||(b=Object(x.a)([""]))),q=Object(g.a)("div")(d||(d=Object(x.a)(["\n  color: #000000;\n  font-family: PingFang SC;\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 19.6px;\n  padding: 17px 0;\n  border-bottom: 0.5px solid #0000001f;\n  margin-top: 10px;\n  cursor: pointer;\n  display: flex;\n"]))),L=Object(g.a)("div")(j||(j=Object(x.a)(["\n  background: #def1ff;\n  border-radius: 0 0 8px 8px;\n  overflow: hidden;\n  height: 0;\n  padding: 0 30px 0 50px;\n  .debt {\n    padding-right: 20px;\n    display: flex;\n    justify-content: end;\n  }\n"]))),R=Object(g.a)(q)(h||(h=Object(x.a)(["\n  font-size: 12px;\n  padding: 11px 0 12px;\n  align-items: center;\n  border-bottom: 0.5px solid #0000001f;\n  &:last-of-type {\n    border: unset;\n  }\n"])));var H,J=function(e){const{testData:t}=e,[n,a]=Object(p.useState)([0]),c=Object(p.useCallback)((e=>0===e?"":Number(e)>0?Object(B.jsx)(S,{children:"Long"}):Object(B.jsx)(M,{children:"Short"})),[]);return Object(B.jsxs)(z,{children:[Object(B.jsxs)(E,{children:[Object(B.jsx)(W,{className:"icons",onClick:()=>{n.length===t.length?a([]):(console.log(Array.from({length:t.length},((e,t)=>t))),a(Array.from({length:t.length},((e,t)=>t))))},children:Object(B.jsx)(T.a,{style:{transform:n.length===t.length?"rotate(45deg)":""},color:"#2AA1FF"})}),Object(B.jsx)(W,{className:"ticker",children:"Ticker"}),Object(B.jsx)(W,{className:"price",children:"Mark Price"}),Object(B.jsx)(W,{className:"balance-wallet",children:"Balance in Wallet"}),Object(B.jsx)(W,{className:"balance-collateral",children:"Balance in Collateral"}),Object(B.jsx)(W,{className:"debt",children:"Outstanding Debt"})]}),t&&t.length>0&&t.map(((e,t)=>Object(B.jsxs)(Y,{children:[Object(B.jsxs)(q,{className:"".concat(n.includes(t)?"active-table":""),onClick:()=>{const e=n.some((e=>e===t));a(e?n.filter((e=>e!==t)):[...n,t])},children:[Object(B.jsx)(W,{className:"".concat(n.includes(t)?"active-icons":""," icons"),children:Object(B.jsx)(T.a,{color:"#2AA1FF"})}),Object(B.jsxs)(W,{className:"ticker",children:[Object(B.jsx)("img",{src:y.a[e.ticker],style:{display:"block",marginRight:7,float:"left"},alt:"icon"}),e.ticker]}),Object(B.jsxs)(W,{className:"price",children:[e.markPrice," "," WBTC"]}),Object(B.jsx)(W,{className:"balance-wallet",children:Object(v.c)(e.balanceWallet)}),Object(B.jsx)(W,{className:"balance-collateral",children:Object(v.c)(e.balanceCollateral)}),Object(B.jsx)(W,{className:"debt",children:Object(v.c)(e.outstandingDebt)})]},e.balanceCollateral),Object(B.jsxs)(L,{className:"".concat(n.includes(t)?"active-child-table":""),children:[Object(B.jsxs)(E,{children:[Object(B.jsx)(W,{className:"ticker",children:"Delivery Date"}),Object(B.jsx)(W,{className:"price",children:"Fair Price"}),Object(B.jsx)(W,{className:"balance-wallet",children:"Net Position"}),Object(B.jsx)(W,{className:"balance-collateral"}),Object(B.jsx)(W,{className:"debt",children:"Action"})]}),e.childTableInfo&&e.childTableInfo.length>0&&e.childTableInfo.map((e=>Object(B.jsxs)(R,{className:"child-table-cell",children:[Object(B.jsx)(W,{className:"ticker",children:e.deliveryDate}),Object(B.jsxs)(W,{className:"price",children:[Object(v.c)(e.fairPrice)," "," WBTC"]}),Object(B.jsxs)(W,{className:"balance-wallet",children:[c(e.netPosition)," ",Object(v.c)(Object(w.b)(e.netPosition.toString(),18).toString().replace(/^[-+]/,""))]}),Object(B.jsx)(W,{className:"balance-collateral"}),Object(B.jsx)(W,{className:"debt",style:{paddingRight:"7px"},children:Object(B.jsx)(I,{onClick:()=>{window.open("".concat(e.actionUrl))},children:"Hedge"})})]},e.deliveryDate)))]})]},e.balanceCollateral)))]})};const U=Object(g.a)("div")(H||(H=Object(x.a)(["\n  width: 100%;\n  height: 100%;\n  padding-right: 100px;\n  overflow: auto;\n"])));function X(e){let{tokenIndex:t}=e;const{toastError:n}=Object(u.a)(),{active:a,library:c,chainId:i,account:l}=Object(m.b)(),{hashPowerTokenList:s,walletTokenBalance:r}=Object(F.a)(),{position:o,ticker:b}=s[t]||{position:"",ticker:""},{instrumentContract:d,instrumentContract2:j,observerContract:h}=Object(f.a)(),x=0===t?d:j,{getTokenBalance:g}=Object(k.a)(c,a,i),[O,N]=Object(p.useState)(),C=Object(p.useCallback)((async()=>{const e=await g(o);e&&N(e)}),[g,o]);Object(p.useEffect)((()=>{o&&l&&C()}),[l,C,o]);const T=Object(p.useMemo)((()=>s&&s[t]&&s[t].balance?Number(Object(w.c)("".concat(s[t].balance),0))/Number(Object(w.c)("1",s[t].decimals)):0),[s,t]),[B,I]=Object(p.useState)([]),A=Object(p.useMemo)((()=>s&&s.length&&s[t].position&&Number(s[t].position)?Object(v.f)(s[t].tokensValues[s[t].token]):0),[s,t]),S=Object(p.useMemo)((()=>[{ticker:b,markPrice:A,balanceWallet:r[b],balanceCollateral:O&&O[b],outstandingDebt:T,addIcon:!1,childTableInfo:B}]),[O,A,T,B,b,r]),M=Object(p.useCallback)((async e=>{let a=0;try{const n=await h.getPosition(0===t?"0x68e6958bcb7f2e1e87a872dde341f8cbe7d52bc6":"0x0C10527c06828024CA2c1A993DdB3E922DFb8dE2",e,l);n&&n.size&&(a=n.size)}catch(c){c&&n("Failed",c.message)}return a}),[l,h,n,t]),z=Object(p.useCallback)((async e=>{let t=0;try{const n=await x.inquire(e,0);n&&n.sqrtFairPX96&&(t=Number(n.sqrtFairPX96/2**96)**2)}catch(a){if(a)return n("Failed",a.message),0}return t}),[x,n]),E=Object(p.useCallback)((async()=>{if(o&&a&&x&&h)try{const e=await x.getExpiries();if(e){const t=[];for(let n=0;n<e.length;n++){const a=e[n],c=await M(a),i=await z(a);t.push({deliveryDate:P()(1e3*a).format("YYYY-MM-DD"),fairPrice:i.toFixed(y.b.WBTC.decimals),netPosition:Number(c),actionUrl:"https://testnet.synfutures.com/#/trade/blastsepolia/F(BTC,25)-WBTC-".concat(D.f,"-").concat(P()(1e3*a).format("MMDD"))})}I(t)}}catch(e){e&&n("Failed",e.message)}}),[a,z,M,x,h,o,n]);return Object(p.useEffect)((()=>{E()}),[E]),S[0]}t.default=function(){const e=X({tokenIndex:0}),t=X({tokenIndex:1});return Object(B.jsxs)(U,{children:[Object(B.jsx)(N.l,{children:"Hedging"}),Object(B.jsx)(O.a,{style:{paddingTop:"15px",paddingLeft:"20px",paddingRight:"20px",overflow:"auto",height:"calc(100% - 200px)"},children:Object(B.jsx)(J,{testData:[e,t]})})]})}},442:function(e,t,n){"use strict";var a=n(1),c=n(147);t.a=()=>{const e=Object(a.useContext)(c.a);if(void 0===e)throw new Error("hashPowerToken context undefined");return e}}}]);
//# sourceMappingURL=25.b709c723.chunk.js.map