(this["webpackJsonpmappingfunk-interface"]=this["webpackJsonpmappingfunk-interface"]||[]).push([[20],{1060:function(t,e,n){"use strict";n.r(e);var a,i,s,c,o=n(7),l=n(1),r=n.n(l),u=n(18),p=n(716),d=n(1004),b=n(1005),j=n(1064),m=n(1006),h=n(1056),g=n(67),O=n(79),f=n(96),x=n(19),T=n(1003),k=n(1059),y=n(226),C=n(245),B=n(11),D=n(39),v=n.p+"static/media/fbtc20.5f91e1ef.svg",w=n(28),S=n(35),I=n(25),N=n(16),W=n(0);const F=Object(u.a)("h3")(a||(a=Object(o.a)(["\n  font-family: PingFangSC-Semibold, sans-serif;\n  font-weight: 550;\n  font-size: 16px;\n  line-height: 22px;\n  color: #000000;\n  margin-bottom: 20px;\n"]))),L=Object(u.a)("div")(i||(i=Object(o.a)(["\n  height: calc(100vh - 200px);\n  overflow-y: scroll;\n  padding-bottom: 30px;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"]))),R=Object(u.a)(f.a)(s||(s=Object(o.a)(["\n  background: rgba(255, 255, 255, 0.4) !important;\n  margin-bottom: 20px;\n  padding: 20px !important;\n"]))),P=Object(u.a)("div")(c||(c=Object(o.a)(["\n  .total {\n    display: flex;\n    justify-content: space-between;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 20px;\n    margin-bottom: 14px;\n\n    span {\n      color: #000000;\n      &:first-of-type {\n        font-family: PingFangSC-Medium, sans-serif;\n        font-weight: 500;\n      }\n      &:last-of-type {\n        font-family: PingFangSC-Regular, sans-serif;\n        font-weight: 400;\n      }\n    }\n  }\n\n  .guarantee,\n  .avatar,\n  .ticker {\n    display: flex;\n    margin-bottom: 16px;\n\n    .icon {\n      margin-right: 8px;\n    }\n\n    .title {\n      font-family: PingFangSC-Regular, sans-serif;\n      font-style: normal;\n      font-weight: 400;\n      font-size: 12px;\n      color: #000 !important;\n    }\n\n    div {\n      line-height: 20px;\n      width: calc(100% - 20px - 8px);\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      span:last-of-type {\n        font-family: PingFangSC-Regular, sans-serif;\n        font-size: 12px;\n        color: rgba(0, 0, 0, 0.5);\n      }\n    }\n  }\n\n  .avatar .avatar_info {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: fit-content;\n    span {\n      font-family: PingFangSC-Regular, sans-serif;\n      font-weight: 400;\n    }\n    svg {\n      cursor: pointer;\n    }\n  }\n\n  .ticker div span {\n    font-size: 14px !important;\n    line-height: 20px;\n    color: #000000 !important;\n  }\n\n  .token_list {\n    background: rgba(0, 0, 0, 0.04);\n    border-radius: 8px;\n    .icon {\n      width: 22px;\n      margin-right: 10px;\n    }\n    .MuiListItem-root {\n      display: flex;\n\n      .currency {\n        width: 100%;\n        //margin-left: 12px;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        font-size: 12px;\n        color: rgba(0, 0, 0, 0.5);\n        span {\n          font-family: PingFangSC-Regular, sans-serif;\n          font-weight: 400;\n        }\n      }\n    }\n  }\n\n  .daily {\n    font-family: PingFangSC-Medium, sans-serif;\n    margin-top: 20px;\n    margin-bottom: 5px;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 20px;\n    color: #000000;\n    white-space: nowrap;\n  }\n\n  .daily_name span {\n    font-family: PingFangSC-Regular, sans-serif;\n    font-size: 14px;\n    line-height: 20px;\n    color: #000000;\n  }\n\n  .more {\n    margin-top: 20px;\n    display: flex;\n    align-items: center;\n    font-size: 14px;\n    line-height: 20px;\n    letter-spacing: 0.02em;\n    color: #2aa1ff;\n    cursor: pointer;\n  }\n"])));function V(t){const{pageType:e}=t,n=Object(D.c)((t=>t.collateralManage.currentCPT)),{position:a,balance:i,decimals:s,positionInfoValues:c,address:o}=n,{chainId:l}=Object(w.b)();return Object(W.jsxs)(L,{children:[Object(W.jsxs)(R,{children:[Object(W.jsxs)(F,{children:["Liq"===e?"The Collateral":"My Collateral"," "]}),Object(W.jsxs)(P,{children:[Object(W.jsxs)("div",{className:"total",children:[Object(W.jsx)("span",{children:"Collateral Value"}),Object(W.jsxs)("span",{children:["\u2248"," ",n&&Number(n.avatar)?Object(y.f)(B.a.from(n.positionInfoValues.totalAssetsValues)):0," ","WBTC"]})]}),Object(W.jsxs)("div",{className:"guarantee",children:[Object(W.jsx)(x.k,{className:"icon"}),Object(W.jsxs)("div",{children:[Object(W.jsx)("span",{className:"title",children:"Prepaid Interest "}),Object(W.jsxs)("span",{children:["\u2248"," ",n&&Number(n.avatar)?Object(y.f)(B.a.from(n.positionInfoValues.interestGuaranteed)):0," ","WBTC"]})]})]}),Object(W.jsxs)("div",{className:"avatar",children:[Object(W.jsx)(x.b,{className:"icon"}),Object(W.jsxs)("div",{children:[Object(W.jsx)("span",{className:"title",children:"Collateral"}),Object(W.jsx)(C.a,{className:"avatar_info",toCopy:n?n.position:"",children:Object(W.jsx)("span",{children:n&&Number(n.avatar)?"".concat(n.position.slice(0,3),"..").concat(n.position.slice(5,8)):""})})]})]}),Object(W.jsxs)(T.a,{className:"token_list",children:[Object(W.jsxs)(k.a,{children:[Object(W.jsx)(x.B,{className:"icon"}),Object(W.jsxs)("div",{className:"currency",children:[Object(W.jsx)("span",{className:"symbol",children:"WBTC"}),Object(W.jsx)("span",{className:"balance",children:n&&Number(n.avatar)?Object(y.c)(n.avatarAssetList.WBTC):0})]})]}),Object(W.jsxs)(k.a,{children:[Object(W.jsx)(x.A,{className:"icon"}),Object(W.jsxs)("div",{className:"currency",children:[Object(W.jsx)("span",{className:"symbol",children:"USDT"}),Object(W.jsx)("span",{className:"balance",children:n&&Number(n.avatar)?Object(y.c)(n.avatarAssetList.USDT):0})]})]}),Object(W.jsxs)(k.a,{children:[Object(W.jsx)("img",{src:v,alt:"",className:"icon"}),Object(W.jsxs)("div",{className:"currency",children:[Object(W.jsx)("span",{className:"symbol",children:"F(BTC,20)"}),Object(W.jsx)("span",{className:"balance",children:n&&Number(n.avatar)?Object(y.c)(n.avatarAssetList[S.a.FBTC20]):0})]})]})]}),"Liq"!==e&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("h3",{className:"daily",children:"Mark Price"}),Object(W.jsx)("div",{className:"daily_name",children:Object(W.jsxs)("span",{children:["1 F(BTC, 20) \u2248"," ",n&&Number(n.avatar)?Object(y.f)(B.a.from(n.tokensValues[n.token])):0," ","WBTC"," "]})})," ",Object(W.jsxs)(O.b,{to:"/collateral",className:"more",children:[Object(W.jsx)("span",{children:"Add More Collateral"}),"\xa0\xa0",Object(W.jsx)(x.a,{})]})]})]})]}),Object(W.jsxs)(R,{children:[Object(W.jsx)(F,{children:"Liq"===e?"The Outstanding Debt":"My Outstanding Debt"}),Object(W.jsxs)(P,{children:[Object(W.jsxs)("div",{className:"ticker",style:{marginBottom:20},children:[Object(W.jsx)("img",{src:v,alt:"",className:"icon"}),Object(W.jsxs)("div",{children:[Object(W.jsx)("span",{children:null===n||void 0===n?void 0:n.token}),Object(W.jsx)("span",{children:i?Object(y.c)(Object(N.b)(i,s)):0})]})]}),Object(W.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[Object(W.jsx)("h3",{className:"daily",style:{margin:"0"},children:"Daily Paid Rewards Reference"}),Object(W.jsx)("div",{className:"daily_name",children:Object(W.jsxs)("span",{children:[Number(a)?Object(y.f)(c.estimatedDailyDebt):0," WBTC"]})})]}),"Liq"!==e&&Object(W.jsx)("div",{className:"more",children:Object(W.jsxs)("a",{target:"_blank",href:"https://app.uniswap.org/#/swap?&outputCurrency=".concat(o?o[l]:"","&inputCurrency=").concat(I.b.WBTC.address[l]),rel:"noreferrer",children:["Buy More Asset to Neutralize \xa0\xa0",Object(W.jsx)(x.a,{})]})})]})]})]})}var A=n(511),M=n.n(A),z=n(125),U=n(715),G=n(540),E=n.n(G),q=n(229),_=n(442),H=n(473),J=n(60),K=n(110),Q=n(461),X=n(241),Y=n(185);var Z,$,tt,et,nt=n(542),at=n(94),it=function(t){return t[t.a=0]="a",t[t.g=1]="g",t}(it||{});const st=Object(u.a)(x.c)(Z||(Z=Object(o.a)(["\n  box-shadow: none !important;\n  width: 34px !important;\n  height: 28px !important;\n  padding: 0 !important;\n  background: linear-gradient(90deg, #62c3f7 0%, #7ae9f1 100%) !important;\n  border-radius: 6px !important;\n\n  svg {\n    color: #000;\n    width: 16px;\n  }\n"]))),ct=Object(u.a)("div")($||($=Object(o.a)(["\n  padding-right: 44px;\n  width: 100%;\n  overflow: scroll;\n\n  .left_func {\n    overflow: scroll;\n    height: calc(100vh - 200px);\n    padding-bottom: 100px !important;\n  }\n"]))),ot=Object(u.a)("div")(tt||(tt=Object(o.a)(["\n  min-width: 1024px;\n"]))),lt=Object(u.a)(f.a)(et||(et=Object(o.a)([""]))),{liquidation:rt}=J.a;e.default=function(){const{active:t,chainId:e}=Object(w.b)(),{hashPowerTokenList:n,setRefresh:a}=Object(_.a)(),{signer:i,getWBTC:s,helperContract:c}=Object(K.a)(),{changeCPT:o}=Object(X.a)(),u=Object(D.c)((t=>t.collateralManage.currentCPT)),{avatarAssetList:O,positionInfoValues:f,token:T,position:k,balance:C,decimals:B,rewards:v,tokensValues:F}=u,L=Object(nt.a)(t,i),R=function(){const{pairWBTCAndUSDT:t,pairWBTCAndFBTC:e,pairWBTCAndFBTC25:n}=Object(K.a)();return Object(l.useCallback)(((a,i)=>{if(t&&e)if(a.inputToken&&a.outputToken&&("USDT"===a.inputToken.token||"USDT"===a.outputToken.token)){if("USDT"===a.inputToken.token&&"WBTC"===a.outputToken.token)return Object(Y.a)({inputBalance:t.USDT,outputBalance:t.WBTC,inputAmount:i,inputDecimals:a.inputToken.decimals,outputDecimals:a.outputToken.decimals}).output;if("WBTC"===a.inputToken.token)return Object(Y.a)({inputBalance:t.WBTC,outputBalance:t.USDT,inputAmount:i,inputDecimals:a.inputToken.decimals,outputDecimals:a.outputToken.decimals}).output;if("F(BTC,20)"===a.inputToken.token){const n=Object(Y.a)({inputBalance:e[S.a.FBTC20],outputBalance:e.WBTC,inputAmount:i,inputDecimals:a.inputToken.decimals,outputDecimals:I.b.WBTC.decimals});return Object(Y.a)({inputBalance:t.WBTC,outputBalance:t.USDT,inputAmount:n.output,inputDecimals:I.b.WBTC.decimals,outputDecimals:a.outputToken.decimals}).output}if("F(BTC,25)"===a.inputToken.token){const e=Object(Y.a)({inputBalance:n[S.a.FBTC25],outputBalance:n.WBTC,inputAmount:i,inputDecimals:a.inputToken.decimals,outputDecimals:I.b.WBTC.decimals});return Object(Y.a)({inputBalance:t.WBTC,outputBalance:t.USDT,inputAmount:e.output,inputDecimals:I.b.WBTC.decimals,outputDecimals:a.outputToken.decimals}).output}if("F(BTC,20)"===a.outputToken.token){const n=Object(Y.a)({inputBalance:t.USDT,outputBalance:t.WBTC,inputAmount:i,inputDecimals:a.inputToken.decimals,outputDecimals:I.b.WBTC.decimals});return Object(Y.a)({inputBalance:e.WBTC,outputBalance:e[S.a.FBTC20],inputAmount:n.output,inputDecimals:I.b.WBTC.decimals,outputDecimals:a.outputToken.decimals}).output}if("F(BTC,25)"===a.outputToken.token){const e=Object(Y.a)({inputBalance:t.USDT,outputBalance:t.WBTC,inputAmount:i,inputDecimals:a.inputToken.decimals,outputDecimals:I.b.WBTC.decimals});return Object(Y.a)({inputBalance:n.WBTC,outputBalance:n[S.a.FBTC25],inputAmount:e.output,inputDecimals:I.b.WBTC.decimals,outputDecimals:a.outputToken.decimals}).output}}else if(a.inputToken&&a.outputToken&&"USDT"!==a.outputToken.token&&"USDT"!==a.inputToken.token){if("WBTC"===a.inputToken.token)return Object(Y.a)({inputBalance:e.WBTC,outputBalance:e[S.a.FBTC20],inputAmount:i,inputDecimals:a.inputToken.decimals,outputDecimals:a.outputToken.decimals}).output;if(a.inputToken.token===S.a.FBTC20){const t=Object(Y.a)({inputBalance:e[S.a.FBTC20],outputBalance:e.WBTC,inputAmount:i,inputDecimals:a.inputToken.decimals,outputDecimals:a.outputToken.decimals});return a.outputToken.token===S.a.FBTC25?Object(Y.a)({inputBalance:n.WBTC,outputBalance:n[S.a.FBTC25],inputAmount:t.output,inputDecimals:I.b.WBTC.decimals,outputDecimals:a.outputToken.decimals}).output:t.output}if(a.inputToken.token===S.a.FBTC25){const t=Object(Y.a)({inputBalance:n[S.a.FBTC25],outputBalance:n.WBTC,inputAmount:i,inputDecimals:a.inputToken.decimals,outputDecimals:a.outputToken.decimals});return a.outputToken.token===S.a.FBTC20?Object(Y.a)({inputBalance:e.WBTC,outputBalance:e[S.a.FBTC20],inputAmount:t.output,inputDecimals:I.b.WBTC.decimals,outputDecimals:a.outputToken.decimals}).output:t.output}}return 0}),[e,n,t])}(),{toastSuccess:P,toastError:A,toastWarning:G}=Object(at.a)(),[J,Z]=Object(l.useState)([]),[$,tt]=Object(l.useState)([]),[et,ut]=Object(l.useState)([]),[pt,dt]=Object(l.useState)(0),[bt,jt]=Object(l.useState)({m1:0,m2:0,m3:0,m4:0}),[mt,ht]=Object(l.useState)({nowGDays:0,nowCRate:"0%"}),[gt,Ot]=r.a.useState("2"),ft=t=>{Ot(t.target.value)},xt=Object(l.useCallback)((t=>{if(f&&t){let e=0,n=0,a=0;t.forEach((t=>{e+=1*Object(y.g)(s({amount:t.output,symbol:t.outputToken.token,decimals:t.outputToken.decimals}),"WBTC"),e-=1*Object(y.g)(s({amount:t.input,symbol:t.inputToken.token,decimals:t.inputToken.decimals}),"WBTC"),t.type===it.g&&(n-=t.input)})),bt.m3&&(n+=bt.m3),bt.m4>0&&(a-=bt.m4);const i=1*f.totalAssetsValues+(0===e?0:Object(y.i)(1*Object(y.g)(e,"WBTC"))),c=f.interestGuaranteed-n,o=()=>0===Number(i)||0===Number(f.shortBalanceValue)?0:(i/(F[T]*(Object(y.a)(C,B)+a))*100).toFixed(2),l=()=>c-f.totalObligation===0||0===Number(f.estimatedDailyDebt)?0:Math.floor((c-f.totalObligation)/f.estimatedDailyDebt);ht((t=>({...t,outstandingDebt:Object(y.a)(C,B)+a,futureCRate:Object(y.b)(o()).toString().includes("\u221e")?Object(y.b)(o()):"".concat(Object(y.b)(o()),"%"),futureGDays:l(),dailyObligationReference:Object(y.f)((Object(y.a)(C,B)+a)*v/10)})))}}),[f,bt.m3,bt.m4,s,F,T,C,B,v]),Tt=Object(l.useCallback)((t=>{if(n){const e=n.filter((e=>e.token===t))[0];o(e)}}),[n,o]),kt=Object(l.useCallback)((()=>{Z((t=>{const e=[...t];if(pt===it.a){const t=[...$],n=t.findIndex((t=>"WBTC"===t.token)),a=t.splice(n,1);t.unshift(...a);const i=t[0].rightOptionList.findIndex((t=>t.token===T));t[0].rightOptionList.unshift(...t[0].rightOptionList.splice(i,1)),e.push({id:E()(),type:it.a,input:0,inputToken:t[0],outputToken:t[0].rightOptionList[0]})}if(pt===it.g){const t=[...$],n=t.findIndex((t=>"WBTC"===t.token)),a=t.splice(n,1);t.unshift(...a);const i=t[0].rightOptionList.findIndex((t=>"WBTC"===t.token));t[0].rightOptionList.unshift(...t[0].rightOptionList.splice(i,1)),e.push({id:E()(),type:it.g,input:0,inputToken:t[0],outputToken:t[0].rightOptionList[0]})}return e}))}),[pt,T,$]),yt=Object(l.useCallback)(((t,e)=>{Z((n=>{const a=n.map((n=>({...n,input:n.id===e.id?t.target.value:n.input,output:n.id===e.id?n.inputToken.token===e.outputToken.token?t.target.value:Object(y.g)(R(e,t.target.value),e.outputToken.token):n.output})));return xt(a),a}))}),[xt,R]),Ct=Object(l.useCallback)(((t,e,n)=>{Z((a=>a.map((a=>{if(a.id===e){const e={...a,[n]:t};return e.inputToken.token===t.token?e.output=e.input:e.output=Object(y.g)(R(e,e.input),e.outputToken.token),"inputToken"===n&&(e.output=0,e.input=0),e}return a}))))}),[R]),Bt=Object(l.useCallback)(((t,e)=>{Z((n=>{const a=n.map(((n,a)=>({...n,input:a===e?t.type===it.g&&f?Object(y.f)(f.interestGuaranteed):t.inputToken.allBalance:n.input,output:n.id===t.id?t.type===it.g&&f?Object(y.f)(f.interestGuaranteed):Object(y.g)(R(n,t.inputToken.allBalance),t.outputToken.token):n.output})));return xt(a),a}))}),[xt,R,f]),Dt=Object(l.useCallback)(((t,e,n)=>{e>0?("m1"===n&&f&&jt((t=>({...t,[n]:Object(y.f)(f.interestGuaranteed)}))),"m3"===n&&jt((t=>({...t,[n]:O.WBTC}))),"m4"!==n&&"m2"!==n||jt((t=>({...t,[n]:O[T]})))):jt((e=>({...e,[n]:t.target.value})))}),[O,f,T]),vt=Object(l.useCallback)((async()=>{const t=new g.utils.Interface(rt.abi);if(L){if((await c.healthCheck(k,C,15e3,60)).includes(!1)){const i=J.map((n=>{const a=Object(y.e)(Math.floor(n.input*Object(N.c)("1",n.inputToken.decimals))),i=[],s=[];if(n.type===it.a){"USDT"!==n.inputToken.token&&"USDT"!==n.outputToken.token||"F(BTC,20)"!==n.inputToken.token&&"F(BTC,20)"!==n.outputToken.token?(s.push(n.inputToken.address[e]),s.push(n.outputToken.address[e])):(s.push(n.inputToken.address[e]),s.push(I.b.WBTC.address[e]),s.push(n.outputToken.address[e]));const c=t.encodeFunctionData("swapExactTokensForTokens",[a,"0",s,"999999999999999"]);i.push(rt.address[e],c)}return n.type===it.g&&i.push(rt.address[e],t.encodeFunctionData("moveGuaranteeBack",[a])),i})),s=[];if("1"===gt&&bt.m3){const n=t.encodeFunctionData("addGuarantee",[Math.floor(Object(y.i)(bt.m3))]);s.push([rt.address[e],n])}if("2"===gt&&bt.m4){const n=t.encodeFunctionData("neutralizetBalance",[Math.floor(Object(y.h)(bt.m4))]);s.push([rt.address[e],n])}const c=t.encodeFunctionData("liquidation",[gt,[...i,...s]]);try{const t=await L.delegateCall(rt.address[e],c);if(t){await t.wait()&&(a((t=>!t)),P("Success"))}}catch(n){A("Failed",null===n||void 0===n?void 0:n.message.substr(0,null===n||void 0===n?void 0:n.message.indexOf("(")))}}else G("Warning","Liquidation conditions not met")}}),[L,c,k,C,J,bt.m3,bt.m4,gt,e,a,P,A,G]),wt=Object(l.useMemo)((()=>{const t=new RegExp("%","g");console.log(mt.futureCRate);return(mt.futureCRate?mt.futureCRate.toString().replace(t,""):mt.futureCRate)<110||mt.futureGDays<10}),[mt]),St=Object(l.useCallback)((t=>{const{value:e}=t.target;dt(Number(e))}),[]);return Object(l.useEffect)((()=>{if(t&&O){const t=[];for(const n in I.b)if(n){const e=I.b[n],a={token:n,address:e.address,allBalance:Object(y.e)(O[n]),balance:Object(y.g)(O[n],n),icon:e.icon,decimals:e.decimals,rightOptionList:[]};for(const t in I.b)t&&a.rightOptionList.push({token:t,address:I.b[t].address,icon:I.b[t].icon,allBalance:Object(y.e)(O[t]),balance:Object(y.g)(O[t],t),decimals:I.b[t].decimals});t.push(a)}tt(t);let e=0;if(t){e=R({inputToken:t[0],outputToken:t[0].rightOptionList[0]});const n=t.findIndex((t=>"WBTC"===t.token)),a=t.splice(n,1);t.unshift(...a);const i=t[0].rightOptionList.findIndex((t=>t.token===T));t[0].rightOptionList.unshift(...t[0].rightOptionList.splice(i,1)),Z((()=>[{id:E()(),type:it.a,input:0,output:0,inputToken:t[0],outputToken:t[0].rightOptionList[0],oracleHub:e}]))}}}),[t,O,R,T]),Object(l.useEffect)((()=>{if(u&&Object.keys(u).length){const t=[{...u,rightOptionList:[u]}];ut(t)}}),[u]),Object(l.useEffect)((()=>{xt(J)}),[J,bt.m4,bt.m3,xt]),Object(W.jsx)(ct,{children:Object(W.jsxs)(ot,{children:[Object(W.jsx)(z.l,{children:"Liquidation"}),Object(W.jsx)(q.a,{selectDisabled:!0,isGroup:!1,options:n||[],selectValue:u?u.token:"",onChange:Tt}),Object(W.jsxs)(p.a,{container:!0,spacing:2,style:{marginTop:14},children:[Object(W.jsx)(p.a,{className:"left_func",style:{paddingTop:0},item:!0,xs:8,children:Object(W.jsxs)(lt,{children:[Object(W.jsx)(U.a,{onDragEnd:t=>((t,e,n)=>{if(!t.destination)return;const{source:a,destination:i}=t;if(a.droppableId!==i.droppableId){const t=e[a.droppableId],s=e[i.droppableId],c=[...t.items],o=[...s.items],[l]=c.splice(a.index,1);o.splice(i.index,0,l),n([...s,o])}else{const t=[...e],[s]=t.splice(a.index,1);t.splice(i.index,0,s),n(t)}})(t,J,Z),children:Object(W.jsx)(U.c,{droppableId:"droppableId",children:t=>Object(W.jsxs)("div",{...t.droppableProps,ref:t.innerRef,children:[J.map(((t,e)=>Object(W.jsx)(U.b,{draggableId:t.id,index:e,children:n=>Object(W.jsxs)("div",{ref:n.innerRef,...n.draggableProps,...n.dragHandleProps,style:{display:"flex",alignItems:"center",userSelect:"none",margin:"0 0 8px 0",...n.draggableProps.style,position:"static"},children:[Object(W.jsxs)("div",{style:{width:"100%",position:"relative"},children:[Object(W.jsx)(H.a,{SelectIcon:()=>Object(W.jsx)("span",{children:t.type===it.a?"Collateral":"Prepaid Interest "}),leftInputValue:t.input,rightInputValue:t.output,options:$,rightOptions:t.inputToken.rightOptionList,leftSelectValue:t.inputToken.token,rightSelectValue:t.outputToken.token,leftBalance:t.type===it.g&&f?Object(y.f)(f.interestGuaranteed):t.inputToken.balance||t.inputToken.allBalance,rightBalance:t.outputToken.balance||t.outputToken.allBalance,selectedBalance:100,leftDisableStatus:[t.type===it.g,!1],RightIcon:()=>Object(W.jsx)("span",{children:"Collateral"}),rightDisableStatus:[t.type===it.g,!0],selectInput:e=>{yt(e,t)},leftChange:e=>{Ct(e,t.id,"inputToken")},rightChange:e=>{Ct(e,t.id,"outputToken")},onMax:()=>{Bt(t,e)},leftSymbol:t.inputToken.token,rightSymbol:t.outputToken.token}),Object(W.jsxs)("p",{style:{position:"absolute",bottom:0,right:0,color:"rgba(0, 0, 0, 0.5)",fontSize:12},children:["1",t.inputToken.token," \u2248"," ",t.inputToken.token===t.outputToken.token?1:Object(y.e)(R(t,1)),t.outputToken.token]})]}),Object(W.jsx)(d.a,{onClick:()=>{const t=[...J];t.splice(e,1),Z(t)},style:{cursor:"pointer",marginTop:8,marginLeft:10,padding:0},children:Object(W.jsx)(x.f,{})}),Object(W.jsx)(d.a,{style:{marginTop:8,marginLeft:8,padding:0},children:Object(W.jsx)(x.g,{style:{fill:"none"}})})]})},t.id))),t.placeholder]})})}),Object(W.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:10,marginBottom:40},children:[Object(W.jsx)(st,{onClick:kt,children:Object(W.jsx)(M.a,{})}),Object(W.jsx)(b.a,{style:{marginLeft:10},children:Object(W.jsxs)(j.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:pt,onChange:St,children:[Object(W.jsx)(m.a,{value:0,control:Object(W.jsx)(h.a,{}),label:Object(W.jsxs)("p",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(W.jsx)("span",{children:"Collateral"}),Object(W.jsx)("span",{style:{margin:"0 10px"},children:"->"}),Object(W.jsx)("span",{children:"Collateral"})]})}),Object(W.jsx)(m.a,{value:1,control:Object(W.jsx)(h.a,{}),label:Object(W.jsxs)("p",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(W.jsx)("span",{children:"Prepaid Interest "}),Object(W.jsx)("span",{style:{margin:"0 10px"},children:"->"}),Object(W.jsx)("span",{children:"Collateral"})]})})]})})]}),Object(W.jsxs)("div",{style:{display:"flex",alignItems:"center",paddingRight:28,width:"100%"},children:[Object(W.jsx)("div",{style:{width:"100%"},children:Object(W.jsx)(H.a,{SelectIcon:()=>Object(W.jsx)("span",{children:"Collateral"}),options:I.c,rightBalance:f?Object(y.f)(f.guaranteeValues):0,rightOptions:I.c,leftBalance:O?Object(y.c)(O.WBTC):0,RightIcon:()=>Object(W.jsx)("span",{children:"Prepaid Interest "}),leftInputValue:bt.m3,rightInputValue:bt.m3,selectInput:t=>{Dt(t,0,"m3")},onMax:()=>{Dt({},1,"m3")}})}),Object(W.jsx)(h.a,{checked:"1"===gt,onChange:ft,value:"1",name:"radio-buttons",style:{cursor:"pointer",marginTop:8,marginLeft:10,padding:0},inputProps:{"aria-label":"1"}})]}),Object(W.jsxs)("div",{style:{display:"flex",alignItems:"center",paddingRight:28,width:"100%"},children:[Object(W.jsx)("div",{style:{width:"100%"},children:Object(W.jsx)(H.a,{SelectIcon:()=>Object(W.jsx)("span",{children:"Collateral"}),options:et,rightOptions:et,leftBalance:O?O[T]:0,RightIcon:Object(z.n)(z.j,[Object(W.jsx)("span",{style:{color:"#f40"},children:"Neutralize"})]),leftSelectValue:T,leftSymbol:T,rightSelectValue:T,leftInputValue:bt.m4,rightInputValue:bt.m4,rightNumberIsShow:!1,selectInput:t=>{Dt(t,0,"m4")},onMax:()=>{Dt({},1,"m4")}})}),Object(W.jsx)(h.a,{checked:"2"===gt,onChange:ft,value:"2",style:{cursor:"pointer",marginTop:8,marginLeft:10,padding:0},name:"radio-buttons",inputProps:{"aria-label":"2"}})]}),Object(W.jsx)(Q.a,{data:[["OutStanding Debt",Object(y.c)(Object(y.a)(C,B)),Object(y.c)(mt.outstandingDebt)],["Daily Obligation Reference",f?Object(y.c)(Object(y.f)(f.estimatedDailyDebt)):0,mt.dailyObligationReference],["Collateral Ratio",f&&Object(y.b)(f.cRate).toString().includes("\u221e")?Object(y.b)(f.cRate):"".concat(Object(y.b)(f.cRate),"%")||!1,mt.futureCRate],["Prepaid Interest Coverage","".concat(f?Object(y.b)(f.gDays):0," days"),"".concat(mt.futureGDays," days")]]}),Object(W.jsxs)(z.k,{children:[Object(W.jsx)(z.h,{style:{background:"#FF7D00",color:"#fff"},children:"!"}),Object(W.jsx)("p",{children:"The collateral ratio should lower than 200% and the Prepaid Interest Coverage should lower than 100 days after the liquidation."})]}),Object(W.jsx)(z.e,{disabled:wt,onClick:vt,children:"Submit"})]})}),Object(W.jsx)(p.a,{item:!0,style:{paddingTop:0,marginBottom:40,paddingBottom:50},xs:4,children:Object(W.jsx)(V,{pageType:"Liq"})})]})]})})}},442:function(t,e,n){"use strict";var a=n(1),i=n(147);e.a=()=>{const t=Object(a.useContext)(i.a);if(void 0===t)throw new Error("hashPowerToken context undefined");return t}},461:function(t,e,n){"use strict";var a,i=n(7),s=(n(1),n(18)),c=n(0);const o=Object(s.a)("div")(a||(a=Object(i.a)(["\n  background: #def1ff;\n  border-radius: 14px;\n  padding: 13px 22px;\n  margin: 20px 0;\n\n  table {\n    width: 100%;\n  }\n\n  td {\n    font-family: PingFangSC-Regular, sans-serif;\n    font-weight: 400;\n    font-size: 12px;\n    padding: 5px 0;\n  }\n\n  .label {\n    text-align: left;\n    width: 30%;\n  }\n\n  .from,\n  .to {\n    width: 35%;\n    line-height: 17px;\n    text-align: right;\n  }\n\n  .to {\n    font-family: PingFangSC-Medium, sans-serif;\n    font-weight: 500;\n    color: #000;\n  }\n\n  .borderTop {\n    border-top: 0.5px solid rgba(0, 0, 0, 0.12);\n  }\n"])));e.a=function(t){const{data:e}=t;return Object(c.jsx)(o,{children:Object(c.jsx)("table",{children:Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"from",colSpan:2,children:"From"}),Object(c.jsx)("td",{className:"to",children:"To"})]}),e.map((t=>Object(c.jsxs)("tr",{className:t[3]?"borderTop":"",children:[Object(c.jsx)("td",{className:"label",children:t[0]}),Object(c.jsx)("td",{className:"from",children:t[1]}),Object(c.jsx)("td",{className:"to",children:t[2]})]},t[0])))]})})})}},473:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var a,i,s,c=n(7),o=n(1),l=n(18),r=n(16),u=n(229),p=n(19),d=n(125),b=n(0);const j=Object(l.a)("div")(a||(a=Object(c.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: static !important;\n"]))),m=Object(l.a)("div")(i||(i=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  width: calc(100% / 2 - 25px);\n\n  p {\n    height: 28px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 0 15px;\n    box-sizing: border-box;\n\n    span {\n      font-size: 12px;\n      line-height: 17px;\n      color: rgba(0, 0, 0, 0.5);\n    }\n  }\n\n  .maxBtn {\n    height: 21px;\n    align-items: flex-end;\n  }\n"])));Object(l.a)("strong")(s||(s=Object(c.a)(["\n  display: block;\n  width: 20px;\n  height: 20px;\n  background: #c4c4c4;\n  line-height: 20px;\n  text-align: center;\n  border-radius: 50%;\n"])));function h(t){const{options:e,leftBalance:n,isExchange:a,onExchange:i,onMax:s,selectInput:c,rightSelectInput:l,SelectIcon:h,RightIcon:g,leftInputValue:O,rightInputValue:f,rightBalance:x,rightDisableStatus:T,leftChange:k,rightChange:y,leftDisableStatus:C=[!1,!1],leftSelectValue:B,rightSelectValue:D,rightOptions:v,leftSymbol:w,rightSymbol:S,rightNumberIsShow:I=!0,leftDesc:N,rightDesc:W}=t,[F,L]=Object(o.useState)(e&&e.length?e[0]:{}),[R,P]=Object(o.useState)(e&&e.length?e[0].rightOptionList:[]),[V,A]=Object(o.useState)(R?R[0]:{});Object(o.useEffect)((()=>{e&&e.length&&B&&D&&(L(e.filter((t=>t.token===B))[0]||e[0]),P(e[0].rightOptionList),A(e[0].rightOptionList.filter((t=>t.token===D))[0]||e[0].rightOptionList[0]))}),[B,e,D]);const M=Object(o.useMemo)((()=>{const t=x||V&&V.balance||0,e=n||F.balance||0;return{right:{orignalBalance:t,balance:r.a.formatFourDecimals(t),symbol:S||(V&&Object.keys(V)?V.token:"WBTC")},left:{orignalBalance:e,balance:r.a.formatFourDecimals(e),symbol:w||F.token||"WBTC"}}}),[F,n,w,x,S,V]);return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(j,{children:[Object(b.jsxs)(m,{children:[Object(b.jsxs)("p",{title:"".concat(M.left.symbol," Balance: ").concat(M.left.orignalBalance),children:[Object(b.jsx)(h,{}),Object(b.jsxs)("span",{className:"balance",children:[M.left.balance," ",M.left.symbol]})]}),Object(b.jsx)(u.a,{selectValue:B||F.token,allDisabled:!C||C[0]&&C[1],inputDisabled:!C||C[1],selectDisabled:!C||C[0],onChange:t=>{const n=e.filter((e=>e.token===t))[0];P(n.rightOptionList),A(n.rightOptionList[0]),L(n),k&&k(n)},selectInput:c,actionValue:O,options:e,groupStyle:{width:"100%"},isGroup:!0},1),Object(b.jsxs)(d.g,{style:{justifyContent:"space-between",alignItems:"center"},children:[N&&N,Object(b.jsx)("p",{dir:"rtl",style:{width:"100%"},className:"maxBtn",children:Object(b.jsx)("span",{onClick:()=>{s&&s(F)},onKeyUp:()=>null,tabIndex:0,role:"button",style:{cursor:"pointer",color:"#6ED6F3",fontSize:"0.75rem",userSelect:"none"},children:"Max"})})]})]}),a?Object(b.jsx)(p.h,{onClick:i,style:{fill:"none",cursor:"pointer",width:22,marginTop:8}}):Object(b.jsx)(p.s,{style:{fill:"none",width:22,marginTop:8}}),Object(b.jsxs)(m,{children:[Object(b.jsxs)("p",{title:I?"".concat(M.right.symbol," Balance: ").concat(M.right.orignalBalance):"",children:[Object(b.jsx)(g,{}),I?Object(b.jsxs)("span",{className:"balance",children:[M.right.balance," ",M.right.symbol]}):null]}),Object(b.jsx)(u.a,{selectValue:D||(V?V.token:"WBTC"),options:v||R,actionValue:f,groupStyle:{width:"100%"},isGroup:!0,allDisabled:!T||T[0]&&T[1],inputDisabled:!T||T[1],selectDisabled:!T||T[0],selectInput:l,onChange:t=>{if(F){const e=F.rightOptionList.filter((e=>e.token===t))[0];y&&y(e),A(e)}else{const n=e[0].filter((e=>e.token===t))[0];y&&y(n),A(n)}}},2),Object(b.jsxs)(d.g,{style:{justifyContent:"space-between",alignItems:"center"},children:[W&&W,Object(b.jsx)("p",{dir:"rtl",style:{width:"100%"},className:"maxBtn"})]})]})]})})}},542:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n(1),i=n(15),s=n(111),c=n(39);function o(t,e){const[n,o]=Object(a.useState)(null),l=Object(c.c)((t=>t.collateralManage.currentCPT));return Object(a.useEffect)((()=>{if(t&&e&&l&&Number(l.position)){const t=Object(i.b)(e,s,l.position);o(t)}}),[t,l,e]),n}}}]);
//# sourceMappingURL=20.7b4bf6c5.chunk.js.map