(this["webpackJsonpmappingfunk-interface"]=this["webpackJsonpmappingfunk-interface"]||[]).push([[15],{1044:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(8),s=n(25),l=n(76),c=n(30),r=n(46),d=n(709),b=n(1050),p=n(0);const u=Object(r.a)(b.a)((e=>()=>({color:"#52af77",height:320,width:6,"& .MuiSlider-rail":{background:"linear-gradient(180deg, #1DCADA, #FFCC04 40%, #FF6308)",opacity:"1"},"& .MuiSlider-track":{border:"none",background:"transparent"},"& .MuiSlider-thumb":{bottom:0===e.value?"2px !important":e.value>100?"calc(100% - 2px) !important":"",height:6,width:6,boxShadow:"0px 8px 10px rgba(0, 0, 0, 0.25)",background:"#fff",transform:"translate(-24px,50%)",border:"2px solid #000","&:focus, &:hover, &.Mui-active, &.Mui-focusVisible":{boxShadow:"inherit"},"&:before":{position:"absolute",left:2,zIndex:-1,width:20,height:2,background:"#000",borderRadius:1}},"& .MuiSlider-valueLabel":{lineHeight:1.2,fontSize:12,background:"unset",padding:0,width:32,height:32,borderRadius:"50% 50% 50% 0",backgroundColor:"#52af77",transformOrigin:"left",transform:"translate(50%, -100%) rotate(-90deg) scale(0)","&:before":{display:"none"},"&.MuiSlider-valueLabelOpen":{display:"none",transform:"translate(50%, -100%) rotate(-90deg) scale(1)"},"& > *":{transform:"rotate(45deg)"}}})));function j(e){return Object(p.jsx)(u,{valueLabelDisplay:"auto","aria-label":"pretto slider",orientation:"vertical",defaultValue:90,disabled:!0,...e})}var m,h=n(217),f=n(107),x=n(21),g=n(412),O=n(228),y=n(474),k=n(92),v=n(98);const C=Object(r.a)("p")(m||(m=Object(i.a)(["\n  font-family: 'Heebo Regular', serif;\n  font-style: normal;\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 21px;\n  color: rgba(0, 0, 0, 0.5);\n"])));var T=function(e){const{children:t}=e;return Object(p.jsx)(C,{...e,children:t})},I=n(14),w=n(140),S=n(425),N=n(48),A=n(12),P=n(595),M=n(594),F=n(710),V=n(435),D=n(413),R=n(454),B=n(23),W=n(216),z=n(442),E=n(429),_=n(93);var L=function(e){const{walletTokenBalance:t,approveStatus:n,onApprove:o}=e,[i,s]=Object(a.useState)(0),[l,c]=Object(a.useState)(!1),{toastSuccess:r,toastError:d,toastInfo:b}=Object(k.a)(),[u,j]=Object(a.useState)(!1),{currentPosition:m,collateralIndex:h}=Object(w.c)(),{onUpdatePrepaidInterest:f,newDisplayCollateralRatio:x,newDisplayPrepaidInterestCoverage:O}=Object(w.a)(),{handleUpdatePosition:y,onAddPrepaidInterest:C}=Object(w.b)(),T=Object(a.useCallback)(((e,n)=>{const a=0===n?Number(e.target.value):t.WBTC,o=Object(I.c)(I.a.formatTokenAmount(a,B.b.WBTC.decimals),B.b.WBTC.decimals);a>t.WBTC||a<=0||o.isZero()?c(!0):c(!1),f(a),s(0===n?e.target.value:a)}),[f,t.WBTC]),S=Object(a.useCallback)((async()=>{try{if(!i||i<=0&&i>t.WBTC)return void d(_.e.failed,"Please enter a valid amount");c(!0);const e=await C(i);b(_.e.submited,Object(p.jsx)(E.a,{content:"Waiting for confirmation",txHash:e.hash}));await e.wait()&&(r(_.e.success,Object(p.jsx)(E.b,{content:"Add settlement success",txHash:e.hash})),c(!1),s(0),f(0),await y())}catch(e){c(!1)}}),[i,t,C,d,b,r,f,y]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(R.a,{SelectIcon:W.a,options:B.c,rightOptions:B.c,rightBalance:h.prepaidInterest,leftBalance:t?t.WBTC:0,rightSymbol:m.mintTokenInfo.settlementCurrency.symbol,selectedSymbol:m.mintTokenInfo.settlementCurrency.symbol,RightIcon:()=>Object(p.jsx)("img",{src:v.a.PrepaidInterest,style:{width:20},alt:""}),leftInputValue:i,rightInputValue:i,selectInput:e=>{T(e,0)},onMax:()=>{T({},1)}}),Object(p.jsx)(z.a,{data:[[_.b.CollateralRatio,h.displayRatio,x],[_.b.PrepaidInterestCoverage,h.displayCoverage,O]]}),n?Object(p.jsx)(g.e,{style:{boxShadow:"none"},disabled:l||i<=0,onClick:S,children:"Submit"}):Object(p.jsx)(g.e,{style:{boxShadow:"none"},disabled:u,onClick:()=>{o((e=>{j(e)}))},children:"Approve"})]})},H=n(144);var U=function(e){const{onApprove:t,approveStatus:n,account:o,chainId:i,walletTokenBalance:s}=e,[l,c]=Object(a.useState)(0),[r,d]=Object(a.useState)(!0),[b,u]=Object(a.useState)(!1),{toastError:j,toastSuccess:m}=Object(k.a)(),{currentPosition:h,currentPositionTokenInfo:f,collateralIndex:O}=Object(w.c)(),{onUpdateCollateralValue:y,newDisplayCollateralRatio:v,newDisplayPrepaidInterestCoverage:C}=Object(w.a)(),{handleUpdatePosition:T}=Object(w.b)(),N=Object(H.b)(),A=Object(a.useMemo)((()=>{const{allowedTokens:e}=f;return Array.from(Object.values(e.tokens)).map((t=>({...t,token:t.symbol,icon:()=>Object(p.jsx)(S.a,{imgprops:{style:{marginRight:10}},token:t.logo,symbol:t.symbol}),balance:s[t.symbol],rightOptionList:[{...t,token:t.symbol,icon:()=>Object(p.jsx)(S.a,{imgprops:{style:{marginRight:10}},token:t.logo,symbol:t.symbol}),balance:Object(I.b)(e.balances[t.symbol],t.decimals)}]})))}),[f,s]),[P,M]=Object(a.useState)(0),F=Object(a.useMemo)((()=>A.length&&A[P]||{...h.mintTokenInfo.settlementCurrency,balance:s[h.mintTokenInfo.settlementCurrency.symbol]}),[h.mintTokenInfo.settlementCurrency,P,A,s]),V=Object(a.useMemo)((()=>A.length&&A[P].rightOptionList[0]||{...h.mintTokenInfo.settlementCurrency,balance:Object(I.b)(f.allowedTokens.balances[h.mintTokenInfo.settlementCurrency.symbol],h.mintTokenInfo.settlementCurrency.decimals)}),[h.mintTokenInfo.settlementCurrency,f.allowedTokens.balances,P,A]),D=Object(a.useCallback)((async()=>{try{d(!0);await N(o,B.b[F.symbol].address[i],h.positionAddress,Object(I.c)(I.a.formatTokenAmount(l,B.b[F.symbol].decimals),B.b[F.symbol].decimals))&&(d(!1),c(0),m(_.e.success),y({symbol:F.symbol,value:0}),await T())}catch(e){console.dir(e),j(_.e.failed,null===e||void 0===e?void 0:e.reason),d(!1)}}),[N,o,F,i,h,l,m,y,T,j]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(R.a,{options:A,rightOptions:A,leftInputValue:l,leftBalance:F.balance,leftSelectValue:F.symbol,rightInputValue:l,rightBalance:V.balance,rightSelectValue:V.symbol,SelectIcon:W.a,selectInput:e=>{let{target:t}=e;if(c(t.value),t.value>0&&t.value<=F.balance){const e=Object(I.c)(I.a.formatTokenAmount(t.value,F.decimals),F.decimals);d(e.isZero())}else d(!0);y({symbol:F.symbol,value:t.value})},leftChange:e=>{const t=A.findIndex((t=>t.symbol===e.symbol));M(t),c(0),y({symbol:e.symbol,value:0})},onMax:()=>{s&&F.balance&&(c(F.balance),y({symbol:F.symbol,value:F.balance}),F.balance>0&&d(!1))},RightIcon:x.b}),Object(p.jsx)(z.a,{data:[["Collateral Ratio",O.displayRatio,v],["Prepaid Interest Coverage",O.displayCoverage,C]]}),Object(p.jsxs)(g.k,{children:[Object(p.jsx)(g.h,{style:{background:"#FF7D00",color:"#fff"},children:"!"}),Object(p.jsx)("p",{children:"Add asset to Collateral won\u2019t effect the Prepaid Interest Coverage, so you might need to add the specific asset in method 1 first."})]}),n?Object(p.jsx)(g.e,{style:{boxShadow:"none"},disabled:r||l<=0,onClick:D,children:"Submit"}):Object(p.jsx)(g.e,{style:{boxShadow:"none"},disabled:b,onClick:()=>{t((e=>{u(e)}))},children:"Approve"})]})};function G(e){const{approveStatus:t,onApprove:n}=e,{walletTokenBalance:a}=Object(D.a)(),{expanded:o,handleChange:i}=Object(V.a)(),{active:l,chainId:c,account:r}=Object(s.b)();return Object(p.jsxs)(g.m,{children:[Object(p.jsx)(g.l,{children:"Add collateral before mint"}),Object(p.jsxs)(g.a,{id:"panel1",expanded:"panel1"===o,onChange:i("panel1"),children:[Object(p.jsx)(g.c,{"aria-controls":"panel1d-content",children:Object(p.jsx)(F.a,{children:"Method 1. Add asset from my wallet to Prepaid Interest"})}),Object(p.jsx)(g.b,{children:"panel1"===o&&Object(p.jsx)(L,{active:l,account:r,chainId:c,walletTokenBalance:a,onApprove:n,approveStatus:t})})]}),Object(p.jsxs)(g.a,{id:"panel2",expanded:"panel2"===o,onChange:i("panel2"),children:[Object(p.jsx)(g.c,{"aria-controls":"panel1d-content",children:Object(p.jsx)(F.a,{children:"Method 2. Add asset from my wallet to Collateral"})}),Object(p.jsx)(g.b,{children:"panel2"===o&&Object(p.jsx)(U,{active:l,account:r,chainId:c,walletTokenBalance:a,onApprove:n,approveStatus:t})})]})]})}var Z=n(68),q=n(64),Y=n(16),K=n(108),J=n(109),X=n(29),Q=n(145);const{ActionUser:$}=Z.a,ee=new q.utils.Interface($.abi),te=e=>{const{approveStatus:t,onApprove:n}=e,[o,i]=Object(a.useState)(!0),{chainId:l,account:c}=Object(s.b)(),{currentPosition:r,collateralIndex:d}=Object(w.c)(),[b,u]=Object(a.useState)(!1),[j,m]=Object(a.useState)(0),{toastError:h,toastSuccess:f,toastInfo:O}=Object(k.a)(),{walletTokenBalance:y}=Object(D.a)(),{signer:v}=Object(K.a)(),[C,T]=Object(a.useState)(!1),{onUpdatePrepaidInterest:N,newDisplayCollateralRatio:A,newPrepaidInterestCoverage:P,newCollateralRatio:M,newDisplayPrepaidInterestCoverage:F,minCollateralValue:V}=Object(w.a)(),{handleUpdatePosition:L}=Object(w.b)(),H=Object(a.useCallback)((async()=>{try{u(!0);const e=ee.encodeFunctionData("moveGuarantee",[c,Object(I.c)(j.toString(),B.b.WBTC.decimals)]),t=new Y.a.Contract(r.positionAddress,J,v),n=await t.delegateCall($.address[l],e);if(n){m(0),O(_.e.submited,Object(p.jsx)(E.a,{content:"Waiting for confirmation",txHash:n.hash}));await n.wait()&&(u(!1),f(_.e.success,Object(p.jsx)(E.a,{content:"The transactions was successful",txHash:n.hash})),await L())}}catch(e){u(!1),h(_.e.failed,null===e||void 0===e?void 0:e.reason)}}),[c,l,r.positionAddress,L,v,h,O,f,j]);Object(a.useEffect)((()=>{M<120||P<20||j<=0||j>d.prepaidInterest||b?i(!0):i(!1)}),[d.prepaidInterest,M,P,b,j]),Object(a.useEffect)((()=>{const e=Number("-".concat(j));N(Number.isNaN(e)?0:e)}),[N,j]);const U=Object(a.useMemo)((()=>[{decimals:r.mintTokenInfo.settlementCurrency.decimals,token:r.mintTokenInfo.settlementCurrency.symbol,balance:d.prepaidInterest,icon:()=>Object(p.jsx)(S.a,{imgprops:{style:{marginRight:10}},token:r.mintTokenInfo.settlementCurrency.logo,symbol:r.mintTokenInfo.settlementCurrency.symbol}),rightOptionList:[{decimals:r.mintTokenInfo.settlementCurrency.decimals,token:r.mintTokenInfo.settlementCurrency.symbol,balance:y[r.mintTokenInfo.settlementCurrency.symbol],icon:()=>Object(p.jsx)(S.a,{imgprops:{style:{marginRight:10}},token:r.mintTokenInfo.settlementCurrency.logo,symbol:r.mintTokenInfo.settlementCurrency.symbol})}]}]),[d,r,y]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(R.a,{selectInput:e=>{m(e.target.value)},onMax:()=>{const e=20*r.positionStatus.estimatedDailyDebt.toNumber(),t=Number(d.prepaidInterest)-Object(I.b)(e,r.mintTokenInfo.settlementCurrency.decimals,!0);m(t>V?V:t)},SelectIcon:x.k,options:U,leftBalance:d.prepaidInterest,rightBalance:y&&y[r.mintTokenInfo.settlementCurrency.symbol],rightSelectedValue:42,rightSymbol:"WBTC",selectValue:42,selectedBalance:100,selectedSymbol:"WBTC",leftInputValue:j,rightInputValue:j,RightIcon:W.a}),Object(p.jsx)(z.a,{data:[["Collateral Ratio",d.displayRatio,A],["Prepaid Interest Coverage",d.displayCoverage,F]]}),t?Object(p.jsx)(g.e,{style:{boxShadow:"none"},disabled:o,onClick:H,children:"Submit"}):Object(p.jsx)(g.e,{style:{boxShadow:"none"},disabled:C,onClick:()=>{n((e=>{T(e)}))},children:"Approve"})]})};function ne(e){const{chainId:t,account:n}=Object(s.b)(),{approveStatus:o,onApprove:i}=e,{signer:l}=Object(K.a)(),{walletTokenBalance:c}=Object(D.a)(),[r,d]=Object(a.useState)(0),{tokenPools:b}=Object(K.a)(),[u,j]=Object(a.useState)({balance:0,token:X.c.WBTC,decimals:8,address:"",symbol:X.c.WBTC}),[m,h]=Object(a.useState)({balance:0,token:X.c.WBTC,decimals:8,address:"",symbol:X.c.WBTC}),[f,O]=Object(a.useState)(!0),[y,v]=Object(a.useState)(!1),{currentPosition:C,currentPositionTokenInfo:T,collateralIndex:N}=Object(w.c)(),{onUpdateCollateralValue:A,newDisplayCollateralRatio:P,newCollateralRatio:M,newDisplayPrepaidInterestCoverage:L,minCollateralValue:H}=Object(w.a)(),{handleUpdatePosition:U}=Object(w.b)(),{toastError:G,toastSuccess:Z,toastInfo:q}=Object(k.a)(),{expanded:ne,handleChange:ae}=Object(V.a)(),[oe,ie]=Object(a.useState)(!1);Object(a.useEffect)((()=>{if(u){!Object(I.c)(I.a.formatTokenAmount(r,u.decimals),u.decimals).isZero()&&r<=u.balance&&!oe?O(!1):O(!0),M<=120&&O(!0)}}),[u,r,oe,M]),Object(a.useEffect)((()=>{const e=Number("-".concat(r));A({symbol:u.token,value:Number.isNaN(e)?0:e})}),[u,A,r]);const se=Object(a.useCallback)((async()=>{if(ie(!0),O(!0),r<=0)return ie(!1),void G(_.e.failed,"Please enter a valid amount");const e=ee.encodeFunctionData("withdrawAsset",[B.b[u.token].address[t],n,Object(I.c)(I.a.formatTokenAmount(r,u.decimals),u.decimals)]);try{const n=new Y.a.Contract(C.positionAddress,J,l),a=await n.delegateCall($.address[t],e);if(a.hash){q(_.e.submited,Object(p.jsx)(E.a,{content:"Waiting for confirmation",txHash:a.hash}));await a.wait()&&(ie(!1),Z(_.e.success,Object(p.jsx)(E.a,{content:"The transactions was successful",txHash:a.hash})),d(0),await U())}}catch(a){ie(!1),G(_.e.failed,null===a||void 0===a?void 0:a.reason)}}),[u,t,n,r,C.positionAddress,l,q,Z,U,G]),le=Object(a.useMemo)((()=>{const{allowedTokens:e}=T;return e.tokens?Object.keys(e.tokens).map((t=>{const n=e.tokens[t],a={icon:()=>Object(p.jsx)(S.a,{imgprops:{style:{marginRight:10}},token:n.logo,symbol:n.symbol}),token:n.symbol,balance:Object(I.b)(e.balances[t],n.decimals,!0),decimals:n.decimals,address:n.address};return{...a,rightOptionList:[{...a,balance:c[t]}]}})):[]}),[T,c]);return Object(a.useEffect)((()=>{const e=le.find((e=>e.token===C.mintTokenInfo.settlementCurrency.symbol))||le[0];j(e),h(e)}),[C.mintTokenInfo.settlementCurrency.symbol,le]),Object(p.jsxs)(g.m,{children:[Object(p.jsx)(g.l,{children:"Withdraw Collateral"}),Object(p.jsxs)(g.a,{id:"panel13",expanded:"panel13"===ne,onChange:ae("panel13"),children:[Object(p.jsx)(g.c,{"aria-controls":"panel1d-content",children:Object(p.jsx)(F.a,{children:"Method 1. Withdraw asset from Collateral to my wallet"})}),Object(p.jsxs)(g.b,{children:[Object(p.jsx)(R.a,{rightOptions:[m],SelectIcon:x.b,options:le,leftSelectValue:u?u.token:"",rightSelectValue:m?m.token:"",rightBalance:m.balance,leftInputValue:r,rightInputValue:r,leftChange:e=>{j(e),h(e.rightOptionList[0])},selectInput:e=>{d(e.target.value),e.target.value>0&&e.target.value<=u.balance?O(!1):O(!0)},onMax:()=>{(e=>{const{settlementCurrency:n}=C.mintTokenInfo;if(1===e)if(u.token===n.symbol)H<u.balance?d(H):d(u.balance);else{const e=Object(Q.b)(t,u.token,n.symbol,Object(I.c)(I.a.formatTokenAmount(H,n.decimals),n.decimals),b),a=Object(I.b)(e,u.decimals,!0);a<u.balance?d(Number(I.a.formatTokenAmount(a,u.decimals))):d(u.balance)}})(1)},RightIcon:W.a}),Object(p.jsx)(z.a,{data:[[_.b.CollateralRatio,N.displayRatio,P],[_.b.PrepaidInterestCoverage,N.displayCoverage,L]]}),o?Object(p.jsx)(g.e,{style:{boxShadow:"none"},disabled:f,onClick:se,children:"Submit"}):Object(p.jsx)(g.e,{style:{boxShadow:"none"},disabled:y,onClick:()=>{i((e=>{v(e)}))},children:"Approve"})]})]}),Object(p.jsxs)(g.a,{id:"panel14",expanded:"panel14"===ne,onChange:ae("panel14"),children:[Object(p.jsx)(g.c,{"aria-controls":"panel1d-content",children:Object(p.jsx)(F.a,{children:"Method 2. Withdraw asset from Prepaid Interest to my wallet"})}),Object(p.jsx)(g.b,{children:Object(p.jsx)(te,{...e})})]})]})}var ae,oe,ie,se,le,ce,re=n(402),de=n(528);const be=Object(r.a)("div")(ae||(ae=Object(i.a)(["\n  button.MuiSelectUnstyled-root {\n    width: 200px;\n  }\n\n  div.MuiInput-root {\n    width: calc(100% - 200px) !important;\n  }\n\n  div.topFunc {\n    display: flex;\n    align-items: center;\n    padding: 5px 10px;\n\n    span {\n      margin-left: 10px;\n      font-size: 12px;\n      color: rgba(0, 0, 0, 0.5);\n    }\n  }\n"]))),pe=Object(r.a)("div")(oe||(oe=Object(i.a)(["\n  display: flex;\n  align-items: flex-start;\n  flex-direction: column;\n  margin-top: 20px;\n  margin-bottom: 18px;\n  font-weight: 500;\n  font-size: 12px;\n  line-height: 17px;\n  color: rgba(0, 0, 0, 0.5);\n  background: #def1ff;\n  border-radius: 14px;\n  padding: 16px 19px 11px;\n  p span:first-of-type {\n    margin-right: 10px;\n  }\n\n  & + p {\n    font-weight: 400;\n    font-size: 12px;\n    line-height: 17px;\n    color: #000000;\n    margin-bottom: 30px;\n  }\n\n  .info_panel {\n    width: 100%;\n    text-align: right;\n    .footer {\n      border-top: 0.5px solid rgba(0, 0, 0, 0.12);\n    }\n    td {\n      font-family: PingFangSC-Regular, sans-serif;\n      font-weight: 400;\n      font-size: 12px;\n      padding: 5px 0;\n    }\n    .label {\n      text-align: left;\n      width: 30%;\n    }\n    .from,\n    .to {\n      width: 35%;\n      line-height: 17px;\n    }\n    .to {\n      font-family: PingFangSC-Medium, sans-serif;\n      font-weight: 500;\n      color: #000;\n    }\n  }\n"]))),ue=Object(r.a)("div")(ie||(ie=Object(i.a)(["\n  padding: 10px 20px 5px;\n\n  button {\n    color: #2aa1ff;\n  }\n"]))),je=Object(r.a)(x.c)(se||(se=Object(i.a)(["\n  background: linear-gradient(90deg, #61c2f7 0%, #7ae9f0 100%);\n  border-radius: 20px !important;\n  box-shadow: none !important;\n  line-height: 46px !important;\n  height: 46px !important;\n  display: block !important;\n  margin: 30px auto 0 !important;\n  width: 30% !important;\n  color: #000;\n"]))),me=Object(r.a)("div")(le||(le=Object(i.a)(["\n  h3 {\n    font-size: 16px;\n    font-family: PingFangSC-Medium, sans-serif;\n    margin-bottom: 16px;\n  }\n  .content {\n    display: flex;\n  }\n  .item_wrap {\n    min-width: 200px;\n    padding: 1px;\n    border-radius: 14px;\n    overflow: hidden;\n    margin-right: 16px;\n    background: #e3e8ed;\n    cursor: pointer;\n    user-select: none;\n    span {\n      font-family: PingFangSC-Regular, sans-serif;\n      color: rgba(0, 0, 0, 0.5);\n      font-size: 12px;\n      line-height: 17px;\n      &:first-of-type {\n        margin-right: 30px;\n      }\n    }\n    &.active {\n      padding: 2px;\n      background: linear-gradient(270deg, #7ae9f0 0%, #61c3f7 100%);\n      span {\n        color: #000;\n      }\n    }\n  }\n  .item {\n    border-radius: 12px;\n    //border: 2px solid #E3E8ED;\n    //border-image: linear-gradient(#7AE9F0 , #61C3F7) 30 30;\n    padding: 14px 14px 9px 10px;\n    background: #fff;\n    width: 100%;\n    height: 100%;\n    //box-sizing: border-box;\n    h4 {\n      font-family: PingFangSC-Semibold, sans-serif;\n      font-weight: 550;\n      display: flex;\n      align-items: center;\n      line-height: 20px;\n      font-size: 14px;\n      margin-bottom: 22px;\n      svg {\n        margin-right: 8.5px;\n      }\n    }\n    p {\n      display: flex;\n      justify-content: space-between;\n    }\n  }\n"]))),he=Object(r.a)("div")(ce||(ce=Object(i.a)(["\n  display: flex;\n  align-items: center;\n  background: rgba(0, 0, 0, 0.03);\n  border-radius: 8px;\n  padding: 16px 20px;\n  p {\n    line-height: 20px;\n    font-size: 14px;\n    font-family: PingFangSC-Regular, sans-serif;\n    margin-left: 16px;\n    color: rgba(0, 0, 0, 0.5);\n  }\n"]))),fe="red";var xe=function(e){return e.Wallet="wallet",e.Avatar="avatar",e}(xe||{});const{ActionUser:ge}=Z.a;var Oe=function(){const{setRefresh:e,walletTokenBalance:t}=Object(D.a)(),{signer:n}=Object(K.a)(),{active:o,chainId:i,account:l}=Object(s.b)(),[c,r]=Object(a.useState)(!1),[d,b]=Object(a.useState)(!0),[u,j]=Object(a.useState)(0),m=Object(de.a)(o,n),[f,g]=Object(a.useState)(xe.Wallet),{toastSuccess:O,toastError:v,toastInfo:C}=Object(k.a)(),{currentMintToken:T,currentPosition:S,currentPositionTokenInfo:N,collateralIndex:A}=Object(w.c)(),{onUpdateNeutralizeValue:P,newNeutralizeFee:M,newDisplayCollateralRatio:F,newDisplayPrepaidInterestCoverage:V,newEstimatedDailyDebt:R}=Object(w.a)(),{handleUpdatePosition:B}=Object(w.b)(),{handleApprove:z}=Object(y.a)(l,null===S||void 0===S?void 0:S.mintTokenInfo.address),{onCheckApprove:E}=Object(y.b)(),L=Object(a.useCallback)((async()=>{try{const e=await z(null===S||void 0===S?void 0:S.positionAddress);if(r(!0),e.hash){await e.wait()&&O("Approve Success")}}catch({message:e}){r(!1),v(_.e.failed,"".concat(e))}}),[z,null===S||void 0===S?void 0:S.positionAddress,O,v]),H=Object(a.useMemo)((()=>{const e=null===S||void 0===S?void 0:S.mintTokenInfo.settlementCurrency;return null!==N&&void 0!==N&&N.allowedTokens?{[e.symbol]:Number(I.a.formatFourDecimals(Number(Object(I.b)(N.allowedTokens.balances[e.symbol],e.decimals)))),[T]:Number(I.a.formatFourDecimals(Number(Object(I.b)(N.allowedTokens.balances[S.mintTokenInfo.symbol],S.mintTokenInfo.decimals))))}:{[e.symbol]:0,[T]:0}}),[T,S,N]),U=Object(a.useCallback)((async()=>{if(S.isEnable){const e=await E(l,S.mintTokenInfo.address,S.positionAddress);r(e&&e._hex>0)}}),[l,S,E]),G=Object(a.useCallback)((e=>{let{target:n}=e;const{value:a}=n,o=S.mintTokenInfo.decimals;j(a);const i=a?Number("-".concat(a)):0;P(i);const s=Object(I.b)(S.balance,S.mintTokenInfo.decimals),l=a<t[T]&&a>0&&a<=s,c=a<H[T]&&a>0&&a<=s;if(f===xe.Wallet?b(!l):b(!c),a>0){const e=Object(I.c)(I.a.formatTokenAmount(a,S.mintTokenInfo.decimals),o);f===xe.Wallet?b(!l||e.isZero()):b(!c||e.isZero())}}),[P,H,T,t,f,S]),Z=Object(a.useCallback)((async()=>{if(!d){const n=new q.utils.Interface(ge.abi).encodeFunctionData("neutralizetBalance",[Object(I.c)(String(u),S.mintTokenInfo.decimals),f===xe.Wallet]);if(m)try{const t=await m.delegateCall(ge.address[i],n);if(t){b(!0),j(0),C(_.e.submited);await t.wait()&&(e((e=>!e)),O(_.e.success),b(!1),P(0),await B())}}catch(t){v(_.e.failed,(null===t||void 0===t?void 0:t.reason)||(null===t||void 0===t?void 0:t.message))}}}),[d,u,S.mintTokenInfo.decimals,f,m,i,C,e,O,P,B,v]);return Object(a.useEffect)((()=>{U()}),[U]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(be,{children:[Object(p.jsx)(h.a,{selectValue:T,groupStyle:{width:"100%"},options:[{...null===S||void 0===S?void 0:S.mintTokenInfo,token:S.mintTokenInfo.symbol}],actionValue:u,selectInput:G,isGroup:!0}),Object(p.jsx)(ue,{dir:"rtl",children:Object(p.jsx)(re.a,{onClick:()=>{const e=Object(I.b)(S.balance,S.mintTokenInfo.decimals);if(f===xe.Wallet){const n=Math.min(Number(t[T]),Number(e));G({target:{value:n}})}else{const t=Math.min(Number(H[T]),Number(e));G({target:{value:t}})}},children:"Max"})}),Object(p.jsxs)(me,{children:[Object(p.jsx)("h3",{children:"Neutralize the asset from"}),Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)("div",{className:"item_wrap ".concat(f===xe.Wallet?"active":""),onClick:()=>{g(xe.Wallet),u>0&&b(M>t.WBTC||u>t[T])},onKeyUp:()=>null,tabIndex:0,role:"button",children:Object(p.jsxs)("div",{className:"item wallet",children:[Object(p.jsxs)("h4",{children:[Object(p.jsx)(W.a,{})," My Wallet"]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("span",{children:T}),Object(p.jsx)("span",{style:{color:f===xe.Wallet&&t&&u>t[T]&&fe||""},children:t&&I.a.formatFourDecimals(t[T])||0})]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("span",{children:S.mintTokenInfo.settlementCurrency.symbol}),Object(p.jsx)("span",{style:{color:f===xe.Wallet&&t&&M>t[S.mintTokenInfo.settlementCurrency.symbol]?fe:""},children:t&&I.a.formatFourDecimals(t.WBTC)||0})]})]})}),Object(p.jsx)("div",{className:"item_wrap ".concat(f===xe.Avatar?"active":""),onClick:()=>{g(xe.Avatar),u>0&&b(u>H[T]||M>H[S.mintTokenInfo.settlementCurrency.symbol])},onKeyUp:()=>null,tabIndex:0,role:"button",children:Object(p.jsxs)("div",{className:"item avatar",children:[Object(p.jsxs)("h4",{children:[Object(p.jsx)(x.b,{}),"Collateral"]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("span",{children:T}),Object(p.jsx)("span",{style:{color:f===xe.Avatar&&u>H[T]&&fe||""},children:H[S.mintTokenInfo.symbol]})]}),Object(p.jsxs)("p",{children:[Object(p.jsx)("span",{children:S.mintTokenInfo.settlementCurrency.symbol}),Object(p.jsx)("span",{style:{color:f===xe.Avatar&&M>H[S.mintTokenInfo.settlementCurrency.symbol]&&fe||""},children:H[S.mintTokenInfo.settlementCurrency.symbol]})]})]})})]})]})]}),Object(p.jsxs)(pe,{children:[R,Object(p.jsxs)("table",{className:"info_panel",cellSpacing:20,cellPadding:20,children:[Object(p.jsxs)("thead",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"from",colSpan:2,children:"From"}),Object(p.jsx)("td",{className:"to",children:"To"})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"label",children:"Outstanding Debt"}),Object(p.jsx)("td",{className:"from",children:I.a.formatFourDecimals(Number(Object(I.b)(null===S||void 0===S?void 0:S.balance,null===S||void 0===S?void 0:S.mintTokenInfo.decimals)))}),Object(p.jsx)("td",{className:"to",children:I.a.formatFourDecimals(Number(Object(I.b)(null===S||void 0===S?void 0:S.balance,null===S||void 0===S?void 0:S.mintTokenInfo.decimals))-u)})]})]}),Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"label",children:_.b.CollateralRatio}),Object(p.jsx)("td",{className:"from",children:A.displayRatio}),Object(p.jsx)("td",{className:"to",children:F})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"label",children:_.b.PrepaidInterestCoverage}),Object(p.jsx)("td",{className:"from",children:A.displayCoverage}),Object(p.jsx)("td",{className:"to",children:V})]}),Object(p.jsxs)("tr",{className:"footer",children:[Object(p.jsx)("td",{className:"label",children:"Estimate neutralize fee"}),Object(p.jsxs)("td",{className:"to",colSpan:2,style:{color:f===xe.Wallet&&t&&M>t[S.mintTokenInfo.settlementCurrency.symbol]||f===xe.Avatar&&M>H[S.mintTokenInfo.settlementCurrency.symbol]?fe:""},children:[M?"\u2248".concat(M):0," WBTC"]})]})]})]})]}),Object(p.jsxs)(he,{children:[f===xe.Wallet&&t&&M>t[S.mintTokenInfo.settlementCurrency.symbol]||f===xe.Avatar&&M>H[S.mintTokenInfo.settlementCurrency.symbol]?Object(p.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(p.jsx)("path",{d:"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z",fill:"#FF2E00"}),Object(p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.57852 10.156C8.82398 10.156 9.02296 10.355 9.02296 10.6004V11.756C9.02296 12.0015 8.82398 12.2004 8.57852 12.2004H7.42296C7.1775 12.2004 6.97852 12.0015 6.97852 11.756V10.6004C6.97852 10.355 7.1775 10.156 7.42296 10.156H8.57852ZM8.57852 3.62842C8.82398 3.62842 9.02296 3.8274 9.02296 4.07286V8.74859C9.02296 8.99405 8.82398 9.19303 8.57852 9.19303H7.42296C7.1775 9.19303 6.97852 8.99405 6.97852 8.74859V4.07286C6.97852 3.8274 7.1775 3.62842 7.42296 3.62842H8.57852Z",fill:"white"})]}):Object(p.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(p.jsx)("path",{d:"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z",fill:"#73797C"}),Object(p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.42295 5.6736C7.17749 5.6736 6.9785 5.47461 6.9785 5.22915V4.0736C6.9785 3.82814 7.17749 3.62915 7.42295 3.62915H8.5785C8.82396 3.62915 9.02295 3.82814 9.02295 4.0736L9.02295 5.22915C9.02295 5.47461 8.82396 5.6736 8.5785 5.6736H7.42295ZM7.42295 12.2012C7.17749 12.2012 6.9785 12.0022 6.9785 11.7567V7.081C6.9785 6.83554 7.17749 6.63656 7.42295 6.63656H8.5785C8.82396 6.63656 9.02295 6.83554 9.02295 7.081V11.7567C9.02295 12.0022 8.82396 12.2012 8.5785 12.2012H7.42295Z",fill:"white"})]}),Object(p.jsx)("p",{style:{color:f===xe.Wallet&&t&&M>t[S.mintTokenInfo.settlementCurrency.symbol]||f===xe.Avatar&&M>H[S.mintTokenInfo.settlementCurrency.symbol]?fe:""},children:"A 1.0% fee of the token value will be levied after the position is neutralized."})]}),f===xe.Avatar?Object(p.jsx)(je,{disabled:d,onClick:Z,children:"Neutralize"}):Object(p.jsx)(p.Fragment,{children:c?Object(p.jsx)(je,{disabled:d,onClick:Z,children:"Neutralize"}):Object(p.jsx)(je,{disabled:c,onClick:L,children:"Approve"})})]})};var ye=function(e){var t;const{approveStatus:n,onApprove:o}=e,[i,s]=Object(a.useState)(0),[l,c]=Object(a.useState)(!1),{toastSuccess:r,toastError:d,toastInfo:b}=Object(k.a)(),{collateralIndex:u,currentPosition:j,currentPositionTokenInfo:m}=Object(w.c)(),{onUpdatePrepaidInterest:h,newDisplayPrepaidInterestCoverage:f}=Object(w.a)(),{handleUpdatePosition:O,onAddPrepaidInterest:y}=Object(w.b)(),v=Object(a.useMemo)((()=>{var e,t;return Object(I.b)(null!==(e=null===(t=m.allowedTokens)||void 0===t?void 0:t.balances[j.mintTokenInfo.settlementCurrency.symbol])&&void 0!==e?e:0,j.mintTokenInfo.settlementCurrency.decimals,!0)}),[j.mintTokenInfo.settlementCurrency,null===(t=m.allowedTokens)||void 0===t?void 0:t.balances]),C=Object(a.useCallback)(((e,t)=>{const n=0===t?Number(e.target.value):v,a=Object(I.c)(I.a.formatTokenAmount(n,B.b.WBTC.decimals),B.b.WBTC.decimals);n>v||n<=0||a.isZero()?c(!0):c(!1),s(0===t?e.target.value:n),h(n)}),[v,h]),T=Object(a.useCallback)((async()=>{try{if(!i||i>v&&i<=0)return void d(_.e.failed,"Please enter a valid amount");c(!0);const e=await y(i);b(_.e.submited,Object(p.jsx)(E.a,{content:"Waiting for confirmation",txHash:e.hash}));await e.wait()&&(r(_.e.success,Object(p.jsx)(E.b,{content:"Add settlement success",txHash:e.hash})),c(!1),s(0),h(0),await O())}catch(e){c(!1)}}),[i,v,y,b,r,O,h,d]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(R.a,{SelectIcon:x.b,options:B.c,rightBalance:u.prepaidInterest,rightOptions:B.c,leftBalance:v,rightSymbol:j.mintTokenInfo.settlementCurrency.symbol,selectedSymbol:j.mintTokenInfo.settlementCurrency.symbol,RightIcon:x.k,leftInputValue:i,rightInputValue:i,selectInput:e=>{C(e,0)},onMax:()=>{C({},1)}}),Object(p.jsx)(z.a,{data:[[_.b.CollateralRatio,u.displayRatio,u.displayRatio],[_.b.PrepaidInterestCoverage,u.displayCoverage,f]]}),Object(p.jsx)(g.e,{style:{boxShadow:"none"},disabled:!n||l||!(i>0),onClick:n?T:o,children:n?"Submit":"Approve"})]})};function ke(e){const{approveStatus:t,onApprove:n}=e,{active:a,chainId:o,account:i}=Object(s.b)(),{walletTokenBalance:l}=Object(D.a)(),{expanded:c,handleChange:r}=Object(V.a)();return Object(p.jsxs)(g.m,{children:[Object(p.jsx)(g.l,{children:"Improve Prepaid Interest Coverage"}),Object(p.jsxs)(g.a,{id:"panel3",expanded:"panel3"===c,onChange:r("panel3"),children:[Object(p.jsx)(g.c,{"aria-controls":"panel1d-content",children:Object(p.jsx)(F.a,{children:"Method 1. Add asset from my wallet to Prepaid Interest"})}),Object(p.jsx)(g.b,{children:"panel3"===c&&Object(p.jsx)(L,{active:a,account:i,chainId:o,walletTokenBalance:l,onApprove:n,approveStatus:t})})]}),Object(p.jsxs)(g.a,{id:"panel4",expanded:"panel4"===c,onChange:r("panel4"),children:[Object(p.jsx)(g.c,{"aria-controls":"panel1d-content",children:Object(p.jsx)(F.a,{children:"Method 2. Transfer asset from Collateral to Prepaid Interest"})}),Object(p.jsx)(g.b,{children:"panel4"===c&&Object(p.jsx)(ye,{active:a,account:i,chainId:o,walletTokenBalance:l,onApprove:n,approveStatus:t})})]}),Object(p.jsxs)(g.a,{id:"panel5",expanded:"panel5"===c,onChange:r("panel5"),children:[Object(p.jsx)(g.c,{"aria-controls":"panel1d-content",children:Object(p.jsx)(F.a,{children:"Method 3. Neutralize outstanding debt"})}),Object(p.jsx)(g.b,{children:"panel5"===c&&Object(p.jsx)(Oe,{})})]})]})}function ve(e){const{expanded:t,handleChange:n}=Object(V.a)(),{approveStatus:a,onApprove:o}=e,{walletTokenBalance:i}=Object(D.a)(),{active:l,chainId:c,account:r}=Object(s.b)();return Object(p.jsxs)(g.m,{children:[Object(p.jsx)(g.l,{children:"Improve Collateral Ratio"}),Object(p.jsxs)(g.a,{id:"panel7",expanded:"panel7"===t,onChange:n("panel7"),children:[Object(p.jsx)(g.c,{"aria-controls":"panel1d-content",children:Object(p.jsx)(F.a,{children:"Method 1. Add asset from my wallet to Prepaid Interest"})}),Object(p.jsx)(g.b,{children:"panel7"===t&&Object(p.jsx)(L,{active:l,account:r,chainId:c,walletTokenBalance:i,onApprove:o,approveStatus:a})})]}),Object(p.jsxs)(g.a,{id:"panel8",expanded:"panel8"===t,onChange:n("panel8"),children:[Object(p.jsx)(g.c,{"aria-controls":"panel1d-content",children:Object(p.jsx)(F.a,{children:"Method 2. Add asset from my wallet to Collateral"})}),Object(p.jsx)(g.b,{children:"panel8"===t&&Object(p.jsx)(U,{active:l,account:r,chainId:c,walletTokenBalance:i,onApprove:o,approveStatus:a})})]}),Object(p.jsxs)(g.a,{id:"panel9",expanded:"panel9"===t,onChange:n("panel9"),children:[Object(p.jsx)(g.c,{"aria-controls":"panel1d-content",children:Object(p.jsx)(F.a,{children:"Method 3. Neutralize outstanding debt"})}),Object(p.jsx)(g.b,{children:"panel9"===t&&Object(p.jsx)(Oe,{})})]})]})}var Ce,Te=n(998),Ie=n(708),we=n(494),Se=n.n(we),Ne=n(527),Ae=n.n(Ne);const Pe=Object(r.a)(x.c)(Ce||(Ce=Object(i.a)(["\n  box-shadow: none !important;\n  width: 34px !important;\n  height: 28px !important;\n  padding: 0 !important;\n  background: linear-gradient(90deg, #62c3f7 0%, #7ae9f1 100%) !important;\n  border-radius: 6px !important;\n  svg {\n    color: #000;\n    width: 16px;\n  }\n"]))),{ActionUser:Me,ActionMulticall:Fe}=Z.a,Ve=new q.utils.Interface(Me.abi),De=new q.utils.Interface(Fe.abi),Re=(e,t,n,a)=>{if(!e.destination)return;const{source:o,destination:i}=e;if(o.droppableId!==i.droppableId){const e=t[o.droppableId],a=t[i.droppableId],s=[...e.items],l=[...a.items],[c]=s.splice(o.index,1);l.splice(i.index,0,c),n([...a,l])}else{const e=[...t],[s]=e.splice(o.index,1);e.splice(i.index,0,s),e.map((e=>e.input>0)).includes(!1)?a(!0):a(!1),n(e)}};function Be(e){const{onApprove:t,approveStatus:n}=e,{chainId:o}=Object(s.b)(),{toastInfo:i,toastError:l,toastSuccess:c}=Object(k.a)(),{signer:r,tokenPools:d}=Object(K.a)(),[b,u]=Object(a.useState)([]),{expanded:j,handleChange:m}=Object(V.a)(),[h,f]=Object(a.useState)(!0),[O,y]=Object(a.useState)(!1),{onUpdateTotalCollateralValue:v,newDisplayCollateralRatio:C,newCollateralRatio:T,newDisplayPrepaidInterestCoverage:N}=Object(w.a)(),{handleUpdatePosition:P}=Object(w.b)(),{currentPositionTokenInfo:M,collateralIndex:D,currentPosition:B}=Object(w.c)(),W=Object(a.useMemo)((()=>{if(null!==M&&void 0!==M&&M.tokenPrice){const{allowedTokens:e}=M,t=Object.values(e.tokens).map((t=>{const n=(null===e||void 0===e?void 0:e.balances)&&Object(I.b)((null===e||void 0===e?void 0:e.balances[t.symbol])||0,t.decimals,!0)||0;return{decimals:t.decimals,token:t.symbol,balance:n,icon:()=>Object(p.jsx)(S.a,{imgprops:{style:{marginRight:10}},token:t.logo,symbol:t.symbol}),rightOptionList:[]}}));return t.map((e=>({...e,rightOptionList:t.filter((t=>t.token!==e.token))})))}return[]}),[M]),L=Object(a.useCallback)((()=>{u((e=>{const t=[...e,{id:Ae()(),input:0,output:0,inputToken:W[0],outputToken:W[0].rightOptionList[0]}];return t.map((e=>e.input>0)).includes(!1)?f(!0):f(!1),t}))}),[W]),H=Object(a.useCallback)((async()=>{const e=Object(A.b)(r,J,B.positionAddress);try{if(e){if(b.filter((e=>e.input<=0)).length)return void l(_.e.failed,"Please enter a valid amount");f(!0);const n=b.map((e=>{const t=Object(I.c)(String(e.input),e.inputToken.decimals),n=Object(I.c)(String(e.output),e.outputToken.decimals),{tokenAddressPath:a}=Object(Q.a)({chainId:o,from:e.inputToken.token,to:e.outputToken.token});return console.log(e.inputToken.token,e.outputToken.token,[t,"0",a,"999999999999999"]),[Me.address[o],Ve.encodeFunctionData("swapExactTokensForTokens",[t,n,a,"999999999999999"])]})),a=De.encodeFunctionData("multicall",[n]),s=await e.delegateCall(Fe.address[o],a);s.hash&&i(_.e.submited,Object(p.jsx)(E.a,{content:"Waiting for confirmation",txHash:s.hash}));if(await s.wait()){f(!0),v(0),c(_.e.success,Object(p.jsx)(E.b,{content:"The transaction was successful.",txHash:s.hash}));try{await P()}catch(t){console.error("handleUpdatePosition>>>>",t)}}}}catch(t){f(!1),l("Failed",Object(p.jsx)(g.g,{style:{flexDirection:"column"},children:Object(p.jsx)("p",{style:{wordBreak:"break-all"},children:t.reason})}))}}),[r,B.positionAddress,b,o,i,v,c,P,l]);Object(a.useEffect)((()=>{W.length&&u((()=>[{id:Ae()(),input:0,output:0,inputToken:W[0],outputToken:W[0].rightOptionList[0]}]))}),[W]);const U=Object(a.useCallback)(((e,t)=>{const n=I.a.formatTokenAmount(Number(e.target.value),t.inputToken.decimals);if(Number(n)>Number.MAX_SAFE_INTEGER)return void f(!0);const a=Object(Q.b)(o,t.inputToken.token,t.outputToken.token,Object(I.c)(n,t.inputToken.decimals),d)||0;u((o=>{const i=o.map((n=>({...n,input:n.id===t.id?e.target.value:n.input,output:n.id===t.id?Object(I.b)(a,t.outputToken.decimals,!0):n.output})));return i.map((e=>e.input>0&&e.output>0&&e.input<e.inputToken.balance)).includes(!1)||-1!==n.indexOf(".")&&String(n).slice(n.indexOf(".")+1).length>t.inputToken.decimals?f(!0):f(!1),i}))}),[o,d]),G=Object(a.useCallback)(((e,t,n)=>{u((a=>a.map((a=>{if(a.id===t){const t={...a,[n]:e};if(t.input){const e=Object(Q.b)(o,t.inputToken.token,t.outputToken.token,Object(I.c)(I.a.formatTokenAmount(t.input,t.inputToken.decimals),t.inputToken.decimals),d);t.output=Object(I.b)(e,t.outputToken.decimals,!0)}return t}return a}))))}),[o,d]),Z=Object(a.useCallback)(((e,t)=>{u((e=>e.map(((e,n)=>{if(n===t){const t={...e.outputToken,rightOptionList:[]};t.rightOptionList=[...e.inputToken.rightOptionList],t.rightOptionList.push(e.inputToken),t.rightOptionList=t.rightOptionList.filter((t=>t.token!==e.outputToken.token));return{...{...e,outputToken:e.inputToken,inputToken:{...t,balance:e.outputToken.balance},input:0,output:0}}}return e}))))}),[]);return Object(a.useEffect)((()=>{const{tokenPrice:e}=M;if(e){const t=b.map((e=>({from:e.inputToken.token,to:e.outputToken.token,fromDecimals:e.inputToken.decimals,toDecimals:e.outputToken.decimals,inputValue:Number(e.input),outputValue:Number(e.output)})));let n=0;t.forEach((t=>{n-=t.inputValue*Object(I.b)(e[t.from].price,B.mintTokenInfo.settlementCurrency.decimals,!0),n+=t.outputValue*Object(I.b)(e[t.to].price,B.mintTokenInfo.settlementCurrency.decimals,!0)})),v(n)}}),[b,B.mintTokenInfo.settlementCurrency.decimals,M,v]),Object(p.jsxs)(g.m,{children:[Object(p.jsx)(g.l,{children:"Trading through Collateral"}),Object(p.jsxs)(g.a,{id:"panel12",expanded:"panel12"===j,onChange:m("panel12"),children:[Object(p.jsx)(g.c,{"aria-controls":"panel1d-content",children:Object(p.jsx)(F.a,{children:"Method 1. Trading through Collateral"})}),Object(p.jsxs)(g.b,{children:[Object(p.jsx)(Ie.a,{onDragEnd:e=>Re(e,b,u,f),children:Object(p.jsx)(Ie.c,{droppableId:"droppableId",children:e=>Object(p.jsxs)("div",{...e.droppableProps,ref:e.innerRef,children:[b.map(((e,t)=>Object(p.jsx)(Ie.b,{draggableId:e.id,index:t,isDragDisabled:0===t,children:n=>{const a=d.length&&Object(Q.b)(o,e.inputToken.token,e.outputToken.token,Object(I.c)("1",e.inputToken.decimals),d)||0,i=Object(I.b)(a,e.outputToken.decimals,!0),s=I.a.formatFourDecimals(i);return Object(p.jsxs)("div",{ref:n.innerRef,...n.draggableProps,...n.dragHandleProps,style:{display:"flex",alignItems:"center",userSelect:"none",margin:"0 0 8px 0",...n.draggableProps.style,position:"static"},children:[Object(p.jsxs)("div",{style:{width:"100%",position:"relative",paddingRight:t<=0?58:0},children:[Object(p.jsx)(R.a,{SelectIcon:x.b,leftInputValue:e.input,rightInputValue:e.output,isExchange:!0,onExchange:()=>{Z(e,t)},options:W,leftSelectValue:e.inputToken.token,leftBalance:e.inputToken.balance,rightSelectValue:e.outputToken.token,rightBalance:e.outputToken.balance,rightOptions:e.inputToken.rightOptionList,selectedBalance:100,leftDisableStatus:[!1,!1],RightIcon:x.b,rightDisableStatus:[!1,!0],selectInput:t=>{U(t,e)},leftChange:t=>{G(t,e.id,"inputToken")},rightChange:t=>{G(t,e.id,"outputToken")},onMax:()=>{U({target:{value:e.inputToken.balance}},e)},leftSymbol:e.inputToken.token,rightSymbol:e.outputToken.token}),Object(p.jsxs)("p",{style:{position:"absolute",bottom:0,right:t<=0?73:15,color:"rgba(0, 0, 0, 0.5)",fontSize:12},children:["".concat(1," ",e.inputToken.token)," \u2248 ","".concat(s," ").concat(e.outputToken.token)]})]}),t>0?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Te.a,{onClick:()=>{const e=[...b];e.splice(t,1),e.map((e=>e.input>0)).includes(!1)?f(!0):f(!1),u(e)},style:{cursor:"pointer",marginTop:8,marginLeft:10,padding:0},children:Object(p.jsx)(x.f,{})}),Object(p.jsx)(Te.a,{style:{marginTop:8,marginLeft:8,padding:0},children:Object(p.jsx)(x.g,{style:{fill:"none"}})})]}):null]})}},e.id))),e.placeholder]})})}),Object(p.jsx)(Pe,{onClick:L,children:Object(p.jsx)(Se.a,{})}),Object(p.jsx)(z.a,{data:[[_.b.CollateralRatio,D.displayRatio,"".concat(0!==T&&T!==Number.POSITIVE_INFINITY?"\u2248":""," ").concat(C)],[_.b.PrepaidInterestCoverage,D.displayCoverage,N]]}),n?Object(p.jsx)(g.e,{style:{boxShadow:"none"},disabled:h,onClick:H,children:"Submit"}):Object(p.jsx)(g.e,{style:{boxShadow:"none"},disabled:O,onClick:()=>{t((e=>{y(e)}))},children:"Approve"})]})]})]})}var We,ze=n(407);const Ee=Object(r.a)("div")(We||(We=Object(i.a)(["\n  .balance_info {\n    display: flex;\n    align-content: center;\n    padding: 0 12px;\n    margin-bottom: 6px;\n    .label {\n      color: #000;\n      font-size: 14px;\n      font-family: PingFangSC-Medium, sans-serif;\n    }\n    span {\n      font-family: PingFangSC-Medium, sans-serif;\n      font-weight: 400;\n      font-size: 12px;\n      line-height: 17px;\n      color: rgba(0, 0, 0, 0.5);\n      margin-left: 7px;\n    }\n  }\n  .content {\n    display: flex;\n    height: 50px;\n    background: rgba(255, 255, 255, 0.4);\n    border: 1px solid rgba(207, 216, 226, 0.5);\n    box-sizing: border-box;\n    border-radius: 11px;\n    padding: 0 12px;\n    .select_custom {\n      margin: 0;\n      padding: 0;\n      border: none;\n      background: unset;\n      width: 200px;\n      flex-shrink: 0;\n    }\n    .select_custom:nth-of-type(2) {\n      width: 130px;\n    }\n    .MuiInput-root,\n    .MuiInput-input {\n      text-align: right;\n      width: 100%;\n      border: none;\n      &:before,\n      &:after {\n        display: none;\n      }\n    }\n    .MuiInput-input {\n      padding: 0 8px;\n      border-left: 1px solid rgba(207, 216, 226, 0.5) !important;\n\n      &::-webkit-inner-spin-button {\n        display: none;\n      }\n    }\n  }\n  .func {\n    font-size: 12px;\n    line-height: 17px;\n    color: #6ed6f3;\n    text-align: right;\n    padding: 0 20px;\n    margin-top: 3px;\n    cursor: pointer;\n    user-select: none;\n  }\n"])));var _e=function(e){return e.MyWallet="My Wallet",e.Standard="Collateral",e.Settlement="Prepaid Interest",e}(_e||{});const Le=[{type:_e.MyWallet,token:"My Wallet",id:"d04155c3-eb41-4c44-b28d-67bb2d515904",icon:W.a},{type:_e.Settlement,token:"Prepaid Interest",icon:x.k,id:"edebd20e-18a1-4bc8-a869-9b44537d810c"},{type:_e.Standard,token:"Collateral",icon:x.b,id:"763c1484-3fd3-4044-b8b5-3c261947f414"}],{ActionUser:He}=Z.a,Ue=new Y.a.utils.Interface(He.abi),Ge=e=>{const t=X.h[e];return X.f[t].decimals};function Ze(e){const{approveStatus:t,onApprove:n}=e,[o,i]=Object(a.useState)(!0),[l,c]=Object(a.useState)(!1),{signer:r,tokenPools:d}=Object(K.a)(),{walletTokenBalance:b,setRefresh:u}=Object(D.a)(),[j,m]=Object(a.useState)(!1),{toastInfo:f,toastSuccess:O,toastError:y}=Object(k.a)(),{currentPosition:v,currentPositionTokenInfo:C,collateralIndex:T}=Object(w.c)(),{onUpdateCollateralValue:N,onUpdatePrepaidInterest:A,newDisplayCollateralRatio:P,newDisplayPrepaidInterestCoverage:M,newCollateralRatio:R,newPrepaidInterestCoverage:B}=Object(w.a)(),{handleUpdatePosition:W}=Object(w.b)(),[L,U]=Object(a.useState)([{accountType:_e.MyWallet,tokenType:v.mintTokenInfo.symbol,transferVal:0,id:"1fee1a14-b8b3-4b73-b2be-1817a6d228ec",tokenSelectDisabled:!1,list:[...Le],token:v.mintTokenInfo.settlementCurrency.symbol,decimals:v.mintTokenInfo.settlementCurrency.decimals},{accountType:_e.Standard,tokenType:v.mintTokenInfo.symbol,transferVal:0,id:"25897dcf-e843-4630-a5e1-309dc10cb1e5",tokenSelectDisabled:!0,list:[...Le],token:v.mintTokenInfo.settlementCurrency.symbol,decimals:v.mintTokenInfo.settlementCurrency.decimals}]),G=Object(a.useMemo)((()=>{if(C.allowedTokens){const{balances:e,tokens:t}=C.allowedTokens;return Object.keys(e).reduce(((n,a)=>({...n,[a]:Object(I.b)(e[a],t[a].decimals,!0)})),{})}return Object.keys(X.h).reduce(((e,t)=>({...e,[t]:0})),{})}),[C.allowedTokens]),Z=Object(a.useMemo)((()=>{if(C.allowedTokens){const{tokens:e}=C.allowedTokens;return Object.keys(e).map((t=>({token:t,decimals:e[t].decimals,address:e[t].address,icon:()=>Object(p.jsx)(S.a,{imgprops:{style:{marginRight:10}},token:e[t].logo,symbol:t})})))}return[]}),[C.allowedTokens]),q=Object(H.b)(),{expanded:Y,handleChange:J}=Object(V.a)(),{active:$,chainId:ee,account:te}=Object(s.b)(),ne=Object(de.a)($,r),ae=Object(a.useCallback)((async()=>{if(!ne)return;m(!0);let e=null,t=!1;const n=[],[a,o]=L,{tokenType:s,accountType:l,transferVal:c}=a,r=Ge(s),d=Object(I.c)(I.a.formatTokenAmount(c,r),r),b=X.e[ee].tokens[s].address;if(d.isZero())return;const j=e=>{m(!1),e.forEach((e=>{var t,n;"rejected"===e.status?y("Failed",(null===(t=e.reason)||void 0===t?void 0:t.reason)||(null===(n=e.reason)||void 0===n?void 0:n.message)):(O("Success"),u((e=>!e)))}))},h=async e=>{try{const t=await ne.delegateCall(He.address[ee],e);t&&(f(_.e.submited,Object(p.jsx)(E.a,{content:"Waiting for confirmation",txHash:t.hash})),await(async e=>{const t=await e.wait();t&&(O(_.e.success,Object(p.jsx)(E.b,{content:"The transaction was successful.",txHash:t.hash})),m(!1),i(!0),await W())})(t))}catch(t){(e=>{let{message:t,reason:n}=e;y("Failed","".concat(n||t)),m(!1)})(t)}};l===_e.MyWallet?o.accountType===_e.Settlement?e=Ue.encodeFunctionData("addGuarantee",[d,!1]):o.accountType===_e.Standard&&(n.push(q(te,b,v.positionAddress,d)),t=!0):l===_e.Standard?o.accountType===_e.MyWallet?e=Ue.encodeFunctionData("withdrawAsset",[b,te,d]):o.accountType===_e.Settlement&&(e=Ue.encodeFunctionData("addGuarantee",[d,!0])):l===_e.Settlement&&(o.accountType===_e.MyWallet?e=Ue.encodeFunctionData("moveGuarantee",[te,d]):o.accountType===_e.Standard&&(e=Ue.encodeFunctionData("moveGuarantee",[v.positionAddress,d]))),!t&&e?await h(e):Promise.allSettled(n).then(j).catch((e=>{y(_.e.failed,e.reason),m(!1)}))}),[ne,L,ee,O,W,y,u,f,q,te,v.positionAddress]),oe=Object(a.useCallback)(((e,t)=>{let{target:n}=e;const{value:a}=n;U((e=>e.map((e=>({...e,transferVal:a})))))}),[]);Object(a.useEffect)((()=>{const[e,t]=L;switch(e.accountType){case _e.MyWallet:t.accountType===_e.Settlement?A(e.transferVal):N({symbol:e.tokenType,value:Number(e.transferVal)});break;case _e.Standard:if(t.accountType===_e.MyWallet){const t=Number(e.transferVal);N({symbol:e.tokenType,value:t?Number("-".concat(t)):t})}else{const t=Number(e.transferVal);N({symbol:e.tokenType,value:t?Number("-".concat(t)):t}),A(e.transferVal)}break;case _e.Settlement:if(t.accountType===_e.MyWallet){const t=Number(e.transferVal);A(t?Number("-".concat(t)):t)}else{const t=Number(e.transferVal);A(t?Number("-".concat(t)):t),N({symbol:e.tokenType,value:Number(e.transferVal)})}break;default:console.log(1)}}),[L,N,A]);const ie=Object(a.useCallback)(((e,t,n)=>{U((a=>{const o=a.map((n=>({...n,accountType:n.id===t.id?e:n.accountType,tokenType:e===_e.Settlement?v.mintTokenInfo.settlementCurrency.symbol:n.tokenType,transferVal:Number()})));return 0===n&&(o[1].list=Le.filter((e=>e.type!==o[0].accountType)),o[0].tokenSelectDisabled=o[0].accountType===_e.Settlement),o}))}),[v.mintTokenInfo.settlementCurrency.symbol]),se=Object(a.useCallback)(((e,t)=>{U((t=>{const n=t.map((t=>({...t,tokenType:e,transferVal:Number()})));if(e!==v.mintTokenInfo.settlementCurrency.symbol)n[1].list=n[1].list.filter((e=>e.type!==_e.Settlement));else{const e=Le.find((e=>e.type===_e.Settlement));n[1].list.findIndex((e=>e.type===_e.Settlement))>-1||n[1].list.push(e)}return n}))}),[v.mintTokenInfo.settlementCurrency.symbol]),le=Object(a.useCallback)((e=>{U((t=>{const n=[...t],{settlementCurrency:a}=v.mintTokenInfo,{shortBalanceValue:o,estimatedDailyDebt:i,collateralValue:s}=v.positionStatus,l=Ge(e.tokenType);if(e.accountType===_e.MyWallet){const t=b[e.tokenType]||0;n[0].transferVal=t}else if(e.accountType===_e.Standard){const t=G[e.tokenType]||0,i=Number(I.a.formatTokenAmount(1.2*Number(Object(I.b)(o,a.decimals)),0));if(t>0){if(0===i)return n[0].transferVal=t,n[1].transferVal=t,n;const o=i-T.prepaidInterest;if(n[1].accountType===_e.Settlement&&(o>t?(n[0].transferVal=t,n[1].transferVal=t):(n[0].transferVal=o,n[1].transferVal=o)),n[1].accountType===_e.MyWallet){const i=Object(Q.b)(ee,e.tokenType,a.symbol,Object(I.c)(t,l),d),c=s.sub(i),r=o-Number(Object(I.b)(c,a.decimals)),b=Object(Q.b)(ee,a.symbol,e.tokenType,Object(I.c)(I.a.formatTokenAmount(r,a.decimals),a.decimals),d),p=Object(I.b)(b,l,!0);p>t?(n[0].transferVal=t,n[1].transferVal=t):p>0?(n[0].transferVal=Math.floor(t-p),n[1].transferVal=Math.floor(t-p)):(n[0].transferVal=t,n[1].transferVal=t)}}}else if(e.accountType===_e.Settlement){if(n[1].accountType===_e.MyWallet){const e=20*Number(Object(I.b)(i.toNumber(),a.decimals)),t=T.prepaidInterest-e;t>0&&(n[0].transferVal=Number(I.a.formatTokenAmount(t,a.decimals)))}if(n[1].accountType===_e.Standard){const e=20*Number(Object(I.b)(i.toNumber(),a.decimals)),t=T.prepaidInterest-e;t>0&&(n[0].transferVal=t)}}return n}))}),[G,ee,T,v.mintTokenInfo,v.positionStatus,d,b]);return Object(a.useEffect)((()=>{U((e=>[e[0],{...e[1],list:Le.filter((t=>t.type!==e[0].accountType))}]))}),[]),Object(a.useEffect)((()=>{if(j)return void i(!0);const[e]=L,{decimals:t}=e;if(!e||!t)return;let n=0;const{transferVal:a}=e,o=Object(I.c)(I.a.formatTokenAmount(a,X.f[X.h[e.tokenType]].decimals),X.f[X.h[e.tokenType]].decimals);if(o.isZero())i(!0);else if(e.accountType===_e.MyWallet&&(n=b[e.tokenType]||0),e.accountType!==_e.Settlement&&e.accountType!==_e.Standard)e.transferVal<=0||e.transferVal>n||j?i(!0):i(!1);else{if(e.accountType===_e.Settlement){const{interestGuaranteed:e}=v.positionStatus;if(o.gt(e))return void i(!0)}if(e.accountType===_e.Standard){if(a>(G[e.tokenType]||0))return void i(!0)}i(R<120||B<20)}}),[L,G,v.positionStatus,R,B,j,b]),Object(p.jsxs)(g.m,{children:[Object(p.jsx)(g.l,{children:"General Transfer"}),Object(p.jsxs)(g.a,{id:"panel15",expanded:"panel15"===Y,onChange:J("panel15"),children:[Object(p.jsx)(g.c,{"aria-controls":"panel1d-content",children:Object(p.jsx)(F.a,{children:"Method 1. Freestyle Transfer"})}),Object(p.jsxs)(g.b,{children:[L.map(((e,t)=>{let n=G&&G[e.tokenType]||0,a=b&&b[e.tokenType]||0;return String(n).includes(".")&&(n=I.a.formatFourDecimals(n)),String(a).includes(".")&&(a=I.a.formatFourDecimals(a)),Object(p.jsxs)("div",{children:[Object(p.jsxs)(Ee,{children:[Object(p.jsxs)("div",{className:"balance_info",children:[Object(p.jsx)("span",{className:"label",children:"Balance: "}),e.accountType===_e.Standard&&Object(p.jsxs)("span",{children:[n," ",e.tokenType]}),e.accountType===_e.MyWallet&&Object(p.jsxs)("span",{children:[a," ",e.tokenType]}),e.accountType===_e.Settlement&&Object(p.jsxs)("span",{children:[I.a.formatFourDecimals(T.prepaidInterest)," ",v.mintTokenInfo.settlementCurrency.symbol]})]}),Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)(h.a,{options:e.list,onChange:n=>{ie(n,e,t)},selectValue:e.accountType}),Object(p.jsx)(h.a,{options:Z,onChange:e=>{se(e,t)},selectValue:e.tokenType,selectDisabled:1===t||e.tokenSelectDisabled}),Object(p.jsx)(ze.a,{value:e.transferVal,type:"number",onInput:t=>{oe(t,e)},disabled:1===t})]}),Object(p.jsx)("div",{hidden:1===t,className:"func",children:Object(p.jsx)("span",{onClick:()=>{le(e)},onKeyUp:()=>null,tabIndex:0,role:"button",children:"Max"})})]}),0===t?Object(p.jsx)("div",{style:{display:"flex",alignItems:"center",height:30,justifyContent:"center"},children:Object(p.jsx)(x.h,{onClick:()=>{U((e=>{const t=e[0],n=e[1];return e.reverse().map(((e,a)=>({...e,list:0===a?t.list:Le.filter((e=>e.type!==n.accountType)),tokenSelectDisabled:0===a?t.tokenSelectDisabled:n.tokenSelectDisabled})))}))},style:{fill:"none",transform:"rotate(90deg)",cursor:"pointer",width:22}})}):null]},e.id)})),Object(p.jsx)(z.a,{data:[[_.b.CollateralRatio,T.displayRatio,P],[_.b.PrepaidInterestCoverage,T.displayCoverage,M]]}),t?Object(p.jsx)(g.e,{style:{boxShadow:"none"},disabled:o,onClick:ae,children:"Submit"}):Object(p.jsx)(g.e,{style:{boxShadow:"none"},disabled:l,onClick:()=>{n((e=>{c(e)}))},children:"Approve"})]})]})]})}var qe,Ye,Ke,Je,Xe;const Qe=Object(r.a)("div")(qe||(qe=Object(i.a)(["\n  box-sizing: border-box;\n  margin-top: 18px;\n  padding-right: 44px;\n  overflow: auto;\n\n  & > .MuiGrid-root {\n    min-width: 1024px;\n  }\n\n  .account_panel {\n    height: calc(100vh - 189px);\n    padding-bottom: 100px;\n    overflow: auto;\n\n    &::-webkit-scrollbar {\n      display: none;\n    }\n  }\n\n  .asset_info {\n    padding: 0;\n    margin-top: 26px;\n  }\n"]))),$e=Object(r.a)(f.a)(Ye||(Ye=Object(i.a)(["\n  position: relative;\n  padding: 23px 0;\n  display: flex;\n  margin-bottom: 20px;\n\n  .avatar_info {\n    .avatar {\n      font-family: PingFangSC-Regular, sans-serif;\n      font-size: 12px;\n      line-height: 17px;\n      color: #000000;\n\n      & + svg {\n        margin-left: 10px;\n      }\n    }\n  }\n\n  .token_item {\n    justify-content: space-between;\n    align-items: center;\n    padding: 16px 0;\n\n    svg {\n      margin-right: 10px;\n\n      & + span {\n        margin-top: 5px;\n      }\n    }\n\n    .balance {\n      font-family: PingFangSC-Regular, sans-serif;\n\n      span:first-of-type {\n        font-size: 14px;\n        line-height: 20px;\n      }\n\n      span:last-of-type {\n        font-size: 12px;\n        line-height: 17px;\n        color: #747879;\n      }\n    }\n  }\n"]))),et=Object(r.a)("div")(Ke||(Ke=Object(i.a)(["\n  width: 50%;\n  padding: 0 30px 0 40px;\n  display: flex;\n  justify-content: space-between;\n\n  font-family: PingFangSC-Semibold, sans-serif;\n\n  > div {\n    width: calc(100% - 50px);\n  }\n\n  &:after {\n    content: '';\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 0.2px;\n    height: 70%;\n    background-color: #2da3ff;\n  }\n\n  h2 {\n    font-family: PingFangSC-Semibold, sans-serif;\n    font-weight: 550;\n    font-size: 1rem;\n    line-height: 22px;\n    color: #000000;\n  }\n\n  .num {\n    font-family: PingFangSC-Semibold, sans-serif;\n    font-weight: 550;\n    font-size: 50px;\n    line-height: 1;\n    color: #6ed6f3;\n    display: flex;\n    align-items: flex-end;\n    margin-bottom: 20px;\n    margin-top: 15px;\n    width: 100%;\n\n    span {\n      font-family: PingFangSC-Regular, sans-serif;\n      display: block;\n      max-width: 80%;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    sub {\n      margin-bottom: 5px;\n      font-size: 20px;\n      font-weight: 500;\n    }\n  }\n\n  .tip {\n    font-size: 12px;\n    line-height: 17px;\n    color: rgba(0, 0, 0, 0.5);\n  }\n\n  .num.guarantee {\n    color: #efd71e;\n  }\n"]))),tt=Object(r.a)($e)(Je||(Je=Object(i.a)(["\n  padding: 23px 0 !important;\n"]))),nt=Object(r.a)("div")(Xe||(Xe=Object(i.a)(["\n  padding: 20px;\n  background: rgba(255, 255, 255, 0.4);\n  box-shadow: 0 4px 27px rgba(0, 0, 0, 0.03);\n  border-radius: 8px;\n  margin-bottom: 20px;\n  .m_title {\n    font-size: 22px;\n    line-height: 31px;\n    font-weight: 500;\n    font-family: PingFangSC-Medium, sans-serif;\n    margin-bottom: 13px;\n  }\n  .list {\n    background: rgba(42, 161, 255, 0.07);\n    border-radius: 8px;\n    padding: 16px 16px 0;\n    margin-bottom: 18px;\n  }\n  .item {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    svg {\n      margin-right: 10px;\n    }\n    .item_title {\n      font-size: 18px;\n      font-family: PingFangSC-Semibold, sans-serif;\n      font-weight: 550;\n      line-height: 25px;\n      display: flex;\n      align-items: center;\n      margin-bottom: 20px;\n      img {\n        width: 24px;\n        margin-right: 10px;\n      }\n    }\n    .icon_symbol {\n      display: flex;\n      align-items: center;\n      font-family: PingFangSC-Medium, sans-serif;\n      font-weight: 500;\n      font-size: 14px;\n    }\n    span {\n      font-family: PingFangSC-Regular, sans-serif;\n      font-size: 14px;\n    }\n    &.currency {\n      padding: 22px 0;\n      border-top: 0.5px solid rgba(0, 0, 0, 0.13);\n    }\n    &.item_head {\n      padding-bottom: 14px;\n      span {\n        font-family: PingFangSC-Medium, sans-serif;\n        font-weight: 500;\n        font-size: 12px;\n        line-height: 17px;\n        color: rgba(0, 0, 0, 0.6);\n      }\n    }\n    .balance span {\n      line-height: 20px;\n      &:last-of-type {\n        opacity: 0.5;\n      }\n    }\n  }\n  .avatar .currency {\n    padding: 15px 0;\n  }\n  .avatar_address {\n    display: flex;\n    align-items: center;\n    padding-left: 16px;\n    line-height: 17px;\n    * {\n      font-size: 12px;\n      font-weight: normal !important;\n      color: #000 !important;\n      font-family: PingFangSC-Regular, sans-serif !important;\n    }\n  }\n\n  .asset_list_title {\n    font-family: PingFangSC-Medium, sans-serif;\n    font-weight: 500;\n    font-size: 22px;\n    line-height: 22px;\n    color: #000000;\n    margin-bottom: 22px;\n  }\n  .outstandingDebt {\n    span {\n      font-size: 14px;\n    }\n    div {\n      font-family: PingFangSC-Medium, sans-serif;\n      font-weight: 500;\n      margin-bottom: 5px;\n      svg {\n        margin-right: 10px;\n      }\n    }\n    span:last-of-type {\n      font-family: PingFangSC-Regular, sans-serif;\n      font-weight: 400;\n    }\n  }\n"]))),at=e=>1*e>=400?"rgb(29, 202, 218)":1*e>200?"rgb(255, 204, 4)":"rgb(255, 99, 8)";var ot=Object(c.h)((function(){const e=o.a.useRef(),{expanded:t}=Object(V.a)(),[n,i]=Object(a.useState)(!1),{currentPosition:c,currentPositionTokenInfo:r,currentMintToken:b}=Object(w.c)(),{handleChangeCurrentPosition:u}=Object(w.b)(),{account:m,chainId:f}=Object(s.b)(),{toastSuccess:C,toastError:F}=Object(k.a)(),D=Object(a.useCallback)((e=>{u(e)}),[u]),{handleApprove:R}=Object(y.a)(m,null===c||void 0===c?void 0:c.mintTokenInfo.settlementCurrency.address),{onCheckApprove:B}=Object(y.b)(),W=Object(a.useCallback)((async()=>{if(c&&c.isEnable){const e=await B(m,c.mintTokenInfo.settlementCurrency.address,c.positionAddress);return e&&e._hex>0?i(!0):i(!1),e}return 0}),[m,c,B]),z=Object(a.useCallback)((async e=>{if(c&&c.isEnable)try{e&&e(!0);const t=await R(c.positionAddress);if(t.hash){await t.wait()&&W().then((t=>{t._hex>0?(e&&e(!1),C("Approve Success")):F("Fail")}))}}catch(t){F("Failed","".concat(t))}}),[c,R,W,C,F]),E=Object(a.useMemo)((()=>c&&c.collateralRatio?c.collateralRatio===Number.POSITIVE_INFINITY?"+\u221e":I.a.formatTokenAmount(c.collateralRatio,2):"0"),[c]),_=Object(a.useMemo)((()=>c&&c.prepaidInterestCoverage?c.prepaidInterestCoverage===Number.POSITIVE_INFINITY?"+\u221e":I.a.formatTokenAmount(c.prepaidInterestCoverage,0):"0"),[c]),L=Object(a.useMemo)((()=>{if(c){const e=Object(I.b)(c.positionStatus.interestGuaranteed.sub(c.positionStatus.obligation).sub(c.positionStatus.epochDebt).sub(c.positionStatus.estimatedObligationToday),c.mintTokenInfo.settlementCurrency.decimals);return I.a.formatTokenAmount(Number(e),4)}return 0}),[c]);Object(a.useEffect)((()=>{W(),t&&-1!==Number(t)&&e&&"panel1"!==t&&"panel2"!==t&&setTimeout((()=>{const e=document.querySelector("#".concat(t));e&&e.scrollIntoView()}),500)}),[W,c,t]);const H=Object(a.useMemo)((()=>{var e;if(!r)return null;const t=r.tokenPrice,n=r.allowedTokens,a=null===(e=r.allowedTokens)||void 0===e?void 0:e.balances,o=r.WBTCToUSD;return Object.values(n.tokens).map((e=>{var n;return Object(p.jsxs)("div",{className:"item currency",children:[Object(p.jsxs)("div",{className:"icon_symbol",children:[Object(p.jsx)(S.a,{token:e.logo,symbol:e.symbol,imgprops:{style:{marginRight:10}}}),e.symbol]}),Object(p.jsxs)(g.g,{className:"balance",style:{flexDirection:"column",alignItems:"flex-end"},children:[Object(p.jsx)("span",{children:a&&Object(I.b)(a[e.symbol],e.decimals)||0}),Object(p.jsxs)("span",{children:["\u2248"," ",a&&I.a.formatCurrencyTwoDecimals(a[e.symbol].toNumber()*(null===(n=t[e.symbol])||void 0===n?void 0:n.price.toNumber())*o/10**6)||0]})]})]},e.symbol)}))}),[r]),U=Object(a.useMemo)((()=>{if(Object(A.f)(f)){const e=N.c[f].tokens;return Object.keys(N.c[f].tokens).map((t=>({token:e[t].symbol,address:e[t].address,decimals:e[t].decimals,icon:()=>Object(p.jsx)(S.a,{imgprops:{style:{marginRight:10}},token:e[t].logo,symbol:e[t].symbol})})))}return[]}),[f]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(M.a,{style:{marginBottom:4},children:"Collateral Management"}),Object(p.jsx)(T,{children:"Make sure the collateral ratio is higher than the Liquidation Ratio, and the Prepaid Interest Coverage is higher than the Liquidation Threshold."}),Object(p.jsx)(h.a,{isGroup:!1,options:U,selectValue:b,onChange:D}),Object(p.jsx)(Qe,{children:null!==c&&void 0!==c&&c.isEnable?Object(p.jsxs)(d.a,{container:!0,spacing:2.5,children:[Object(p.jsx)(d.a,{item:!0,xs:8,children:Object(p.jsxs)(g.i,{ref:e,children:[Object(p.jsxs)(tt,{children:[Object(p.jsxs)(et,{children:[Object(p.jsxs)("div",{title:"Collateral Ratio: ".concat(E),children:[Object(p.jsx)("h2",{children:"Collateral Ratio"}),c.collateralRatio?Object(p.jsx)("p",{className:"num",children:c.collateralRatio?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{style:{color:at(null===c||void 0===c?void 0:c.collateralRatio)},children:E}),(null===c||void 0===c?void 0:c.collateralRatio)===Number.POSITIVE_INFINITY?null:Object(p.jsx)("sub",{style:{color:at(null===c||void 0===c?void 0:c.collateralRatio)},children:"%"})]}):Object(p.jsx)("span",{style:{color:"rgb(255, 99, 8)"},children:"0"})}):Object(p.jsx)("p",{className:"tip",style:{lineHeight:"85px"},children:"Add collateral before mint"}),Object(p.jsxs)("p",{className:"tip",children:["Liquidation Ratio\uff1a",P.a.ratio,"%"]})]}),Object(p.jsx)(j,{style:{height:"100%"},value:c.isEnable&&"0"!==E?((null===c||void 0===c?void 0:c.collateralRatio)-100)/5:0})]}),Object(p.jsxs)(et,{children:[Object(p.jsxs)("div",{title:"Prepaid Interest Coverage: ".concat(_," days"),children:[Object(p.jsx)("h2",{children:"Prepaid Interest Coverage"}),c.prepaidInterestCoverage?Object(p.jsx)("p",{className:"num guarantee",children:c.prepaidInterestCoverage?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("sub",{style:{color:at(c.prepaidInterestCoverage)},children:"\u2248"}),Object(p.jsx)("span",{style:{color:at(c.prepaidInterestCoverage)},children:_}),c.prepaidInterestCoverage===Number.POSITIVE_INFINITY?null:Object(p.jsx)("sub",{style:{color:at(c.prepaidInterestCoverage)},children:"days"})]}):Object(p.jsx)("span",{style:{color:"rgb(255, 99, 8)"},children:"0"})}):Object(p.jsx)("p",{className:"tip",style:{lineHeight:"85px"},children:"Add collateral before mint"}),Object(p.jsxs)("p",{className:"tip",children:["Liquidation Threshold: ",P.a.days," days"]})," "]}),Object(p.jsx)(j,{style:{height:"100%"},value:c.prepaidInterestCoverage/5})]})]}),Object(p.jsx)(G,{onApprove:z,approveStatus:n}),Object(p.jsx)(ke,{onApprove:z,approveStatus:n}),Object(p.jsx)(ve,{onApprove:z,approveStatus:n}),Object(p.jsx)(Be,{onApprove:z,approveStatus:n}),Object(p.jsx)(ne,{onApprove:z,approveStatus:n}),Object(p.jsx)(Ze,{onApprove:z,approveStatus:n})]})}),Object(p.jsxs)(d.a,{item:!0,xs:4,className:"account_panel",children:[Object(p.jsxs)(nt,{children:[Object(p.jsx)("h3",{className:"m_title",children:"Total Collateral"}),Object(p.jsxs)("div",{className:"list guarantee",children:[Object(p.jsx)("div",{className:"item",children:Object(p.jsxs)("h4",{className:"item_title",children:[Object(p.jsx)("img",{src:v.a.PrepaidInterest,alt:""}),"Prepaid Interest"]})}),Object(p.jsxs)("div",{className:"item currency",children:[Object(p.jsxs)("span",{className:"icon_symbol",children:[Object(p.jsx)(S.a,{token:null===c||void 0===c?void 0:c.mintTokenInfo.settlementCurrency.logo,symbol:null===c||void 0===c?void 0:c.mintTokenInfo.settlementCurrency.symbol}),Object(p.jsx)("span",{style:{marginLeft:"10px"},children:null===c||void 0===c?void 0:c.mintTokenInfo.settlementCurrency.symbol})]}),Object(p.jsx)("span",{children:L})]})]}),Object(p.jsxs)("div",{className:"list avatar",style:{marginBottom:12},children:[Object(p.jsx)("div",{className:"item",children:Object(p.jsxs)("h4",{className:"item_title",children:[Object(p.jsx)("img",{src:v.a.Collateral,alt:""}),"Collateral"]})}),Object(p.jsxs)("div",{className:"item item_head",children:[Object(p.jsx)("span",{children:"Ticker"}),Object(p.jsx)("span",{children:"Holdings - In Collateral"})]}),H]}),Object(p.jsxs)("div",{className:"avatar_address",children:[Object(p.jsx)("span",{children:"Collateral Account Address: \xa0\xa0"})," ",Object(p.jsx)(O.a,{toCopy:(null===c||void 0===c?void 0:c.positionAddress)||"",children:c?"".concat(null===c||void 0===c?void 0:c.positionAddress.slice(0,6),"...").concat(null===c||void 0===c?void 0:c.positionAddress.slice(-6)):""})]})]}),Object(p.jsxs)(nt,{children:[Object(p.jsx)("h3",{className:"asset_list_title",children:"My Outstanding Debt"}),Object(p.jsxs)(g.g,{className:"outstandingDebt",style:{alignItems:"center",justifyContent:"space-between"},children:[Object(p.jsxs)(g.g,{style:{alignItems:"center"},children:[Object(p.jsx)(x.j,{className:"icon"}),null===c||void 0===c?void 0:c.mintTokenInfo.symbol]}),Object(p.jsx)("span",{children:I.a.formatFourDecimals(Number(Object(I.b)(c.balance,c.mintTokenInfo.decimals)))})]})]}),Object(p.jsx)(nt,{style:{padding:30},children:Object(p.jsx)("img",{src:v.a.CollateralManage,style:{width:"100%"},alt:""})})]})]}):Object(p.jsxs)(l.b,{to:"/collateral",style:{color:"#2AA1FF"},children:["Please enable the collateral first",Object(p.jsx)(x.a,{})," "]})})]})}));t.default=function(){return Object(p.jsx)(ot,{})}},412:function(e,t,n){"use strict";n.d(t,"m",(function(){return w})),n.d(t,"l",(function(){return S})),n.d(t,"a",(function(){return N})),n.d(t,"c",(function(){return A})),n.d(t,"b",(function(){return P})),n.d(t,"e",(function(){return M})),n.d(t,"h",(function(){return F})),n.d(t,"k",(function(){return V})),n.d(t,"j",(function(){return D})),n.d(t,"g",(function(){return R})),n.d(t,"n",(function(){return B})),n.d(t,"d",(function(){return W})),n.d(t,"f",(function(){return z})),n.d(t,"i",(function(){return E}));var a,o,i,s,l,c,r,d,b,p,u,j,m,h,f=n(8),x=(n(1),n(46)),g=n(1056),O=n(1064),y=n(1065),k=n(107),v=n(433),C=n.n(v),T=n(21),I=n(0);const w=Object(x.a)(k.a)(a||(a=Object(f.a)(["\n  margin-bottom: 20px;\n  padding-bottom: 0 !important;\n"]))),S=Object(x.a)("h3")(o||(o=Object(f.a)(["\n  font-family: PingFangSC-Semibold, sans-serif;\n  font-style: normal;\n  font-weight: 550;\n  font-size: 22px;\n  line-height: 31px;\n  color: #000000;\n  margin-bottom: 10px;\n"]))),N=Object(x.a)((e=>Object(I.jsx)(g.a,{disableGutters:!0,elevation:0,square:!0,...e})))((()=>({borderBottom:".2px solid #a5a5a5",background:"unset",boxShadow:"none","&:last-child":{borderBottom:0},"&:before":{display:"none"},".MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(45deg)"}}))),A=Object(x.a)((e=>Object(I.jsx)(O.a,{expandIcon:Object(I.jsx)(C.a,{style:{color:"#2AA1FF"}}),...e})))((()=>({padding:0,"& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(45deg)"},"& .MuiAccordionSummary-content":{margin:"20px 0",p:{color:"#000",fontSize:"1rem",fontFamily:"PingFangSC-Semibold, sans-serif",fontWeight:600,lineHeight:"22px"}}}))),P=Object(x.a)(y.a)((()=>({padding:"0 0 30px 0",transition:".3s"}))),M=(Object(x.a)("div")(i||(i=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),Object(x.a)(T.c)(s||(s=Object(f.a)(["\n  display: block !important;\n  background: linear-gradient(90deg, #61c2f7 0%, #7ae9f0 100%);\n  border-radius: 20px !important;\n  color: #000;\n  width: 30% !important;\n  margin: 0 auto !important;\n  box-shadow: none !important;\n"])))),F=(Object(x.a)(T.c)(l||(l=Object(f.a)(["\n  display: block !important;\n  background: linear-gradient(90deg, #61c2f7 0%, #7ae9f0 100%);\n  border-radius: 20px !important;\n  color: #000;\n  //width: 30% !important;\n  margin: 0 auto !important;\n  box-shadow: none !important;\n"]))),Object(x.a)("div")(c||(c=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 20px 0;\n\n  div {\n    display: flex;\n    margin-bottom: 10px;\n    font-size: 12px;\n    color: rgba(0, 0, 0, 0.5);\n\n    p + p {\n      margin-left: 20px;\n    }\n  }\n\n  .days {\n    margin: 0;\n  }\n"]))),Object(x.a)("div")(r||(r=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  width: calc(100% / 2 - 25px);\n\n  p {\n    height: 28px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 0 15px;\n    box-sizing: border-box;\n\n    span {\n      font-size: 12px;\n      line-height: 17px;\n      color: rgba(0, 0, 0, 0.5);\n    }\n  }\n"]))),Object(x.a)("strong")(d||(d=Object(f.a)(["\n  font-family: PingFangSC-Regular, sans-serif;\n  font-weight: 400;\n  display: block;\n  width: 16px;\n  height: 16px;\n  font-size: 12px;\n  background: #c4c4c4;\n  line-height: 16px;\n  text-align: center;\n  border-radius: 50%;\n  flex: none;\n"])))),V=Object(x.a)("div")(b||(b=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  font-size: 14px;\n  line-height: 20px;\n  color: rgba(0, 0, 0, 0.5);\n  background: #f1f1f1;\n  border-radius: 8px;\n  padding: 14px 80px 13px 21px;\n  margin-bottom: 20px;\n\n  strong {\n    margin-right: 16px;\n  }\n  * {\n    font-family: PingFangSC-Regular, sans-serif;\n  }\n"]))),D=Object(x.a)("span")(p||(p=Object(f.a)(["\n  font-family: PingFangSC-Regular, sans-serif;\n  font-size: 12px;\n  line-height: 17px;\n  color: rgba(0, 0, 0, 0.5);\n"]))),R=Object(x.a)("div")(u||(u=Object(f.a)(["\n  display: flex;\n"]))),B=(e,t)=>function(n){return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(e,{...n,children:t})})},W=Object(x.a)(T.c)(j||(j=Object(f.a)(["\n  box-shadow: 0px 2px 0px rgba(0, 0, 0, 0.043) !important;\n  border-radius: 14px !important;\n  background: linear-gradient(270deg, #7ae9f1 0%, #61c3f7 100%) !important;\n  border-radius: 14px !important;\n  font-size: 14px !important;\n  height: 32px !important;\n  line-height: 32px !important;\n  color: #000 !important;\n  font-weight: normal !important;\n"]))),z=Object(x.a)("h1")(m||(m=Object(f.a)(["\n  font-family: 'Heebo Medium';\n  font-style: normal;\n  font-weight: 500;\n  font-size: 32px;\n  line-height: 47px;\n  margin-bottom: 14px;\n  color: #000000;\n"]))),E=Object(x.a)("div")(h||(h=Object(f.a)(["\n  height: calc(100vh - 189px);\n  padding-bottom: 100px;\n  overflow-y: scroll;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"])))},413:function(e,t,n){"use strict";var a=n(1),o=n(142);t.a=()=>{const e=Object(a.useContext)(o.a);if(void 0===e)throw new Error("hashPowerToken context undefined");return e}},425:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(1);var a=n(0);function o(e){return Object(a.jsx)("img",{...e.imgprops,src:e.token,alt:e.symbol})}},429:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));n(1);var a=n(9),o=n(412),i=n(0);const s=e=>{let{txHash:t,content:n}=e;return Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{style:{marginBottom:24},children:n}),Object(i.jsx)(o.g,{style:{flexDirection:"row-reverse"},children:Object(i.jsx)(o.d,{onClick:()=>{window.open("".concat(a.e,"/").concat(t))},children:"View on Explorer"})})]})},l=e=>{let{txHash:t,content:n}=e;return Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{style:{marginBottom:24},children:n}),Object(i.jsx)(o.g,{style:{flexDirection:"row-reverse"},children:Object(i.jsx)(o.d,{onClick:()=>{window.open("".concat(a.e,"/").concat(t))},children:"View on Explorer"})})]})}},435:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(37),o=n(53);function i(){const e=Object(a.c)((e=>e.collateralManage.expanded)),t=Object(a.b)();return{expanded:e,handleChange:e=>(n,a)=>{t(Object(o.b)({expanded:a?e:"-1"}))},setExpanded:e=>{t(Object(o.b)({expanded:e||"-1"}))}}}},442:function(e,t,n){"use strict";var a,o=n(8),i=(n(1),n(46)),s=n(0);const l=Object(i.a)("div")(a||(a=Object(o.a)(["\n  background: #def1ff;\n  border-radius: 14px;\n  padding: 13px 22px;\n  margin: 20px 0;\n\n  table {\n    width: 100%;\n  }\n\n  td {\n    font-family: PingFangSC-Regular, sans-serif;\n    font-weight: 400;\n    font-size: 12px;\n    padding: 5px 0;\n  }\n\n  .label {\n    text-align: left;\n    width: 30%;\n  }\n\n  .from,\n  .to {\n    width: 35%;\n    line-height: 17px;\n    text-align: right;\n  }\n\n  .to {\n    font-family: PingFangSC-Medium, sans-serif;\n    font-weight: 500;\n    color: #000;\n  }\n\n  .borderTop {\n    border-top: 0.5px solid rgba(0, 0, 0, 0.12);\n  }\n"])));t.a=function(e){const{data:t}=e;return Object(s.jsx)(l,{children:Object(s.jsx)("table",{children:Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{className:"from",colSpan:2,children:"From"}),Object(s.jsx)("td",{className:"to",children:"To"})]}),t.map((e=>Object(s.jsxs)("tr",{className:e[3]?"borderTop":"",children:[Object(s.jsx)("td",{className:"label",children:e[0]}),Object(s.jsx)("td",{className:"from",children:e[1]}),Object(s.jsx)("td",{className:"to",children:e[2]})]},e[0])))]})})})}},454:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a,o,i,s=n(8),l=n(1),c=n(46),r=n(14),d=n(217),b=n(21),p=n(412),u=n(0);const j=Object(c.a)("div")(a||(a=Object(s.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: static !important;\n"]))),m=Object(c.a)("div")(o||(o=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  width: calc(100% / 2 - 25px);\n\n  p {\n    height: 28px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 0 15px;\n    box-sizing: border-box;\n\n    span {\n      font-size: 12px;\n      line-height: 17px;\n      color: rgba(0, 0, 0, 0.5);\n    }\n  }\n\n  .maxBtn {\n    height: 21px;\n    align-items: flex-end;\n  }\n"])));Object(c.a)("strong")(i||(i=Object(s.a)(["\n  display: block;\n  width: 20px;\n  height: 20px;\n  background: #c4c4c4;\n  line-height: 20px;\n  text-align: center;\n  border-radius: 50%;\n"])));function h(e){const{options:t,leftBalance:n,isExchange:a,onExchange:o,onMax:i,selectInput:s,rightSelectInput:c,SelectIcon:h,RightIcon:f,leftInputValue:x,rightInputValue:g,rightBalance:O,rightDisableStatus:y,leftChange:k,rightChange:v,leftDisableStatus:C=[!1,!1],leftSelectValue:T,rightSelectValue:I,rightOptions:w,leftSymbol:S,rightSymbol:N,rightNumberIsShow:A=!0,leftDesc:P,rightDesc:M}=e,[F,V]=Object(l.useState)(t&&t.length?t[0]:{}),[D,R]=Object(l.useState)(t&&t.length?t[0].rightOptionList:[]),[B,W]=Object(l.useState)(D?D[0]:{});Object(l.useEffect)((()=>{t&&t.length&&T&&I&&(V(t.filter((e=>e.token===T))[0]||t[0]),R(t[0].rightOptionList),W(t[0].rightOptionList.filter((e=>e.token===I))[0]||t[0].rightOptionList[0]))}),[T,t,I]);const z=Object(l.useMemo)((()=>{const e=O||B&&B.balance||0,t=n||F.balance||0;return{right:{orignalBalance:e,balance:r.a.formatFourDecimals(e),symbol:N||(B&&Object.keys(B)?B.token:"WBTC")},left:{orignalBalance:t,balance:r.a.formatFourDecimals(t),symbol:S||F.token||"WBTC"}}}),[F,n,S,O,N,B]);return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(j,{children:[Object(u.jsxs)(m,{children:[Object(u.jsxs)("p",{title:"".concat(z.left.symbol," Balance: ").concat(z.left.orignalBalance),children:[Object(u.jsx)(h,{}),Object(u.jsxs)("span",{className:"balance",children:[z.left.balance," ",z.left.symbol]})]}),Object(u.jsx)(d.a,{selectValue:T||F.token,allDisabled:!C||C[0]&&C[1],inputDisabled:!C||C[1],selectDisabled:!C||C[0],onChange:e=>{const n=t.filter((t=>t.token===e))[0];R(n.rightOptionList),W(n.rightOptionList[0]),V(n),k&&k(n)},selectInput:s,actionValue:x,options:t,groupStyle:{width:"100%"},isGroup:!0},1),Object(u.jsxs)(p.g,{style:{justifyContent:"space-between",alignItems:"center"},children:[P&&P,Object(u.jsx)("p",{dir:"rtl",style:{width:"100%"},className:"maxBtn",children:Object(u.jsx)("span",{onClick:()=>{i&&i(F)},onKeyUp:()=>null,tabIndex:0,role:"button",style:{cursor:"pointer",color:"#6ED6F3",fontSize:"0.75rem",userSelect:"none"},children:"Max"})})]})]}),a?Object(u.jsx)(b.h,{onClick:o,style:{fill:"none",cursor:"pointer",width:22,marginTop:8}}):Object(u.jsx)(b.s,{style:{fill:"none",width:22,marginTop:8}}),Object(u.jsxs)(m,{children:[Object(u.jsxs)("p",{title:A?"".concat(z.right.symbol," Balance: ").concat(z.right.orignalBalance):"",children:[Object(u.jsx)(f,{}),A?Object(u.jsxs)("span",{className:"balance",children:[z.right.balance," ",z.right.symbol]}):null]}),Object(u.jsx)(d.a,{selectValue:I||(B?B.token:"WBTC"),options:w||D,actionValue:g,groupStyle:{width:"100%"},isGroup:!0,allDisabled:!y||y[0]&&y[1],inputDisabled:!y||y[1],selectDisabled:!y||y[0],selectInput:c,onChange:e=>{if(F){const t=F.rightOptionList.filter((t=>t.token===e))[0];v&&v(t),W(t)}else{const n=t[0].filter((t=>t.token===e))[0];v&&v(n),W(n)}}},2),Object(u.jsxs)(p.g,{style:{justifyContent:"space-between",alignItems:"center"},children:[M&&M,Object(u.jsx)("p",{dir:"rtl",style:{width:"100%"},className:"maxBtn"})]})]})]})})}},474:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return d}));var a=n(25),o=n(1),i=n(16),s=n(12),l=n(79),c=n(108);function r(){const{active:e}=Object(a.b)(),{signer:t}=Object(c.a)();return{onCheckApprove:Object(o.useCallback)((async(n,a,o)=>{if(e)try{console.log("handleApprove",1);const e=Object(s.b)(t,l,a);if(e){return await e.allowance(n,o)}}catch(i){return console.error("Failed to check approval",i),null}return null}),[e,t])}}function d(e,t){const{active:n,library:c,chainId:r}=Object(a.b)();return{handleApprove:Object(o.useCallback)((async a=>{if(n&&r){const n=Object(s.e)(c,e),o=Object(s.b)(n,l,t&&"object"===typeof t?t[r]:t);if(o)return o.approve(a,i.a.constants.MaxUint256)}return null}),[n,r,c,e,t])}}},528:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(1),o=n(12),i=n(109),s=n(37);function l(e,t){const[n,l]=Object(a.useState)(null),c=Object(s.c)((e=>e.collateralManage.currentCPT));return Object(a.useEffect)((()=>{if(e&&t&&c&&Number(c.position)){const e=Object(o.b)(t,i,c.position);l(e)}}),[e,c,t]),n}},594:function(e,t,n){"use strict";var a,o=n(8),i=n(46);const s=Object(i.a)("h1")(a||(a=Object(o.a)(["\n  font-family: 'Heebo Medium';\n  font-style: normal;\n  font-weight: 500;\n  font-size: 32px;\n  line-height: 47px;\n  margin-bottom: 14px;\n  color: #000000;\n"])));t.a=s},595:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));const a={days:10,ratio:110},o={days:20,ratio:120}}}]);
//# sourceMappingURL=15.d0f54f26.chunk.js.map